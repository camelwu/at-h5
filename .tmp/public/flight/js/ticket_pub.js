/*! asiatravel FE team at-h5-nodejs-----2016-05-19T15:21:43 */
function TicketDate(a){Calender.call(this,a)}TicketDate.prototype=new Calender,TicketDate.prototype.linkColor=function(a,b){var c,d,e=_CalF.$(".live",this.dd);if("Return"==a){for(var f=0;f<e.length;f++)e[f].querySelector(".live_txt")&&"去程"==e[f].querySelector(".live_txt").innerHTML&&(c=f),e[f].querySelector(".live_txt")&&"返程"==e[f].querySelector(".live_txt").innerHTML&&(d=f);for(var g=c;d>g;g++)_CalF.addClass("yellow",e[g])}else for(var h=0;h<e.length;h++){var i=/(\d{1,2})/g.exec(e[h].innerHTML);i&&(e[h].getAttribute("data-day")==b?e[h].innerHTML='<span class="live_circle">'+i[0]+"</span>":e[h].innerHTML=null!=i[0]?i[0]:""),"今天"==e[h].innerHTML&&b==e[h].getAttribute("data-day")&&(e[h].innerHTML='<span class="live_circle">今天</span>')}return!1},TicketDate.prototype._word={h:["入住","离店"],f:["去程","返程","去+返"]},TicketDate.prototype.inputEvent=function(){var a=this,b=new Date,c=b.getFullYear(),d=b.getMonth();b.getDate();_CalF.bind(this.input,"click",function(){a.createContainer();for(var b=0;b<a.num;b++)if(b==a.num-1){var e=new Date(c,d+b,1);a.drawLastDate(e)}else{var e=new Date(c,d+b,1);if("Oneway"==a.type)a.drawDate(e),a.linkColor("Oneway",a.singleDate);else{var f=a.doubleDate.start,g=a.doubleDate.end;a.time={},f!=g?(a.time[f]="去程",a.time[g]="返程"):a.time[f]="去+返",a.drawDate(e)}}})},TicketDate.prototype.initialize=function(a){this.type=a.type,this.id=a.id,this.num=a.num,this.sClass1=a.sClass1,this.id2=a.id2,this.fn=a.fn,this.op=0,this.input=_CalF.$("#"+this.id),this.inputEvent(),this.outClick(),"Oneway"==this.type?this.singleDate=a.time.start:this.doubleDate=a.dateObj},TicketDate.prototype.createContainer=function(a){var b=_CalF.$("#"+this.id+"-date");b&&b.parentNode.removeChild(b);var c=this.container=document.createElement("div");if(c.id=this.id+"-date",c.style.position="absolute",c.style.zIndex=98,"input"===this.input.tagName){var d=_CalF.getPos(this.input);c.style.left=d.left+"px",c.style.top=d.bottom-1+"px",_CalF.bind(c,"click",this.stopPropagation)}else{c.style.background="#f5f4f9",c.style.overflow="auto",c.style.width=c.style.height="100%",c.style.left="0",c.style.top="0",c.style.paddingBottom="118px";var e=this.header=document.createElement("div");e.id=this.id+"-header",e.className="header",e.innerHTML='<a href="javascript:void(0);" class="ticket-header-back"><i class="icons ticket-go-back"></i></a><h3>选择日期</h3><p class="choose-week-tip">选择日期为出发地日期</p>',document.body.appendChild(e);var f=document.createElement("div");f.className="calendar",f.style.height="108px",f.innerHTML=this._tempweek.join(""),c.appendChild(f);var g=this.tiper=document.createElement("div");g.id=this.id+"-tiper",g.className="tipers",g.innerHTML="请选择去程日期","Oneway"==this.type?void 0:c.appendChild(g)}document.body.appendChild(c)},TicketDate.prototype.drawDate=function(a){var b,c,d,e,f,g,h,i,j,k,l=[],m=new Date,n=m.getFullYear(),o=m.getMonth(),p=m.getDate(),q="",r="";for(this.dateWarp=b=document.createElement("div"),b.className="calendar",b.innerHTML=this._template.join(""),this.year=e=a.getFullYear(),this.month=f=a.getMonth()+1,this.date=g=a.getDate(),this.titleDate=c=_CalF.$(".title-date",b)[0],tims=this.time,k=document.createTextNode(e+"年"+f+"月"),c.appendChild(k),d=_CalF.$("dd",b)[0],h=new Date(e,f,0).getDate(),i=new Date(e,f-1,1).getDay(),j=0;i>j;j++)l.push("<a>&nbsp;</a>");for(j=1;h>=j;j++)r=parseInt(j)<10?"0"+parseInt(j):parseInt(j),q=parseInt(f)<10?"0"+parseInt(f):parseInt(f),n>e?l.push('<a class="disabled">'+j+"</a>"):e==n?o+1>f?l.push('<a class="live disabled">'+j+"</a>"):f==o+1?p>j?l.push('<a class="live disabled">'+j+"</a>"):(tims&&tims[e+"-"+q+"-"+r]&&"Return"==this.type?pstr='<a class="live" data-day="'+e+"-"+q+"-"+r+'"><span class="live_circle">'+j+'</span><span class="live_txt">'+tims[e+"-"+q+"-"+r]+"</span></a>":tims&&tims[e+"-"+q+"-"+r]&&"Oneway"==this.type?pstr='<a class="live" data-day="'+e+"-"+q+"-"+r+'"><span class="live_circle">'+j+"</span></a>":pstr='<a class="live" data-day="'+e+"-"+q+"-"+r+'">'+j+"</a>",j==p?l.push('<a class="live" data-day="'+e+"-"+q+"-"+r+'">今天</a>'):l.push(pstr)):f==o+2?(tims&&tims[e+"-"+q+"-"+r]&&"Return"==this.type?pstr='<a class="live" data-day="'+e+"-"+q+"-"+r+'"><span class="live_circle">'+j+'</span><span class="live_txt">'+tims[e+"-"+q+"-"+r]+"</span></a>":tims&&tims[e+"-"+q+"-"+r]&&"Oneway"==this.type?pstr='<a class="live" data-day="'+e+"-"+q+"-"+r+'"><span class="live_circle">'+j+"</span></a>":pstr='<a class="live" data-day="'+e+"-"+q+"-"+r+'">'+j+"</a>",l.push(pstr)):l.push('<a class="live" data-day="'+e+"-"+q+"-"+r+'">'+j+"</a>"):e>n&&l.push('<a class="live" data-day="'+e+"-"+q+"-"+r+'">'+j+"</a>");d.innerHTML=l.join(""),this.container.appendChild(b);var s=!!window.ActiveXObject&&!window.XMLHttpRequest;s&&b.appendChild(this.createIframe()),this.linkOn(),"Oneway"==this.type?document.querySelector("#chooseDate-single-header")?document.querySelector("#chooseDate-single-header").onclick=function(a){var a=a||window.event,b=a.target||a.srcElement,c=null,d=null;("A"==b.tagName&&"ticket-header-back"==b.className||"I"==b.tagName&&"icons ticket-go-back"==b.className)&&(c=document.querySelector("#chooseDate-single-date"),d=document.querySelector("#chooseDate-single-header"),document.body.removeChild(c),document.body.removeChild(d))}:document.querySelector("#dateIcon-header")&&(document.querySelector("#dateIcon-header").onclick=function(a){var a=a||window.event,b=a.target||a.srcElement,c=null,d=null;("A"==b.tagName&&"ticket-header-back"==b.className||"I"==b.tagName&&"icons ticket-go-back"==b.className)&&(c=document.querySelector("#dateIcon-header"),d=document.querySelector("#dateIcon-date"),document.body.removeChild(c),document.body.removeChild(d))}):document.querySelector("#ori-des-Date-header")?document.querySelector("#ori-des-Date-header").onclick=function(a){var a=a||window.event,b=a.target||a.srcElement,c=null,d=null;("A"==b.tagName&&"ticket-header-back"==b.className||"I"==b.tagName&&"icons ticket-go-back"==b.className)&&(c=document.querySelector("#ori-des-Date-header"),d=document.querySelector("#ori-des-Date-date"),document.body.removeChild(c),document.body.removeChild(d))}:document.querySelector("#dateIcon-header")&&(document.querySelector("#dateIcon-header").onclick=function(a){var a=a||window.event,b=a.target||a.srcElement,c=null,d=null;("A"==b.tagName&&"ticket-header-back"==b.className||"I"==b.tagName&&"icons ticket-go-back"==b.className)&&(c=document.querySelector("#dateIcon-header"),d=document.querySelector("#dateIcon-date"),document.body.removeChild(c),document.body.removeChild(d))})},TicketDate.prototype.linkOn=function(){var a,b=_CalF.$(".live",this.dd),c=b.length,d=this;for(a=0;c>a;a++)b[a].index=a,b[a].onclick=function(a){"input"===d.input.tagName?($(this).css("border","1px solid #ff6a2f").css("z-index","9999999"),$(this).siblings().css("border","").css("z-index","")):this.className.indexOf("disabled")>-1||("Oneway"==d.type?d.linkOver(a):0==d.op?(null!=d.timer&&(window.clearTimeout(d.timer),d.timer=null),d.tiper.innerHTML="请选择"+d._word.f[1]+"日期",d.linkReset(this.index),$(this).html('<span class="live_circle">'+this.innerHTML+'</span><span class="live_txt">'+d._word.f[d.op]+"</span>"),d.op++,d.cache=this.getAttribute("data-day"),d.doubleDate.start=this.getAttribute("data-day")):1==d.op&&this.getAttribute("data-day")!=d.cache?(null!=d.timer&&(window.clearTimeout(d.timer),d.timer=null),d.doubleDate.end=this.getAttribute("data-day"),$(this).html('<span class="live_circle">'+this.innerHTML+'</span><span class="live_txt">'+d._word.f[d.op]+"</span>"),d.tiper.style.display="none",d.linkOver(),d.linkColor("Return")):1==d.op&&this.getAttribute("data-day")==d.cache&&(null!=d.timer&&(window.clearTimeout(d.timer),d.timer=null),d.tiper.style.display="none",d.doubleDate.end=this.getAttribute("data-day"),this.querySelector(".live_txt").innerHTML=d._word.f[2],d.linkOver()))};this.linkColor("Return")},TicketDate.prototype.linkOver=function(a){function b(a){if(a){var b,c,d=new Date(a.replace(/-/g,"/")).getDay();switch(d){case 0:b="周日";break;case 1:b="周一";break;case 2:b="周二";break;case 3:b="周三";break;case 4:b="周四";break;case 5:b="周五";break;case 6:b="周六"}return c=a.split("-"),c[1]=c[1]<10?"0"+parseInt(c[1]):parseInt(c[1]),c[2]=c[2]<10?"0"+parseInt(c[2]):parseInt(c[2]),'<span class="dateNumber">'+c[1]+"月"+c[2]+"日</span> <span>"+b+"</span>"}}var c,d=$("#"+this.id+"-date .live_circle"),e=(d.length,this),f=[],g=_CalF.$("input",e.input);if(g.length||(g=_CalF.$("."+this.sClass1,document)),"Oneway"!=this.type){var h=_CalF.$("#"+this.id2,e.input);if("INPUT"==g[0].tagName)for(c=0;2>c;c++)f.push(d[c].parentNode.getAttribute("data-day")),g[c].value=d[c].parentNode.getAttribute("data-day");else 1==d.length?(f.push(d[0].parentNode.getAttribute("data-day")),f.push(d[0].parentNode.getAttribute("data-day")),g[0].innerHTML=b(d[0].parentNode.getAttribute("data-day")),e.doubleChosenDateOne=d[0].parentNode.getAttribute("data-day"),g[1]&&(e.doubleChosenDateTwo=d[0].parentNode.getAttribute("data-day"),g[1].innerHTML=b(d[0].parentNode.getAttribute("data-day")))):(f.push(d[0].parentNode.getAttribute("data-day")),f.push(d[1].parentNode.getAttribute("data-day")),g[0].innerHTML=b(d[0].parentNode.getAttribute("data-day")),e.doubleChosenDateOne=d[0].parentNode.getAttribute("data-day"),g[1]&&(e.doubleChosenDateTwo=d[1].parentNode.getAttribute("data-day"),g[1].innerHTML=b(d[1].parentNode.getAttribute("data-day"))));h&&(h.innerHTML=Math.round((new Date(f[1])-new Date(f[0]))/864e5))}else{var a=a||window.event,i=a.target||a.srcElement;"A"==i.tagName?(e.singleDate=i.getAttribute("data-day"),e.linkColor("Oneway",e.singleDate),g[0].innerHTML=b(e.singleDate)):"SPAN"==i.tagName&&(e.singleDate=i.parentNode.getAttribute("data-day"),e.linkColor("Oneway",e.singleDate),g[0].innerHTML=b(e.singleDate)),g[0].setAttribute("data-date",e.singleDate)}e.timer=window.setTimeout(function(){e.op>=1?e.op=0:null,e.removeDate(),e.header.parentNode&&e.header.parentNode.removeChild(e.header),"function"==typeof e.fn&&(e.fn(),window.clearTimeout(e.timer),e.timer=null)},1e3)},TicketDate.prototype.linkReset=function(a){var b=this,c=$(".live_circle"),d=_CalF.$(".live",this.dd);if(0==b.op){for(var e=0;e<c.length;e++){var f=c[e].parentNode.getAttribute("data-day"),g=f.split("-");c[e].parentNode.innerHTML=g[g.length-1]}for(e=0;a>e;e++)_CalF.addClass("disabled",d[e]);for(e=a+30;e<d.length;e++)_CalF.addClass("disabled",d[e]);return!1}},TicketDate.prototype.drawLastDate=function(a){var b,c,d,e,f,g,h,i,j,k,l=[],m=new Date,n=(m.getFullYear(),m.getMonth(),m.getDate()),o="",p="";for(this.dateWarp=b=document.createElement("div"),b.className="calendar",b.innerHTML=this._template.join(""),this.year=e=a.getFullYear(),this.month=f=a.getMonth()+1,this.date=g=a.getDate(),this.titleDate=c=_CalF.$(".title-date",b)[0],tims=this.time,k=document.createTextNode(e+"年"+f+"月"),c.appendChild(k),d=_CalF.$("dd",b)[0],h=new Date(e,f,0).getDate(),i=new Date(e,f-1,1).getDay(),j=0;i>j;j++)l.push("<a>&nbsp;</a>");for(o=Number(f)<10?"0"+Number(f):Number(f),j=1;h>=j;j++)n>=j?(p=Number(j)<10?"0"+Number(j):Number(j),l.push('<a class="live" data-day="'+e+"-"+o+"-"+p+'">'+j+"</a>")):l.push('<a class="disabled">'+j+"</a>");d.innerHTML=l.join(""),this.container.appendChild(b);var q=!!window.ActiveXObject&&!window.XMLHttpRequest;q&&b.appendChild(this.createIframe()),this.linkOn()};var conditionalFiltering={addHandler:function(a,b,c){document.addEventListener?this.addHandler=function(a,b,c){a.addEventListener(b,c,!1)}:document.attachEvent?this.addHandler=function(a,b,c){a.attachEvent("on"+b,function(){c.call(a)})}:this.addHandler=function(a,b,c){a["on"+b]=c},this.addHandler(a,b,c)},createTags:function(a,b,c){var a=this.tripType,b=this.sinOrDou,d=(this.fn,document.createElement("div"));d.className="r-shadow",d.id="r-shadow";var e=document.createElement("div");e.className="filter-wrap";var f=document.createElement("div");f.className="hl-bottom";var g=document.createElement("div");g.className="reset-action",g.id="filter-modal";var h=document.createElement("ul");h.id="time-modal";var i=document.createElement("ul");return i.id="price-modal","domestic"==a?"Oneway"==b?(f.innerHTML='<div class="fo-div" id="fo_sc"><b class="hl-icon3 filter"></b><i class=""></i><span class="filter-select">筛选</span></div><div class="fo-div" id="fo_ra" data-time-type="domestic"><b class="hl-icon3 direct-fly"></b><i class="red-tip"></i><span  class="filter-select">起飞早到晚</span></div><div class="fo-div" id="fo_lo" data-price-type="domestic" data-info="openShadow"><b class="hl-icon3 filter-price"></b><i class=""></i><span class="filter-select">价格</span></div>',g.innerHTML='    <div class="reset-action-wrap"><div class="reset-action-item hot">取消</div><div class="reset-action-item">清空筛选</div><div class="reset-action-item">确定</div></div><div class="reaction-detail" id="reaction-detail"><ul class="filter-bottom" id="filter-bottom"><li class="filter-title clear-background" data-info="df">直飞</li><li class="filter-title" data-info="sh">共享</li><li class="filter-title" data-info="du">起飞时段</li><li class="filter-title" data-info="se">舱位</li></ul><div class="detail-list" style="color: rgb(102, 102, 102);"><ul class="add only-direct-fly" id="only-direct-fly"><li class="tag-item active" data-i="false">不限<b></b></li><li class="tag-item" data-i="true">仅看直飞<b class=""></b></li></ul><ul class="add filter-share" id="filter-share" style="display: none"><li class="tag-item active" data-i="false">不限<b></b></li><li class="tag-item" data-i="true">隐藏共享<b class=""></b></li></ul><ul class="add set-time-duration" id="set-time-duration" style="display: none"><li class="tag-item active" data-i="0024">不限<b></b></li><li class="tag-item" data-i="0006">00:00-06:00<b class=""></b></li><li class="tag-item" data-i="0612">06:00-12:00<b class=""></b></li><li class="tag-item" data-i="1218">12:00-18:00<b class=""></b></li><li class="tag-item" data-i="1824">18:00-24:00<b class=""></b></li></ul><ul class="add seat-condition" id="seat-condition" style="display: none"><li class="tag-item active" data-i="Economy">经济舱<b class=""></b></li><li class="tag-item" data-i="EconomyPremium">超级经济舱<b class=""></b></li><li class="tag-item" data-i="Business">商务舱<b class=""></b></li><li class="tag-item" data-i="First">头等舱<b class=""></b></li></ul></div></div>',h.innerHTML="",i.innerHTML=""):(f.innerHTML='<div class="fo-div" id="fo_sc"><b class="hl-icon3 filter"></b><i class=""></i><span class="filter-select">筛选</span></div><div class="fo-div" id="fo_ra"><b class="hl-icon3 direct-fly"></b><i class="red-tip"></i><span class="filter-select">优选</span></div><div class="fo-div" id="fo_lo" data-price-type="domestic"><b class="hl-icon3 filter-price"></b><i class=""></i><span class="filter-select">价格</span></div>',g.innerHTML='    <div class="reset-action-wrap"><div class="reset-action-item hot">取消</div><div class="reset-action-item">清空筛选</div><div class="reset-action-item">确定</div></div><div class="reaction-detail" id="reaction-detail"><ul class="filter-bottom" id="filter-bottom"><li class="filter-title clear-background" data-info="df">直飞</li><li class="filter-title" data-info="sh">共享</li><li class="filter-title" data-info="se">舱位</li></ul><div class="detail-list" style="color: rgb(102, 102, 102);"><ul class="add only-direct-fly" id="only-direct-fly"><li class="tag-item active" data-i="false">不限<b></b></li><li class="tag-item" data-i="true">仅看直飞<b class=""></b></li></ul><ul class="add filter-share" id="filter-share" style="display: none"><li class="tag-item active" data-i="false">不限<b></b></li><li class="tag-item" data-i="true">隐藏共享<b class=""></b></li></ul><ul class="add seat-condition" id="seat-condition" style="display: none"><li class="tag-item active" data-i="Economy">经济舱<b class=""></b></li><li class="tag-item" data-i="EconomyPremium">超级经济舱<b class=""></b></li><li class="tag-item" data-i="Business">商务舱<b class=""></b></li><li class="tag-item" data-i="First">头等舱<b class=""></b></li></ul></div></div>',h.innerHTML='    <li class="time-modal-item active" data-i="0"><b></b>不限</li>    <li class="time-modal-item" data-i="1"><b></b>直飞优先</li>    <li class="time-modal-item" data-i="2"><b></b>低价优先</li>    <li class="time-modal-item" data-i="3"><b></b>耗时短优先</li>',i.innerHTML=""):"Oneway"==b?(f.innerHTML='<div class="fo-div" id="fo_sc"><b class="hl-icon3 filter"></b><i class=""></i><span class="filter-select">筛选</span></div><div class="fo-div" id="fo_ra"><b class="hl-icon3 direct-fly"></b><i class="red-tip"></i><span class="filter-select">起飞早到晚</span></div><div class="fo-div" id="fo_lo" data-info="openShadow"><b class="hl-icon3 filter-price"></b><i class="red-tip"></i><span class="filter-select">价格</span></div>',g.innerHTML='    <div class="reset-action-wrap"><div class="reset-action-item hot">取消</div><div class="reset-action-item">清空筛选</div><div class="reset-action-item">确定</div></div><div class="reaction-detail" id="reaction-detail"><ul class="filter-bottom" id="filter-bottom"><li class="filter-title clear-background" data-info="df">直飞</li><li class="filter-title" data-info="sh">共享</li><li class="filter-title" data-info="du">起飞时段</li><li class="filter-title" data-info="se">舱位</li></ul><div class="detail-list" style="color: rgb(102, 102, 102);"><ul class="add only-direct-fly" id="only-direct-fly"><li class="tag-item active" data-i="false">不限<b></b></li><li class="tag-item" data-i="true">仅看直飞<b class=""></b></li></ul><ul class="add filter-share" id="filter-share" style="display: none"><li class="tag-item active" data-i="false">不限<b></b></li><li class="tag-item" data-i="true">隐藏共享<b class=""></b></li></ul><ul class="add set-time-duration" id="set-time-duration" style="display: none"><li class="tag-item active" data-i="0024">不限<b></b></li><li class="tag-item" data-i="0006">00:00-06:00<b class=""></b></li><li class="tag-item" data-i="0612">06:00-12:00<b class=""></b></li><li class="tag-item" data-i="1218">12:00-18:00<b class=""></b></li><li class="tag-item" data-i="1824">18:00-24:00<b class=""></b></li></ul><ul class="add seat-condition" id="seat-condition" style="display: none"><li class="tag-item active" data-i="Economy">经济舱<b class=""></b></li><li class="tag-item" data-i="EconomyPremium">超级经济舱<b class=""></b></li><li class="tag-item" data-i="Business">商务舱<b class=""></b></li><li class="tag-item" data-i="First">头等舱<b class=""></b></li></ul></div></div>',h.innerHTML='    <li class="time-modal-item active" data-i="1"><b></b>直飞优先</li>    <li class="time-modal-item" data-i="2"><b></b>低价优先</li>    <li class="time-modal-item" data-i="3"><b></b>耗时短优先</li>    <li class="time-modal-item" data-i="isDesc_false"><b></b>起飞早到晚</li>    <li class="time-modal-item" data-i="isDesc_true"><b></b>起飞晚到早</li>',i.innerHTML=""):(f.innerHTML='<div class="fo-div" id="fo_sc"><b class="hl-icon3 filter"></b><i class=""></i><span class="filter-select">筛选</span></div><div class="fo-div" id="fo_ra"><b class="hl-icon3 direct-fly"></b><i class="red-tip"></i><span class="filter-select">优选</span></div><div class="fo-div" id="fo_lo" data-info="openShadow"><b class="hl-icon3 filter-price"></b><i class="red-tip"></i><span class="filter-select">含税价</span></div>',g.innerHTML='    <div class="reset-action-wrap"><div class="reset-action-item hot">取消</div><div class="reset-action-item">清空筛选</div><div class="reset-action-item">确定</div></div><div class="reaction-detail" id="reaction-detail"><ul class="filter-bottom" id="filter-bottom"><li class="filter-title clear-background" data-info="df">直飞</li><li class="filter-title" data-info="sh">共享</li><li class="filter-title" data-info="se">舱位</li></ul><div class="detail-list" style="color: rgb(102, 102, 102);"><ul class="add only-direct-fly" id="only-direct-fly"><li class="tag-item active" data-i="false">不限<b></b></li><li class="tag-item" data-i="true">仅看直飞<b class=""></b></li></ul><ul class="add filter-share" id="filter-share" style="display: none"><li class="tag-item active" data-i="false">不限<b></b></li><li class="tag-item" data-i="true">隐藏共享<b class=""></b></li></ul><ul class="add seat-condition" id="seat-condition" style="display: none"><li class="tag-item active" data-i="Economy">经济舱<b class=""></b></li><li class="tag-item" data-i="EconomyPremium">超级经济舱<b class=""></b></li><li class="tag-item" data-i="Business">商务舱<b class=""></b></li><li class="tag-item" data-i="First">头等舱<b class=""></b></li></ul></div></div>',h.innerHTML='    <li class="time-modal-item active" data-i="0"><b></b>不限</li>    <li class="time-modal-item" data-i="1"><b></b>直飞优先</li>    <li class="time-modal-item" data-i="2"><b></b>低价优先</li>    <li class="time-modal-item" data-i="3"><b></b>耗时短优先</li>',i.innerHTML=""),e.appendChild(f),e.appendChild(g),e.appendChild(h),e.appendChild(i),document.body.appendChild(d),document.body.appendChild(e),this},addEvent:function(){var a=document.querySelector(".hl-bottom"),b=this,c=document.querySelector("#r-shadow");return a.onclick=function(d){var e,d=d||window.event,f=f||d.srcElement,g=function(){var a=document.querySelector("#filter-modal");a.style.transition="all 300ms ease-in",a.style.webkitTransition="all 300ms linear",a.style.bottom=0},h=function(d){if("Oneway"==b.sinOrDou&&"domestic"==b.tripType){var e=a.querySelector("#fo_lo"),f=e.querySelector("i"),g=e.querySelector("SPAN");g.innerHTML="价格",f.className="",b.tempStates.PriorityRule="0","起飞早到晚"==d.querySelector(".filter-select").innerHTML?(d.querySelector(".filter-select").innerHTML="起飞晚到早",b.tempStates.IsDesc=!0):(d.querySelector(".filter-select").innerHTML="起飞早到晚",b.tempStates.IsDesc=!1),b.tempStates.pageSize=Number(b.tempStates.pageSize)>10?Number(b.tempStates.pageSize):10*Number(b.tempStates.pageNo),b.tempStates.pageNo=1,b.context.isClearAll=!0,b.fn(b.tempStates),b.checkRedTip()}else if("Oneway"==b.sinOrDou&&"international"==b.tripType){c.style.display="block";var h=document.querySelector("#time-modal"),i=document.querySelector("#fo_ra");h.style.transition="all 300ms ease-in",h.style.webkitTransition="all 300ms linear",h.style.bottom=0,h.onclick=function(){var a=a||window.event,d=d||a.srcElement,e=i.querySelector("SPAN");i.querySelector("i");if("LI"==d.tagName){for(var f=d.parentNode.querySelectorAll("li"),g=0;g<f.length;g++)f[g].className="tag-item";"不限"==d.innerText?e.innerHTML="优选":e.innerHTML=d.innerText,d.className="tag-item active"}b.stateEvent("get"),b.tempStates.pageSize=Number(b.tempStates.pageSize)>10?Number(b.tempStates.pageSize):10*Number(b.tempStates.pageNo),b.tempStates.pageNo=1,b.context.isClearAll=!0,b.fn(b.tempStates),b.checkRedTip(),this.style.transition="all 300ms ease-in",this.style.webkitTransition="all 300ms linear",this.style.bottom="-126%",c.style.display="none"}}else if("Return"==b.sinOrDou&&"domestic"==b.tripType){c.style.display="block";var h=document.querySelector("#time-modal"),i=document.querySelector("#fo_ra"),j=a.querySelector("#fo_lo"),f=j.querySelector("i"),g=j.querySelector("SPAN");g.innerHTML="价格",f.className="",d.querySelector("i").className="red-tip",b.tempStates.PriorityRule="0",h.style.transition="all 300ms ease-in",h.style.webkitTransition="all 300ms linear",h.style.bottom=0,h.onclick=function(){var a=a||window.event,d=d||a.srcElement,e=i.querySelector("SPAN");i.querySelector("i");if("LI"==d.tagName){for(var f=d.parentNode.querySelectorAll("li"),g=0;g<f.length;g++)f[g].className="tag-item";"不限"==d.innerText?e.innerHTML="优选":e.innerHTML=d.innerText,d.className="tag-item active"}b.stateEvent("get"),b.tempStates.pageSize=Number(b.tempStates.pageSize)>10?Number(b.tempStates.pageSize):10*Number(b.tempStates.pageNo),b.tempStates.pageNo=1,b.context.isClearAll=!0,b.fn(b.tempStates),b.checkRedTip(),this.style.transition="all 300ms ease-in",this.style.webkitTransition="all 300ms linear",this.style.bottom="-126%",c.style.display="none"}}else if("Return"==b.sinOrDou&&"international"==b.tripType){c.style.display="block";var k=document.querySelector("#time-modal"),l=document.querySelector("#fo_ra");k.style.transition="all 300ms ease-in",k.style.webkitTransition="all 300ms linear",k.style.bottom=0,k.onclick=function(){var a=a||window.event,d=d||a.srcElement,e=l.querySelector("SPAN");l.querySelector("i");if("LI"==d.tagName){for(var f=d.parentNode.querySelectorAll("li"),g=0;g<f.length;g++)f[g].className="tag-item";"不限"==d.innerText?e.innerHTML="优选":e.innerHTML=d.innerText,d.className="tag-item active"}b.stateEvent("get"),b.tempStates.pageSize=Number(b.tempStates.pageSize)>10?Number(b.tempStates.pageSize):10*Number(b.tempStates.pageNo),b.tempStates.pageNo=1,b.context.isClearAll=!0,b.fn(b.tempStates),b.checkRedTip(),this.style.transition="all 300ms ease-in",this.style.webkitTransition="all 300ms linear",this.style.bottom="-126%",c.style.display="none"}}},i=function(c){if("Oneway"==b.sinOrDou&&"domestic"==b.tripType){var d=a.querySelector("#fo_ra"),e=d.querySelector("i"),f=d.querySelector("SPAN");f.innerHTML="时间",e.className="",b.tempStates.IsDesc=!1,c.querySelector(".filter-select").innerHTML="从低到高",b.tempStates.PriorityRule="2",b.tempStates.pageSize=Number(b.tempStates.pageSize)>10?Number(b.tempStates.pageSize):10*Number(b.tempStates.pageNo),b.tempStates.pageNo=1,b.context.isClearAll=!0,b.fn(b.tempStates),b.checkRedTip()}else if("Return"==b.sinOrDou&&"domestic"==b.tripType){var g=a.querySelector("#fo_ra"),h=g.querySelector("i"),i=g.querySelector("SPAN");i.innerHTML="优选",h.className="",b.tempStates.PriorityRule="0",c.querySelector(".filter-select").innerHTML="从低到高",b.tempStates.PriorityRule="2",b.tempStates.pageSize=Number(b.tempStates.pageSize)>10?Number(b.tempStates.pageSize):10*Number(b.tempStates.pageNo),b.tempStates.pageNo=1,b.context.isClearAll=!0,b.stateEvent("set"),b.fn(b.tempStates),b.checkRedTip()}else if("Oneway"==b.sinOrDou&&"international"==b.tripType){var j=a.querySelector("#fo_lo"),k=(j.querySelector("i"),j.querySelector("SPAN"));"含税价"==k.innerHTML?(k.innerHTML="不含税价",b.tempStates.hasTax="false"):(k.innerHTML="含税价",b.tempStates.hasTax="true"),b.stateEvent("set"),b.tempStates.pageSize=Number(b.tempStates.pageSize)>10?Number(b.tempStates.pageSize):10*Number(b.tempStates.pageNo),b.tempStates.pageNo=1,b.context.isClearAll=!0,b.fn_(b.tempStates),b.checkRedTip()}else if("Return"==b.sinOrDou&&"international"==b.tripType){var l=a.querySelector("#fo_lo"),m=(l.querySelector("i"),l.querySelector("SPAN"));"含税价"==m.innerHTML?(m.innerHTML="不含税价",b.tempStates.hasTax="false"):(m.innerHTML="含税价",b.tempStates.hasTax="true"),b.stateEvent("set"),b.tempStates.pageSize=Number(b.tempStates.pageSize)>10?Number(b.tempStates.pageSize):10*Number(b.tempStates.pageNo),b.tempStates.pageNo=1,b.context.isClearAll=!0,b.fn_(b.tempStates),b.checkRedTip()}};switch("B"==f.tagName||"SPAN"==f.tagName?e=f.parentNode:"fo-div"==f.className&&(e=f),e.id){case"fo_sc":c.style.display="block",g();break;case"fo_ra":h(e);break;case"fo_lo":i(e)}var j=document.querySelector(".reset-action-wrap"),k=document.querySelector("#filter-modal");j.onclick=function(a){var a=a||window.event,d=d||a.srcElement;if(d.className.indexOf("reset-action-item")>-1){for(var e=d.parentNode.querySelectorAll(".reset-action-item"),f=0;f<e.length;f++)e[f].className="reset-action-item";d.className="reset-action-item hot";var g=function(){b.stateEvent("set"),k.style.transition="all 300ms ease-in",k.style.webkitTransition="all 300ms linear",k.style.bottom="-126%"},h=function(){for(var a=document.querySelectorAll(".only-direct-fly li"),b=document.querySelectorAll(".filter-share li"),c=document.querySelectorAll(".set-time-duration li"),d=document.querySelectorAll(".seat-condition li"),e=0;e<a.length;e++)a[e].className=0==e?"tag-item active":"tag-item";for(var f=0;f<b.length;f++)b[f].className=0==f?"tag-item active":"tag-item";for(var g=0;g<c.length;g++)c[g].className=0==g?"tag-item active":"tag-item";for(var h=0;h<d.length;h++)d[h].className=0==h?"tag-item active":"tag-item"},i=function(){b.stateEvent("get"),b.tempStates.pageSize=Number(b.tempStates.pageSize)>10?Number(b.tempStates.pageSize):10*Number(b.tempStates.pageNo),b.tempStates.pageNo=1,b.context.isClearAll=!0,b.fn(b.tempStates),b.checkRedTip(),k.style.transition="all 300ms ease-in",k.style.webkitTransition="all 300ms linear",k.style.bottom="-126%"};switch(d.innerHTML){case"取消":g(),c.style.display="none";break;case"清空筛选":h();break;case"确定":i(),c.style.display="none"}}};var l=document.querySelector("#reaction-detail");l.onclick=function(a){var a=a||window.event,b=b||a.srcElement;if(b.className.indexOf("filter-title")>-1){for(var c,d=b.parentNode.querySelectorAll("li"),e=0;e<d.length;e++)d[e].className=d[e]==b?"filter-title clear-background":"filter-title";var f=b.getAttribute("data-info"),g=this.querySelectorAll(".add");switch(f){case"df":c=document.querySelector("#only-direct-fly");break;case"sh":c=document.querySelector("#filter-share");break;case"du":c=document.querySelector("#set-time-duration");break;case"se":c=document.querySelector("#seat-condition")}for(var h=0;h<g.length;h++)g[h].style.display="none";c.style.display="block"}else if(b.className.indexOf("tag-item")>-1)for(var i=b.parentNode.querySelectorAll("li"),j=0;j<i.length;j++)i[j].className=i[j]==b?"tag-item active":"tag-item"},c.onclick=function(a){var a=a||window.event,b=b||a.srcElement,c=document.querySelector("#filter-modal"),d=document.querySelector("#time-modal"),e=document.querySelector("#price-modal");b.className.indexOf("r-shadow")>-1&&(c.style.transition="all 300ms ease-in",c.style.webkitTransition="all 300ms linear",c.style.bottom="-126%",e.style.transition="all 300ms ease-in",e.style.webkitTransition="all 300ms linear",e.style.bottom="-126%",this.style.display="none",d.style.transition="all 300ms ease-in",d.style.webkitTransition="all 300ms linear",d.style.bottom="-126%")}},this},stateEvent:function(a){if("domestic"==this.tripType)if("Return"==this.sinOrDou){for(var b=document.querySelectorAll(".only-direct-fly li"),c=document.querySelectorAll(".filter-share li"),d=document.querySelectorAll("#seat-condition li"),e=document.querySelectorAll("#time-modal li"),f=document.querySelector("#fo_lo"),g=0;g<b.length;g++)if("set"==a)b[g].className=b[g].getAttribute("data-i")==this.tempStates.IsDirectFlight?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==b[g].className){this.tempStates.IsDirectFlight=b[g].getAttribute("data-i");break}for(var h=0;h<c.length;h++)if("set"==a)c[h].className=c[h].getAttribute("data-i")==this.tempStates.IsHideSharedFlight?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==c[h].className){this.tempStates.IsHideSharedFlight=c[h].getAttribute("data-i");break}for(var i=0;i<d.length;i++)if("set"==a)d[i].className=d[i].getAttribute("data-i")==this.tempStates.CabinClass?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==d[i].className){this.tempStates.CabinClass=d[i].getAttribute("data-i");break}for(var j=0;j<e.length;j++)if("set"==a)e[j].className=e[j].getAttribute("data-i")==this.tempStates.PriorityRule?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==e[j].className){this.tempStates.PriorityRule=e[j].getAttribute("data-i");break}"2"==this.tempStates.PriorityRule?f.querySelector(".filter-select").innerHTML="从低到高":f.querySelector(".filter-select").innerHTML="价格"}else{for(var k=document.querySelectorAll(".only-direct-fly li"),l=document.querySelectorAll(".filter-share li"),m=document.querySelectorAll(".set-time-duration li"),n=document.querySelectorAll("#seat-condition li"),o=document.querySelectorAll("#time-modal li"),p=(document.querySelector("#fo_lo"),0);p<k.length;p++)if("set"==a)k[p].className=k[p].getAttribute("data-i")==this.tempStates.IsDirectFlight?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==k[p].className){this.tempStates.IsDirectFlight=k[p].getAttribute("data-i");break}for(var q=0;q<l.length;q++)if("set"==a)l[q].className=l[q].getAttribute("data-i")==this.tempStates.IsHideSharedFlight?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==l[q].className){this.tempStates.IsHideSharedFlight=l[q].getAttribute("data-i");break}for(var r=0;r<m.length;r++)if("set"==a)m[r].className=m[r].getAttribute("data-i")==""+this.tempStates.DepartStartHour+this.tempStates.DepartEndHour?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==m[r].className){
this.tempStates.DepartStartHour=m[r].getAttribute("data-i").substring(0,2),this.tempStates.DepartEndHour=m[r].getAttribute("data-i").substring(2);break}for(var s=0;s<n.length;s++)if("set"==a)n[s].className=n[s].getAttribute("data-i")==this.tempStates.CabinClass?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==n[s].className){this.tempStates.CabinClass=n[s].getAttribute("data-i");break}for(var t=0;t<o.length;t++)if("set"==a)o[t].className=o[t].getAttribute("data-i")==this.tempStates.IsDesc?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==o[t].className){this.tempStates.IsDesc=o[t].getAttribute("data-i");break}}else if("Return"==this.sinOrDou){for(var u=document.querySelectorAll(".only-direct-fly li"),v=document.querySelectorAll(".filter-share li"),w=document.querySelectorAll("#seat-condition li"),x=document.querySelectorAll("#time-modal li"),y=document.querySelector("#fo_lo"),z=0;z<u.length;z++)if("set"==a)u[z].className=u[z].getAttribute("data-i")==this.tempStates.IsDirectFlight?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==u[z].className){this.tempStates.IsDirectFlight=u[z].getAttribute("data-i");break}for(var A=0;A<v.length;A++)if("set"==a)v[A].className=v[A].getAttribute("data-i")==this.tempStates.IsHideSharedFlight?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==v[A].className){this.tempStates.IsHideSharedFlight=v[A].getAttribute("data-i");break}for(var B=0;B<w.length;B++)if("set"==a)w[B].className=w[B].getAttribute("data-i")==this.tempStates.CabinClass?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==w[B].className){this.tempStates.CabinClass=w[B].getAttribute("data-i");break}for(var C=0;C<x.length;C++)if("set"==a)x[C].className=x[C].getAttribute("data-i")==this.tempStates.PriorityRule?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==x[C].className){this.tempStates.PriorityRule=x[C].getAttribute("data-i");break}"true"==this.tempStates.hasTax?y.querySelector(".filter-select").innerHTML="含税价":y.querySelector(".filter-select").innerHTML="不含税价"}else{for(var D=document.querySelectorAll(".only-direct-fly li"),E=document.querySelectorAll(".filter-share li"),F=document.querySelectorAll(".set-time-duration li"),G=document.querySelectorAll("#seat-condition li"),H=document.querySelectorAll("#time-modal li"),I=document.querySelector("#fo_lo"),J=0;J<D.length;J++)if("set"==a)D[J].className=D[J].getAttribute("data-i")==this.tempStates.IsDirectFlight?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==D[J].className){this.tempStates.IsDirectFlight=D[J].getAttribute("data-i");break}for(var K=0;K<E.length;K++)if("set"==a)E[K].className=E[K].getAttribute("data-i")==this.tempStates.IsHideSharedFlight?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==E[K].className){this.tempStates.IsHideSharedFlight=E[K].getAttribute("data-i");break}for(var L=0;L<F.length;L++)if("set"==a)F[L].className=F[L].getAttribute("data-i")==this.tempStates.DepartStartHour+this.tempStates.DepartEndHour?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==F[L].className){this.tempStates.DepartStartHour=F[L].getAttribute("data-i").substring(0,2),this.tempStates.DepartEndHour=F[L].getAttribute("data-i").substring(2);break}for(var M=0;M<G.length;M++)if("set"==a)G[M].className=G[M].getAttribute("data-i")==this.tempStates.CabinClass?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==G[M].className){this.tempStates.CabinClass=G[M].getAttribute("data-i");break}for(var N=0;N<H.length;N++)if("set"==a)H[N].getAttribute("data-i").indexOf("isDesc")>-1?H[N].className=H[N].getAttribute("data-i").substring(7)==this.tempStates.IsDesc?"tag-item active":"tag-item":H[N].className=H[N].getAttribute("data-i")==this.tempStates.PriorityRule?"tag-item active":"tag-item";else if("get"==a&&"tag-item active"==H[N].className){H[N].getAttribute("data-i").indexOf("isDesc")>-1?(this.tempStates.IsDesc=H[N].getAttribute("data-i").substring(7),this.tempStates.PriorityRule="0"):(this.tempStates.PriorityRule=H[N].getAttribute("data-i"),delete this.tempStates.IsDesc);break}"true"==this.tempStates.hasTax?I.querySelector(".filter-select").innerHTML="含税价":I.querySelector(".filter-select").innerHTML="不含税价"}},checkRedTip:function(){var a=document.querySelector("#fo_sc"),b=document.querySelector("#fo_ra"),c=document.querySelector("#fo_lo");"international"==this.tripType?"Oneway"==this.sinOrDou?(this.tempStates.IsDirectFlight!=this.originInfo.IsDirectFlight||this.tempStates.IsHideSharedFlight!=this.originInfo.IsHideSharedFlight||this.tempStates.DepartStartHour!=this.originInfo.DepartStartHour||this.tempStates.DepartEndHour!=this.originInfo.DepartEndHour||this.tempStates.CabinClass!=this.originInfo.CabinClass?a.querySelector("i").className="red-tip":a.querySelector("i").className="",b.querySelector("i").className="red-tip",c.querySelector("i").className="red-tip"):(this.tempStates.IsDirectFlight!=this.originInfo.IsDirectFlight||this.tempStates.IsHideSharedFlight!=this.originInfo.IsHideSharedFlight||this.tempStates.CabinClass!=this.originInfo.CabinClass?a.querySelector("i").className="red-tip":a.querySelector("i").className="",b.querySelector("i").className="red-tip",c.querySelector("i").className="red-tip"):"Oneway"==this.sinOrDou?(this.tempStates.IsDirectFlight!=this.originInfo.IsDirectFlight||this.tempStates.IsHideSharedFlight!=this.originInfo.IsHideSharedFlight||this.tempStates.DepartStartHour!=this.originInfo.DepartStartHour||this.tempStates.DepartEndHour!=this.originInfo.DepartEndHour||this.tempStates.CabinClass!=this.originInfo.CabinClass?a.querySelector("i").className="red-tip":a.querySelector("i").className="","时间"==b.querySelector("SPAN").innerHTML?b.querySelector("i").className="":b.querySelector("i").className="red-tip","价格"==c.querySelector("SPAN").innerHTML?c.querySelector("i").className="":c.querySelector("i").className="red-tip"):(this.tempStates.IsDirectFlight!=this.originInfo.IsDirectFlight||this.tempStates.IsHideSharedFlight!=this.originInfo.IsHideSharedFlight||this.tempStates.CabinClass!=this.originInfo.CabinClass?a.querySelector("i").className="red-tip":a.querySelector("i").className="","优选"==b.querySelector("SPAN").innerHTML&&"从低到高"==c.querySelector("SPAN").innerHTML?b.querySelector("i").className="":b.querySelector("i").className="red-tip","价格"==c.querySelector("SPAN").innerHTML?c.querySelector("i").className="":c.querySelector("i").className="red-tip")},init:function(a,b,c,d,e,f){this.tripType=a,this.sinOrDou=b,this.tempStates=c,this.context=f,this.originInfo={};for(var g in c)this.originInfo[g]=c[g];this.fn=d,this.fn_=e,this.createTags().addEvent().stateEvent("set")}};