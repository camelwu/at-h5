/*! asiatravel FE team at-h5-nodejs-----2016-05-19T16:09:38 */
!function(){var a=this,b=!1,c=function(){var a="",c=function(){var b=JSON.parse(localStorage.getItem("searchInfo")).FromCity,c=JSON.parse(localStorage.getItem("searchInfo")).ToCity,e={Parameters:{departCityCode:b,destCityCode:c},ForeEndType:2,Code:"60100002"};vlm.loadJson(a,JSON.stringify(e),d)},d=function(a){if(vlm.init(),a.success){filterData=a;var c=JSON.parse(localStorage.getItem("searchInfo")),d=$("#timeDetile").html(),f=ejs.render(d,c);$("#TimeList").html(f);var h=$("#scenicDetile").html(),i=ejs.render(h,a.data);$("#scenicList").html(i);var j=$("#CityDetile").html(),k=ejs.render(j,a.data);$("#CityList").html(k),g(a);var l=$(".scenic-detile_list").attr("data-packageid"),m={packageid:l};localStorage.setItem("scenicItem",JSON.stringify(m)),$(".scenic-detile_list").on("click",function(){var a=$(this).attr("data-packageid");window.location.href="hft_choose.html?type=2&packageId="+a}),$("#Time").on("click",function(){window.location.href="index.html"}),b||(b=!0,e(a))}else alert(a.message,"提示")},e=function(a){var b={sortTypes:{title:"推荐排序",c:"foot_sort",s:1,type:1,key:"sortTypes",listData:a.data.sortTypes},hotelScreen:{title:"筛选",c:"foot_screen",s:2,type:2,key:"filters",listData:a.data.filters}},c=function(a){var b={},c=JSON.parse(localStorage.getItem("searchInfo")).FromCity,e=JSON.parse(localStorage.getItem("searchInfo")).ToCity;b.departCityCode=c,b.destCityCode=e,b.sortType=a.sortTypes[0],b.filterFields=a.filters,f("",b,"60100002","2",d)};footer&&(footer.data=b,footer.callback=c),footer.filters.init()},f=function(a,b,c,d,e){var f=this,g={Parameters:b,ForeEndType:d,Code:c};a=a||f.requestUrl,vlm.loadJson(a,JSON.stringify(g),e)},g=function(a){for(var b=0,c=0,d=0;d<=a.data.recommendCities.length;d++)b+=d;c=2*b,$(".city_list ul").css({width:c+"rem"})};return{ScenicList:c}}();a.vlm=a.vlm||{},a.vlm.load=function(){c.ScenicList(),window.sessionStorage.removeItem("hftFlightHotelTourInfo")}}(),vlm.load();