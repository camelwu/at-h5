/*! asiatravel FE team at-h5-nodejs-----2016-05-19T15:21:43 */
!function(){function a(a){if(1==a.success&&200==a.code){var h=a.data,j=JSON.parse(window.sessionStorage.getItem("hftFlightHotelTourInfo"));j.hotelInfo=h.hotelInfo,window.sessionStorage.setItem("hftFlightHotelTourInfo",JSON.stringify(j)),b(h),c(h),d(h),e(h),f(h),g(h),i(),vlm.init()}else vlm.init(),jAlert("暂无酒店详细数据,请稍后再试","提示")}function b(a){var b=ejs.render(p,a.hotelInfo);$("#htmlB").html(b),$(".swipebox").click(function(){$(".gallery").hide(0),$(".portfolio-wide").hide(0)}),$(".swipebox").swipebox({useCSS:!0,hideBarsDelay:0})}function c(a){var b=$("#ulList").html(),c=ejs.render(b,a.hotelInfo);$("ul.ul_room").html(c),l&&$(".ul_room li").each(function(a){var b=$(".ul_room li").eq(a).attr("data-hotelid");b==m&&$(".ul_room li").eq(a).addClass("cur")}),$(".hotel_detail_rooms li").on("click",function(){var a=$(this).attr("data-hotelId");$(this).addClass("cur").siblings().removeClass("cur"),l?window.location.href="hft_choose.html"+l.substring(0,24)+"&selectedRoomId="+a:window.location.href="hft_choose.html"+k+"&selectedRoomId="+a})}function d(a){var b=$("#hotelName").html(),c=ejs.render(b,a.hotelInfo);$(".hotel_detail_msg li.name").html(c)}function e(a){var b=$("#hotelAddress").html(),c=ejs.render(b,a.hotelInfo);$(".hotel_detail_msg li.mes2").html(c)}function f(a){n=a.hotelInfo.latitude-0,o=a.hotelInfo.longitude-0,at.map.createMap(n,o),at.map.markHotel(n,o,""),at.map.moveCenterToHotelLocation(n,o),$("#map").on("click",function(){window.location.href="hft_hotel_detail_map.html"})}function g(a){var b=$("#message").html(),c=ejs.render(b,h(a.hotelInfo));$(".hotel_detail_msg .ul2").html(c)}function h(a){switch(a.starRating){case"1 星级":a.starRating="一星级";break;case"2 星级":a.starRating="二星级";break;case"3 星级":a.starRating="三星级";break;case"4 星级":a.starRating="四星级";break;case"5 星级":a.starRating="五星级"}return a}function i(){$(".hotel_detail_rooms .departDate").html(j.departDate.substring(5,10)),$(".hotel_detail_rooms .returnDate").html(j.returnDate.substring(5,10))}var j=JSON.parse(sessionStorage.getItem("hftHotelDetailPara"))||{},k=sessionStorage.getItem("hftHotelChooseUrl"),l=window.location.search;if(l)var m=l.substring(40);var n=0,o=0,p=["<% if(images.length==0){ %>",'<img src="<%= hotelPictureURL%>" alt="image"/>','<% }else{ %><a href="<%= images[0].imageFileName%>" class="swipebox" title="1/<%=(images.length)%>">','<img src="<%= images[0].imageFileName %>" alt="image"/ ></a> <% for(var i=1;i<images.length;i++){ %>','<a style="display:none;" href="<%= images[i].imageFileName%>" class="swipebox" title="<%= (i+1)%>/<%=(images.length)%>">','<img src="<%= images[i].imageFileName%>" alt="image"/></a>',"<% } %>",'<a class="goback" href="javascript:window.history.go(-1);"></a>',"<% if(images.length>0) %>",'<p class = "bar_img_page"><%=(images.length)%>张</p>',"<% } %>"].join(""),q={parameters:j,foreEndType:2,code:"60100008"};vlm.loadJson("",JSON.stringify(q),a)}();