/*! asiatravel FE team at-h5-nodejs-----2016-05-19T16:09:38 */
!function(){function a(a,b,c,d,e){var f=this,g={Parameters:b,ForeEndType:d,Code:c};a=a||f.requestUrl,vlm.loadJson(a,JSON.stringify(g),e)}function b(b){if(!b.success||"200"!=b.code)return vlm.init(),void h();var c=b.data;d(c),e(b),$("#loadMore").on("click",function(){f()}),g(c);var j={hotelSort:{title:"推荐排序",c:"foot_sort",s:1,type:1,key:"sortTypes",listData:c.sortTypes},hotelScreen:{title:"筛选",c:"foot_screen  aa",s:2,type:2,key:"filters",listData:c.filters},hotelPosition:{title:"位置",c:"foot_position",s:2,type:2,key:"locationList",listData:c.locationList}},k=function(b){i.sortFields=b.sortTypes,i.location=b.locationList,i.filterFields=b.filters,a("",i,"60100007","2",e)};footer&&(footer.data=j,footer.callback=k),footer.filters.init(),vlm.init()}function c(a){for(var b=a.data.hotels,c=0;c<b.length;c++)switch(b[c].starRating){case"1 星级":b[c].starRating="一星级";break;case"2 星级":b[c].starRating="二星级";break;case"3 星级":b[c].starRating="三星级";break;case"4 星级":b[c].starRating="四星级";break;case"5 星级":b[c].starRating="五星级"}return a}function d(a){var b=$("#title").html(),c=ejs.render(b,a);$(".header h3 span").html(c)}function e(a){var b=$("#templateList").html(),d=ejs.render(b,c(a));$(".hotel_list").append(d),$(".status").fadeOut("fast"),$(".hotel_list li").on("click",function(){$(this).addClass("cur").siblings().removeClass("cur");var a=$(this).attr("data-hotelId");i.hotelID=a,sessionStorage.setItem("hftHotelDetailPara",JSON.stringify(i)),window.location.href="hft_hotel_detail.html"})}function f(){var a=$("#loadMore");"no"!=a.attr("data-more")&&(a.attr("data-more","yes"),l.parameters.pageNo=k+1,$("#loadMore").html("正在加载..."),vlm.loadJson("",JSON.stringify(l),b))}function g(a){k=a.pageNo,a.hotels.length>0&&a.pageNo<a.pageCount?$("#loadMore").attr("data-more","").html("点击加载更多").show():a.pageNo>=a.pageCount?$("#loadMore").attr("data-more","no").html("没有更多数据了！").show():$("#loadMore").attr("data-more","").html("点击加载更多").hide()}function h(){$("#loadMore").hide();var a=document.createElement("li");a.innerHTML='<div><img src="../images/hotelListNo.jpg" /><p class="hotelConSorry1">非常抱歉，无符合要求的酒店。</p><p class="hotelConSorry2">建议您扩大搜索范围</p></div>',a.className="hotelConNo",$("#hj_jList").empty().append(a).css({width:"100%",height:"100%"})}var i=JSON.parse(sessionStorage.getItem("hftChangeHotelPara"))||{},j=window.location.search;sessionStorage.setItem("hftHotelChooseUrl",j);var k,l={parameters:i,foreEndType:3,code:"60100007"};vlm.loadJson("",JSON.stringify(l),b)}();