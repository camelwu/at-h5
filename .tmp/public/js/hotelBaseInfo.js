/*! asiatravel FE team at-h5-nodejs-----2016-05-19T15:21:43 */
function showDetail(){var a=window.location.href,b=a.slice(a.indexOf("?")+1).split("&"),b={Parameters:{HotelID:1,CultureName:"en - US"},ForeEndType:3,Code:"0010"},c=new vcm;c.loadJson("",JSON.stringify(b),myCallback);var d=document.getElementById("room"),e=document.getElementById("roomAll"),f=document.getElementById("r-mb");d.style.display="block",e.style.display="block",f.style.display="block"}function showImage(){var a=document.querySelector(".imageContainer");a.style.display="block"}function closeRoom(){var a=document.getElementById("room"),b=document.getElementById("roomAll"),c=document.getElementById("r-mb");a.style.display="none",c.style.display="none",b.style.display="none"}function hideZone(){this.style.display="none"}function toggleStatus(){for(var a=document.getElementsByClassName("roomUl"),b=0;b<a.length;b++)a[b].parentNode.getElementsByTagName("a")[0].className="d-icon5",a[b].className="roomUl";this.isOpen?(this.parentNode.getElementsByClassName("roomUl")[0].className="roomUl hide",this.className="d-icon5",this.isOpen=!1):(this.parentNode.getElementsByClassName("roomUl")[0].className="roomUl show",this.isOpen=!0,this.className="d-icon4")}function locationA(){window.location.href="jyy_hotelSummary.html"}function changeImage(a){}function getRoomE(a){for(var b="",c=0;c<a.HotelRoomAmenitiesList.length;c++)0==a.HotelRoomAmenitiesList[c].RmTypeCode&&(b+='<li class="r-li"><b class="r-icon2"></b><p class="r-p3">'+a.HotelRoomAmenitiesList[c].FeatureDesc+"</p></li>");return b}function getRoomInfor(a,b){function c(a){var a=JSON.parse(a),c="";c+=' <div class="room" id="room"><header class="r-top"><p class="r-p1">'+b.RoomName+'</p><b class="r-icon1" onclick="closeRoom()"></b></header><div class="r-div1"><img class="hotelPic2" src="'+getRoomImage(a)+'"></div><article class="r-ar">最多'+b.MaxOccupancy+'成人<br>儿童10岁或以上按照成人算。&nbsp;&nbsp;10岁以下的儿童按照酒店的具体规定一般免费（但不提供早餐和加床）。婴儿（1岁以下）如果使用现有的床铺可免费入住。请注意，如果您需要一个婴儿床可能有额外收费</article><hr size="1px" width="100%" color="#ececec"><p class="r-p2" style="">房间描述</p><article class="r-ar">Newly refurbished Deluxe Rooms are a unique expression of stylish comfort.Featuringplenty of naturallight,contemporary designs with rich wood furnishings,refreshing touches of colourhigh qualitfinishes,these spacious and energy-efficient rooms include a thoughtfullly appointedworkspace,a wideselection of channels for in-room entertainment,as well as comlplimentary Internetaccess.</article><hr size="1px" width="100%" color="#ececec"><p class="r-p2" style="">房间设施</p><ul class="r-ul">'+getRoomE(a.Data[0])+"</ul></div>",document.getElementById("roomAll").innerHTML=c,document.getElementById("roomAll").style.display="block",document.getElementById("roomAll").style.zIndex=1e3,document.getElementById("r-mb").style.display="block"}var d={Parameters:'{"HotelID":'+a+',"CultureName":"zh-CN" }',ForeEndType:3,Code:"0010"},e=new vcm;e.loadJson("",JSON.stringify(d),c)}function test2(){getRoomInfor(this.HotelID,this.indexInfo)}function getRoomImage(a){for(var b=new Array,c=a.Data[0].HotelRoomFeaturesList,d=0;d<c.length;d++)""!=c[d].ImageFileName&&b.push(c[d]);return b.length?b[0].ImageFileName:void 0}!function(){"use strict";function a(a){document.querySelector("#preloader").style.display="none";var a=JSON.parse(a);window.localStorage&&window.localStorage.setItem("hotelMessage",JSON.stringify(a.Data));var l=document.getElementsByClassName("all-elements")[0],m=c(a.Data[0].HotelGenInfo.StarRatingName),n="";n+=' <div class="imageContainer" onclick="hideZone.call(this)"><h5></h5><div class="showZone"><div class="innerContainer" style="left: 0px; width: 0%;"> <div class="noImage" style="width: 100%;height: 100%;text-align: center;">'+b(a.Data[0].HotelGenInfo.HotelImage)+'</div></div></div></div><div class="top" id="vlm-login"><a href="hotel_list.html" class="d-icons"></a><p class="d-p1">'+e(a.Data[0].HotelGenInfo.HotelName)+'</p><a href="#" class="d-icon d1"></a></div><div class="d-div1"><img class="hotelPic" onclick="locationA();"  src="'+j+'" /><div class="d-div2" onclick="showImage.call(this)"><div class="d-p4">'+a.Data[0].HotelGenInfo.HotelImage.length+"张</div></div></div>",n+='<ul class="d-ul1"><li class="d-li1"><div class="d-score"><spanstyle="color:#8ed1cc;font-size:15px;font-weight: 600;">'+a.Data[0].HotelGenInfo.TAAvgRating+"</span><span>分/"+a.Data[0].HotelGenInfo.TAReviewCount+'人点评</span></div> <a href="#" class="d-icon1"></a></li> <li class="d-li1"><div class="d-score">'+a.Data[0].HotelGenInfo.HotelAddress+'</div><a href="#" class="d-icon1"></a> <div class="d-p2">地图</div></li><li class="d-li1"><div class="d-score2">'+m+'</div><b class="d-icon2"></b><a href="#" class="d-icon1"></a></li><li class="d-li1"><div class="d-p3">'+d(h)[1]+"-"+d(h)[2]+'入住</div> <div class="d-p3" style="margin-left: 5px;">'+d(i)[1]+"-"+d(i)[2]+'离店</div><a href="#" class="d-icon1"></a> <div class="d-p2">共'+(new Date(i).getDate()-new Date(h).getDate()+1)+"晚</div></li>";for(var o=0;o<a.Data[0].HotelRoomsList.length;o++)n+='<li class="d-li1"><div class="d-div3 roomEvent" style="max-width: 60%" onclick="test2.call(this)"><div class="d-p5">'+a.Data[0].HotelRoomsList[o].RoomName+'</div><b class="d-icon3"></b><div class="d-p6">32-38㎡ 大/双床</div></div><a href="#" class="d-icon5" onclick="toggleStatus.apply(this)"></a> <div class="price"><span style="font-size:0.8em;color:#fe4716;">￥</span><spanstyle="font-size:2em;font-weight: 600;color:#fe4716;">'+f(a.Data[0].HotelRoomsList[o])+'</span><spanstyle="font-size:0.8em;color:#999999;">起</span></div><ul class="roomUl"><li class="d-li1" style="width:94%;background: #dfdfdd"><div class="d-div3" style="max-width: 60%"><div class="d-p5">标准价</div><div class="d-p7"><span>无早 大床 不可取消</span><span style="color: #fe4716"> 仅剩2间</span></div></div><div class="d-but">预订</div><div class="price2"><spanstyle="font-size:0.8em;color:#fe4716;">￥</span><spanstyle="font-size:2em;font-weight: 600;color:#fe4716;">'+f(a.Data[0].HotelRoomsList[o])+'</span></div></li> <li class="d-li1" style="width:94%;background: #dfdfdd;border-top: 1px solid #FFF"><div class="d-div3" style="max-width: 60%"><p class="d-p5">含早</p><div class="d-p7"><span>无早 大/双床 免费取消</span></div></div><div class="d-but">预订</div><div class="price2"><spanstyle="font-size:0.8em;color:#fe4716;">￥</span><spanstyle="font-size:2em;font-weight: 600;color:#fe4716;">'+f(a.Data[0].HotelRoomsList[o])+"</span></div></li></ul></li>";if(n+='</ul><div class="r-div" id="r-mb"></div><div class="roomAll" id="roomAll"></div>',l.innerHTML=n,document.querySelectorAll(".innerContainer")[0].style.width=0!=a.Data[0].HotelGenInfo.HotelImage.length?100*a.Data[0].HotelGenInfo.HotelImage.length+"%":"100%",document.querySelectorAll(".innerContainer>img").length)for(var p=0,q=document.querySelectorAll(".innerContainer>img");p<q.length;p++)q[p].style.width=k+"px";for(var r=document.getElementsByClassName("roomEvent"),o=0;o<r.length;o++)r[o].index=o,r[o].indexInfo=a.Data[0].HotelRoomsList[o],r[o].HotelID=a.Data[0].HotelGenInfo.HotelCode;g()}function b(a){if(""==a)return'<div class="noImage" style="width: 100%;height: 100%;text-align: center;color:#FFF">暂无图片</div>';for(var b="",c=0;c<a.length;c++)b+='<img src="'+a[c]+'"/>';return b}function c(a){switch(a.charCodeAt(0)){case 48:return"零星级";case 49:return"一星级";case 50:return"二星级";case 51:return"三星级";case 52:return"四星级";case 53:return"五星级";case 54:return"五星级";default:return"无星级"}}function d(a){return/^\d{4}\-(\d{1,2})\-(\d{1,2})/g.exec(a)}function e(a){return-1!=a.indexOf("(")?a.slice(0,a.indexOf(" ("))+"<br/>"+a.slice(a.indexOf(" (")+1):a}function f(a){var b=a.AvgPrice||"";return b}function g(){function a(){i.indexNum=1,i.innerText=i.indexNum+"/"+h,g.addEventListener("touchstart",b,!1),g.addEventListener("touchmove",d,!1),g.addEventListener("touchend",e,!1),g.getElementsByClassName("innerContainer")[0].isTransitionEnd=!0}function b(a){this.innerContainer=this.getElementsByClassName("innerContainer")[0],this.startX=a.changedTouches[0].pageX,this.innerContainer.addEventListener("webkitTransitionEnd",c)}function c(){this.isTransitionEnd=!0}function d(a){var b=a.changedTouches[0].pageX,c=b-this.startX;this.innerContainer.isTransitionEnd&&(this.innerContainer.isTransitionEnd=!1,c>0?i.indexNum-1<=0?(this.innerContainer.style.left="0px",i.indexNum=1,i.innerText=i.indexNum+"/"+h,this.innerContainer.isTransitionEnd=!0):(this.innerContainer.style.left=parseFloat(this.innerContainer.style.left)+f+"px",i.indexNum-=1,i.innerText=i.indexNum+"/"+h):i.indexNum+1>h?(this.innerContainer.style.left=j+"px",i.indexNum=h,i.innerText=i.indexNum+"/"+h,this.innerContainer.isTransitionEnd=!0):(this.innerContainer.style.left=parseFloat(this.innerContainer.style.left)-f+"px",i.indexNum+=1,i.innerText=i.indexNum+"/"+h))}function e(a){}var f=window.innerWidth,g=(window.innerHeight,document.querySelectorAll(".showZone")[0]),h=document.querySelectorAll(".innerContainer>img").length,i=g.previousSibling,j=-f*(h-1);return 0==h?!1:void a()}for(var h,i,j,k=window.innerWidth,l=(window.innerHeight,window.location.href),m=l.slice(l.indexOf("?")+1).split("&"),n={},o=0;o<m.length;o++)n[m[o].split("=")[0]]="true"==m[o].split("=")[1]||"false"==m[o].split("=")[1]?JSON.parse(m[o].split("=")[1]):m[o].split("=")[1];for(var p in n)n[p]="NumAdult"==p||"NumChild"==p||"NumRoom"==p?parseInt(n[p]):n[p];h=n.CheckInDate,i=n.CheckOutDate,j=n.FrontPgImage;var m={Parameters:JSON.stringify(n),Code:"0008",ForeEndType:3},q=new vcm;q.loadJson("",JSON.stringify(m),a)}();