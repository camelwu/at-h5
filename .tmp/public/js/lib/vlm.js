/*! asiatravel FE team at-h5-nodejs-----2016-05-19T15:21:43 */
(function(e,t){var n=n||function(n){var _api="http://10.7.2.119/api/GetServiceApiResult",lStorage=window.localStorage,sStorage=window.sessionStorage,basePath=void 0==basePath?"http://"+window.location.host:basePath,menus={home:["首页",basePath],user:["我的",basePath+"/user/user.html"]},_codeDic={"0007":"10100001","0008":"10100002","0009":"10100003","0010":"10100004","0011":"10100005","0012":"10100006","0013":"10100007","0014":"10100008","0015":"10100009","0016":"10100010","0017":"10100011","0081":"10100012","0082":"10100013","0083":"10100014","0086":"20100001","0087":"20100002","0088":"20100003","0089":"20100004","0090":"20100005","0091":"20100006","0092":"20100007","0093":"20100008","0094":"20100009","0095":"20100010","0096":"20100011",3001:"30100001",3002:"30100002",3003:"30100003",3004:"30100004",3005:"30100005",3006:"30100006",3007:"30100007",3008:"30100008",3009:"30100009","0201":"40100001","0202":"40100002","0203":"40100003","0204":"40100004","0205":"40100005","0206":"40100006","0207":"40100007","0208":"40100008","0209":"40100009","0052":"70100001","0058":"70100002","0051":"70100003","0053":"70100005","0055":"70100006","0054":"70100007","0063":"70100008","0056":"70100009","0060":"70100010","0059":"70100011","0071":"70100012","0072":"70100013","0073":"70100014","0074":"70100015","0061":"70100016","0062":"70100017","001302":"80100001","001303":"80100002","001304":"80100003","001305":"80100004","001306":"80100005","001307":"80100006","001301":"90100001"};return arr_t={1:"护照",2:"身份证",3:"出生证明",4:"港澳通行证",5:"军官证",6:"驾驶证",7:"台胞证",8:"回乡证",9:"其他"},getpara=function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=window.location.search.substr(1).match(b);return null!=c?decodeURIComponent(c[2]):null},setUrlPara=function(a,b,c){var d=a?a:window.location.href,a=d,e=new RegExp("(^|&)"+b+"=([^&]*)(&|$)"),f=a.match(e);return f?a.replace(f[0],"&"+b+"="+c+"&"):d},parseUrlPara=function(a,b){var b=b||!1,c=/([^=&?]+)=([^=&?]+)/g,d={};return a.replace(c,function(){var a=arguments;d[a[1]]=b?decodeURIComponent(a[2]):a[2]}),d},_init=function(){function a(){if(document.getElementById("menu")){var a=document.getElementById("menu");a.className="footer-menu-three-icons footer-menu"}else{var a=document.createElement("div");a.id="menu",a.className="footer-menu-three-icons footer-menu",document.body.appendChild(a)}var c="";for(var d in menus){var e=d==b?"foot-"+d+"s":"foot-"+d;c+="<a href='"+menus[d][1]+"' class='"+e+"'><i></i>"+menus[d][0]+"</a>"}a.innerHTML=c,$("#content").css("padding-bottom","51px")}_loadend();var b,c=window.location.href;if(c=="http://"+basePath+"/index.html"||c=="http://"+basePath+"/")b="home";else{var d=c.substr(basePath.length+1);""==d||"index.html"==d?b="home":"scenic/index.html"==d?b="find":"user/user.html"==d?b="user":"building.html"==d&&(b="find")}menus.hasOwnProperty(b)&&a(),$(".header").length>=1&&$(".header").is(":visible")&&$("#content").css("padding-top","45px")},_loading=function(a){"none"==$("#preloader").css("display")&&($("#status").css({backgroundImage:"../images/loading"+a+".gif"}),$("#status").fadeIn(),$("#preloader").delay(400).fadeIn("medium"))},_loadend=function(){"none"!=$("#preloader").css("display")&&($("#status").fadeOut(),$("#preloader").delay(400).fadeOut("medium"))},_checklogin=function(a){return lStorage.memberid&&""!=lStorage.memberid&&lStorage.login&&1==lStorage.login?l_find(a):(l_login(a),!1)},_Utils={format_add_zero:function(a){return parseInt(a)<10?"0"+a:a},format_number:function(a){"number"!=typeof a&&(a=Number(a));var b=a>=0?"":"-",c=Math.abs(a),d=c.toString();if(d.indexOf(".")>-1){var e=/-*[0-9]+(.[0-9]+)/,f=d.replace(e,"$1");2==f.length&&(f+="0")}else var f=".00";var g=parseInt(d,10).toString(),h=g.length;if(3>=h)return b+g+f;var i=h%3,j=i>0?g.slice(0,i)+","+g.slice(i,h).match(/\d{3}/g).join(","):g.slice(i,h).match(/\d{3}/g).join(",");return b+j+f},numToPercent:function(a){return"number"!=typeof a?"":(Math.round(1e4*a)/100).toFixed(1)+"%"},format_date:function(a,b){var c=a.replace("-","/").replace("-","/").replace("T"," "),d=new Date(c),e=d.getFullYear(),f=e.toString(),f=f.substr(-2),g=parseInt(d.getMonth())+1,h=parseInt(d.getDate()),i=d.getHours(),j=parseInt(d.getMinutes()),k=parseInt(d.getSeconds());g=10>g?"0"+g:g,h=10>h?"0"+h:h,i=10>i?"0"+i:i,j=10>j?"0"+j:j;var l;return b="undefined"==typeof b?"":b,l="YmdHi"==b?e+"-"+g+"-"+h+" "+i+":"+j:"YmdHis"==b?e+"-"+g+"-"+h+" "+i+":"+j+":"+k:"Ymd"==b?e+"-"+g+"-"+h:"ymd"==b?f+"-"+g+"-"+h:"md"==b?g+"月"+h+"日":"cymd"==b?e+"年"+g+"月"+h+"日":"hm"==b?i+":"+j:g+"-"+h},getWeek:function(a,b){var c,d=new Date(a.replace(/(\d{4})-(\d{2})-(\d{2})T(.*)?\.(.*)/,"$1/$2/$3 $4"));switch(d.getDay()){case 0:c="日";break;case 1:c="一";break;case 2:c="二";break;case 3:c="三";break;case 4:c="四";break;case 5:c="五";break;case 6:c="六"}return"f1"==b?"周"+c:"f2"==b?"星期"+c:"周"+c},compareTime:function(a){if(""==a||null==a)return!1;var b=a.toString().split("-"),c=b[0],d=parseInt(b[1]-1),e=parseInt(b[2]),f=new Date(c,d,e).getTime(),g=(new Date).getTime();return f>=g},compareDay:function(a,b){if(""==a||null==a||""==b||null==b)return"no timestr.";a=new Date(a.replace("T"," ")),b=new Date(b.replace("T"," "));var c=Math.floor((b-a)/864e5);return c},compareBirth:function(a){if(""==a||null==a)return!1;var b=a.toString().split("-"),c=b[0],d=parseInt(b[1]-1),e=parseInt(b[2]),f=new Date(c,d,e).getTime(),g=(new Date).getTime();return g>=f},sayHello:function(){var a=new Date,b=a.getHours();return 6>b?"凌晨好!":9>b?"早上好!":12>b?"上午好!":14>b?"中午好!":17>b?"下午好!":19>b?"傍晚好!":22>b?"晚上好!":void 0},CookieUtil:{get:function(a){var b=encodeURIComponent(a)+"=",c=document.cookie.indexOf(b),d=null;if(c>-1){var e=document.cookie.indexOf(";",c);-1==e&&(e=document.cookie.length),d=decodeURIComponent(document.cookie.substring(c+b.length,e))}return d},set:function(a,b,c,d,e,f){var g=encodeURIComponent(a)+"="+encodeURIComponent(b);c instanceof Date&&(g+="; expires="+c.toGMTString()),d&&(g+="; path="+d),e&&(g+="; domain="+e),f&&(g+="; secure="+f),document.cookie=g},unset:function(a,b,c,d){this.set(a,"",new Date(0),b,c,d)}},validate:{isNoEmpty:function(a){return""!=a},dataValid:function(a){var b=/(\d{2})\/(\d{2})$/;return!!b.test(a)},safecode:function(a){var b=new RegExp("^[0-9]*$");return!(a.length>3)&&b.test(a)},mobileNo:function(a){var b=/^1\d{10}$/;return!!b.test(a)},email:function(a){var b=/^(\w-*_*\.*)+@(\w-?)+(\.\w{2,})+$/;return!!b.test(a)},userName:function(a){var b=/^[a-zA-Z][a-zA-Z0-9_]{3,29}$/;return!!b.test(a)},guestName:function(a){var b=/^[a-zA-Z][a-zA-Z0-9_]{2,15}$/;return!!b.test(uname)},nickName:function(a){var b=/^[\u4E00-\u9FA5a-zA-Z0-9][\u4E00-\u9FA5a-zA-Z0-9_]{3,19}$/,c=/^[\u4E00-\u9FA5]{2,10}$/,d=/^[\u4E00-\u9FA5][a-zA-Z0-9_]{2,18}$/;return!!(b.test(a)||c.test(a)||d.test(a))},chiName:function(a){var b=/^[\u4E00-\u9FA5a-zA-Z][\u4E00-\u9FA5a-zA-Z. ]{1,19}$/;if(b.test(a)){if(/[a-z]/gi.test(a)){var c=/[a-z]/gi.exec(a).index;if(a=a.substring(c),!/^[a-z. ]*[a-z]$/gi.test(a))return!1}return!0}return!1},ChineseName:function(a){var b=/^([\u4e00-\u9fa5a-zA-Z]){2,7}$/;return!!b.test(a)},code:function(a){var b=/^[0-9]{6}$/;return!!b.test(a)},engName:function(a){var b=/^[a-zA-Z][a-zA-Z\s]*[a-zA-Z]{1,25}$/;return!!b.test(a)},password:function(a){var b=/^\w*.{6,16}$/;return!!b.test(a)},illegalCharater:function(a){var b=/[@&\s\/\\\|"'><\?\.\:;]/im;return!!b.test(a)},bankAccountNo:function(a){var b=/^\d{16,19}$/g;return!!b.test(a)},IdCard:{Wi:[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],vCode:[1,0,10,9,8,7,6,5,4,3,2],IdCardMatch:function(a){if(a=this.trim(a.replace(/ /g,"")),15==a.length)return this.isValidityBrithBy15IdCard(a);if(18==a.length){var b=a.split("");return!(!this.isValidityBrithBy18IdCard(a)||!this.isTrueValidateCodeBy18IdCard(b))}return!1},isTrueValidateCodeBy18IdCard:function(a){var b=0,c=this.Wi,d=this.vCode;"x"==a[17].toLowerCase()&&(a[17]=10);for(var e=0;17>e;e++)b+=c[e]*a[e];return valCodePosition=b%11,a[17]==d[valCodePosition]},isValidityBrithBy18IdCard:function(a){var b=a.substring(6,10),c=a.substring(10,12),d=a.substring(12,14),e=new Date(b,parseFloat(c)-1,parseFloat(d));return e.getFullYear()==parseFloat(b)&&e.getMonth()==parseFloat(c)-1&&e.getDate()==parseFloat(d)},isValidityBrithBy15IdCard:function(a){var b=a.substring(6,8),c=a.substring(8,10),d=a.substring(10,12),e=new Date(b,parseFloat(c)-1,parseFloat(d));return e.getYear()==parseFloat(b)&&e.getMonth()==parseFloat(c)-1&&e.getDate()==parseFloat(d)},trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")}},showPwdStrong:function(a,b){var c="#ccc",d="#ff0000",e="#ff9900",f="#19c521";if(null==a||""==a)Lcolor=Mcolor=Hcolor=c;else switch(S_level=this.checkPwdStrong(a),S_level){case 0:Lcolor=Mcolor=Hcolor=c;case 1:Lcolor=d,Mcolor=Hcolor=c;break;case 2:Lcolor=Mcolor=e,Hcolor=c;break;default:Lcolor=Mcolor=Hcolor=f}b.find("#weak").css("background-color",Lcolor),b.find("#middle").css("background-color",Mcolor),b.find("#strong").css("background-color",Hcolor)},checkPwdStrong:function(a){if(a.length<4)return 0;for(Modes=0,i=0;i<a.length;i++)Modes|=this.charMode(a.charCodeAt(i));return this.bitTotal(Modes)},charMode:function(a){return a>=48&&57>=a?1:a>=65&&90>=a?2:a>=97&&122>=a?4:8},bitTotal:function(a){modes=0;for(var b=0;4>b;b++)1&a&&modes++,a>>>=1;return modes}},setPartHidden:function(a,b){if(!a)return"";if("email"==b){for(var c=a.split("@"),d=a.substring(2,c[0].length-2),e=new Array,f=0;f<d.length;f++)e.push(d.substr(f,1));for(var f=0;f<d.length;f++)e[f]="*";var d=e.join(""),g=a.substring(0,2),h=c[0].length,i=c[0].substring(h-2,h),j=c[1],k=g+d+i+"@"+j;return k}if("phone"==b){var g=a.substring(0,3),i=a.substring(a.length-5,a.length-1);return g+"****"+i}if("realname"==b){var l,m=a.length,n=1,d="";l=a.substr(0,1);for(var o=["欧阳","太史","端木","上官","司马","东方","独孤","南宫","万俟","闻人","夏侯","诸葛","尉迟","公羊","赫连","澹台","皇甫","宗政","濮阳","公冶","太叔","申屠","公孙","慕容","仲孙","钟离","长孙","宇文","城池","司徒","鲜于","司空","汝嫣","闾丘","子车","亓官","司寇","巫马","公西","颛孙","壤驷","公良","漆雕","乐正","宰父","谷梁","拓跋","夹谷","轩辕","令狐","段干","百里","呼延","东郭","南门","羊舌","微生","公户","公玉","公仪","梁丘","公仲","公上","公门","公山","公坚","左丘","公伯","西门","公祖","第五","公乘","贯丘","公皙","南荣","东里","东宫","仲长","子书","子桑","即墨","达奚","褚师"],f=0;f<o.length;f++)if(-1!=a.indexOf(o[f])){l=a.substr(0,2),n=2;break}for(var f=0;m-n>f;f++)d+="*";return l+d}if("idcard"==b){for(var m=a.length,d="",f=0;m-1>f;f++)d+="*";var g=a.substring(0,3),i=a.substring(a.length-4,a.length);return g+d+i}},timeCountDown:function(a,b,c){var d=setInterval(function(){a--,0==a?(clearInterval(d),c()):b(a)},1e3);return d},getEmailWebsiteUrl:function(a){var b;return b=-1!=a.indexOf("@126.com")||-1!=a.indexOf("@163.com")||-1!=a.indexOf("@yeah.net")?"http://hw.mail.163.com/":-1!=a.indexOf("@sohu.com")?"http://mail.sohu.com/":-1!=a.indexOf("@qq.com")||-1!=a.indexOf("@foxmail.com")?"http://mail.qq.com":-1!=a.indexOf("@139.com")?"http://mail.10086.cn":-1!=a.indexOf("@wo.com")?"http://mail.wo.com.cn":-1!=a.indexOf("@sina.com")||-1!=a.indexOf("@sina.cn")||-1!=a.indexOf("@sina.com.cn")||-1!=a.indexOf("@vip.sina.com")?"http://mail.sina.com.cn/":-1!=a.indexOf("@aliyun.com")?"https://mail.aliyun.com":-1!=a.indexOf("@tom.com")?"http://web.mail.tom.com":-1!=a.indexOf("@outlook.com")?"http://www.outLook.com":-1!=a.indexOf("@icloud.com")?"https://www.icloud.com":-1!=a.indexOf("@263.net")?"http://www.263.net":-1!=a.indexOf("@ddshenbian.com")?"http://exmail.qq.com/login":a.replace(/^(\w-*\.*)+@((\w-?)+(\.\w{2,}))+$/,"http://mail.$2")},vlidateMobileCode:function(a){var b;return $.ajax({type:"get",async:!1,url:_api+"/validate/check_mcode1",dataType:"json",data:a,success:function(a){b=a}}),b},sendMobileCode:function(a){var b;return $.ajax({type:"get",async:!1,url:_api+"/validate/send_mcode1",dataType:"json",data:a,success:function(a){b=a}}),b},sendEmail:function(a){var b;return $.ajax({type:"post",async:!1,url:_api+"/validate/send_email1",dataType:"json",data:a,success:function(a){b=a}}),b},pagination:function(a,b,c){function d(a,b){$.extend(c,{page:a+1,rows:f}),g(c,!1)}var e=b.totalCount,f=b.perPageCount?b.perPageCount:10,g=b.callback,h=b.currentPage;$("#"+a).pagination(e,{items_per_page:f,num_display_entries:6,current_page:h,num_edge_entries:1,callback:d})},getCurrency:function(a){return"CNY"==a?"￥":"USD"==a?"$":void 0},Jpage:function(a,b){function c(a,b){f(a)}var d=b.totalCount,e=b.perPageCount?b.perPageCount:10,f=b.callback;$("#"+a).pagination(d,{items_per_page:e,num_display_entries:6,current_page:0,num_edge_entries:1,callback:c})}},loadJson=function(a,b,c,d,e,f){b=JSON.parse(b),b.Code=void 0==_codeDic[b.Code]?b.Code:_codeDic[b.Code],b=JSON.stringify(b),void 0!=f&&1==f?($("#preloader").ajaxStart(function(){$(this).hide(),$("#status").hide()}),$("#preloader").ajaxStop(function(){$(this).hide(),$("#status").hide()})):($("#preloader").ajaxStart(function(){$(this).show(),$("#status").show()}),$("#preloader").ajaxStop(function(){$(this).hide(),$("#status").show()})),void 0!=d&&1==d&&$.ajaxSetup({async:!1}),$.ajax({type:"post",url:_api+"?rnd="+Math.random(),timeout:3e5,data:b,contentType:"application/json;charset=utf-8",beforeSend:function(a){if(void 0!=e&&1==e){md5("zhangfengming"),md5("");a.setRequestHeader("uid",user)}},success:function(a){c(a)},error:function(a,b,c){"timeout"==b&&(alert("网络不给力，刷新重试！"),window.location.reload())}}),$.ajaxSetup({async:!0})},loadJsonp=function(a,b,c){var d=document.getElementsByTagName("head")[0],e=null;null==document.getElementById(a)?(e=document.createElement("script"),e.setAttribute("type","text/javascript"),e.setAttribute("src",b),e.setAttribute("id",a),null!=c&&(e.onload=e.onreadystatechange=function(){return e.ready?!1:void(e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(e.ready=!0,c()))}),d.appendChild(e)):null!=c&&c()},l_login=function(a){var b;if("string"==typeof a&&(a.indexOf(".html")>-1||a.indexOf("&")>-1)){var c=a.replace("?","@");c=c.replace(/&/g,"*"),b="returnURL="+c}else b="callback="+a;var d=createIframe("../user/user-login.html?"+b);document.body.appendChild(d)},l_contact=function(){document.getElementById("name")&&(document.getElementById("name").value=lStorage.name?lStorage.name:""),document.getElementById("tel-num")&&(document.getElementById("tel-num").value=lStorage.phone?lStorage.phone:""),document.getElementById("email-label")&&(document.getElementById("email-label").value=lStorage.email?lStorage.email:"")},c_contact=function(){document.getElementById("name")&&(lStorage.name=lStorage.name?lStorage.name:document.getElementById("name").value),document.getElementById("tel-num")&&(lStorage.phone=lStorage.phone?lStorage.phone:document.getElementById("tel-num").value),document.getElementById("email-label")&&(lStorage.email=lStorage.email?lStorage.email:document.getElementById("email-label").value)},l_find=function(mycall){var email=localStorage.email,phone=localStorage.phone,memberid=localStorage.memberid,back=!1,udata={Parameters:'{"CultureName":"zh-CN","MemberId":"'+memberid+'","Email":"'+email+'","Mobile":"'+phone+'"}',ForeEndType:3,Code:"0053"};return loadJson("",JSON.stringify(udata),function(myJson){if(myJson.success)back=!0;else if(mycall){var c=eval(mycall);c()}},!0),back},_choice=function(a,b,c,d,e,f,g,h,i,j){var k="",l="";if("contact"===c)l="选择联系人";else switch(b.toLowerCase()){case"h":l="选择入住人";break;case"t":l="选择取票人";break;case"ht":l="选择取票人";break;default:l="选择乘机人"}k=d?"edit":"add";var m=createIframe("../user/user-choiceAir.html?elementId="+a+" &from="+b+"&isNeedPassport="+e+"&title="+l+"&type="+k+"&TravellerId="+d+"&isMulSelect="+f+"&numofAdult="+g+"&numofChlid="+h+"&Id="+i+"&departDate="+j);document.body.appendChild(m),window.parent.document.getElementById("ticket-wrap")&&(window.parent.document.getElementById("ticket-wrap").style.display="none")},createIframe=function(a,b){var c=b?b:"choiceAir",d=document.createElement("iframe");return d.id=c,d.name=c,d.src=a?a:"about:blank",d.style.position="fixed",d.style.zIndex="9999",d.style.left="0",d.style.top="0",d.style.right="0",d.style.bottom="0",d.style.border=0,d.style.width="100%",d.style.height="100%",d},{api:_api,getpara:getpara,setUrlPara:setUrlPara,arr_t:arr_t,parseUrlPara:parseUrlPara,loading:_loading,loadend:_loadend,init:_init,checkLogin:_checklogin,checkUser:l_find,f_choice:_choice,l_contact:l_contact,loadJson:loadJson,loadJsonp:loadJsonp,Utils:_Utils}}();"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"==typeof ender&&(this.vlm=n),"function"==typeof define&&define.amd&&define("vlm",["jquery"],function(a){return n})}).call(this,window,document);