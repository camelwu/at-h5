/*! asiatravel FE team at-h5-nodejs-----2016-05-19T16:09:38 */
function num2chin(a){switch(a){case"0":return"零";case"1":return"一";case"2":return"二";case"3":return"三";case"4":return"四";case"5":return"五";default:return"无"}}function url2json(a){if(a){for(var b={},c=a.split("?"),d=c[1].split("&"),e=0;e<d.length;e++){var f=d[e].split("=");b[f[0]]=f[1]}return b}}var lsf_myweb={getbyid:function(a){return document.getElementById(a)},getbytag:function(a,b){return a.getElementsByTagName(b)},getbyclass:function(a,b){if(a.getElementsByClassName)return a.getElementsByClassName(b);for(var c=[],d=a.getElementsByTagName("*"),e=new RegExp("\\b"+b+"\\b","g"),f=0;f<d.length;f++)-1!=d[f].className.search(e)&&c.push(d[f]);return c},bind:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}};!function(){document.getElementById("lsf_list");$(window).load(function(){var a=null;a=setInterval(function(){$("#lsf_list").children().length&&($("#status").fadeOut(),$("#preloader").delay(400).fadeOut("medium"),clearInterval(a))},30)})}(),function(){function M(a){a=a||{},a.rank=a.rank||"priceasc",a.CityName=a.CityName||"Singapore",a.NumRoom=a.NumRoom||"1",a.NumChild=a.NumChild||"1",a.NumAdult=a.NumAdult||"1";var b=new Date,c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate();a.CheckInDate=a.CheckInDate||c+"-"+d+"-"+e,a.CheckOutDate=a.CheckOutDate||c+"-"+d+"-"+(e+1);var f=new vcm,g={Parameters:'{"CultureName":"zh-CN","PartnerCode":"1000","CountryISOCode":"SG","CityName":"'+a.CityName+'","CheckInDate":"'+a.CheckInDate+'T00:00:00","CheckOutDate":"'+a.CheckOutDate+'T00:00:00","NumRoom":'+a.NumRoom+',"NumAdult":'+a.NumAdult+',"NumChild":'+a.NumChild+',"InstantConfirmation":true,"AllOccupancy":true,"PageIndex":1,"PageSize":20,"sorttype":"'+a.rank+'"}',Code:"0007",ForeEndType:3};return f.loadJson("",JSON.stringify(g),mycallback)}function V(a){function b(){lazyLoad.apply(this,arguments)}if(a){lsf_myweb.getbyid("lsf_list");list_oUl.innerHTML="";for(var c=0;c<a.length;c++){var d=a[c].StarRating.substring(0,1),e="",f="",g="";a[c].IsFreeWifi&&(e+='<b class="hl-icon1"></b>'),a[c].IsFreeTransfer&&(e+='<b class="hl-icon2"></b>'),a[c].IsCashReward&&(f='<div class="h-div1" style="margin-right: 3px;background-color: #ffb412">现金奖励</div>'),a[c].IsFreeCityTour&&(g='<div class="h-div1">免费景点</div>');var h='<li class="ho_list"><div class="ho_pic"><img  src="images/cars.png" data-src="'+a[c].FrontPgImage+'" class="ho_img"/ data-all="'+a[c]+'"></div><div class="ho_infor"><p class="hname"  style="font-size:1.4rem;width:'+pWidth+'px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;-webkit-text-ellipsis:ellipsis">'+a[c].HotelNameLocale+"("+a[c].HotelName+')</p><div class="h-score"><span style="color:#8ed1cc;font-size:1.5em;font-weight: 600;">'+a[c].HotelReviewScore+'</span><span style="color:#999999;font-size:0.8em;">分/'+a[c].HotelReviewCount+'人点评</span><p class="price"><span style="font-size:0.8em;color:#fe4716;">￥</span><span style="font-size:2em;font-weight: 600;color:#fe4716;">'+a[c].AvgPrice+'</span><span style="font-size:0.8em;color:#999999;">起</span></p></div><div class="h-grade"><span style="color:#999999;font-size:1em;">'+num2chin(d)+"星级</span>"+e+f+g+'</div><p class="h-address">'+a[c].City+"("+a[c].Location+")</p></div></li>";list_oUl.innerHTML+=h}b.prototype=new lazyLoad,b.prototype.update=function(){if(this.imgs.length){var a=this.imgs.length;for(--a;a>=0;a--)if(this.shouldShow(a)){var b=this.imgs[a].src;this.imgs[a].src=this.imgs[a].getAttribute("data-src"),this.imgs[a].onerror=function(){this.src=b},this.imgs.splice(a,1)}}};new b("lsf_list");document.getElementsByClassName("hotelcontent")[0].getElementsByClassName("ho_img")}}function mycallback(d){var arr=eval("("+d+")"),data=arr.Data;V(data),getDetail(data)}function getDetail(a){for(var b=document.getElementsByClassName("ho_img"),c=function(b){var c=new Object;c.HotelID=a[b.index].HotelCode,c.HotelCode=a[b.index].HotelCode,c.InstantConfirmation=void 0!=a[b.index].InstantConfirmation?a[b.index].InstantConfirmation:!1,c.AllOccupancy=void 0!=a[b.index].AllOccupancy?a[b.index].AllOccupancy:!0,c.CheckInDate=url_json.CheckInDate,c.CheckOutDate=url_json.CheckOutDate,c.NumRoom=url_json.NumRoom,c.NumAdult=url_json.NumAdult,c.NumChild=url_json.NumChild,c.FrontPgImage=b.getAttribute("data-src");var d="";for(var e in c)d+="&"+e+"="+c[e];d=d.slice(1),window.location.href="jyy_hotelDetail.html?"+d},d=0;d<b.length;d++)b[d].index=d,b[d].onclick=function(){var a=this;c(a)}}var list_oUl=lsf_myweb.getbyid("lsf_list"),pWidth=list_oUl.offsetWidth-140,str=window.location.href,url_json=url2json(str),oBody=document.getElementsByTagName("body")[0],oBtn=document.getElementById("s_but");M(url_json),oBody.onclick=function(a){var b=a||event,c=b.srcElement||b.target;if("r-li"==c.className){var d=c.innerHTML;-1!=d.indexOf("价格升序")?url_json.rank="PriceASC":-1!=d.indexOf("价格降序")?url_json.rank="PriceDESC":-1!=d.indexOf("好评优先")&&(url_json.rank="ReviewscoreDESC"),M(url_json)}}}();