/*! asiatravel FE team at-h5-nodejs-----2016-05-19T15:21:43 */
function setAge(a){a.value=a.value.replace(/\D/gi,"")}function checkAge(a){(parseInt(a.value)<2||parseInt(a.value)>12)&&(jAlert("儿童年龄不符合标准!"),a.value="")}var val=vlm.parseUrlPara(window.location.href),hf_search={initRoom:function(){var a,b=document.getElementsByClassName("sc-content2")[0],c=document.querySelector(".hotelInfo_numb_room"),d="",e="",f=document.getElementById("roomNum");if(val.isInit){e=sessionStorage.cacheSearch?JSON.parse(sessionStorage.cacheSearch):{},$(".origin").html(e.FromCityNameCN),$(".destination").html(e.ToCityNameCN),$(".origin").attr("data-citycode",e.FromCityCode),$(".destination").attr("data-citycode",e.ToCityCode),f.innerHTML=e.RoomInfo.length;for(var g=0;g<e.RoomInfo.length;g++){d=e.RoomInfo[g].childWithOutBed&&1==e.RoomInfo[g].adult?'<span class="title">房间'+(g+1)+'</span><div class="numbList"><span class="n_tit">成人</span><div class="per-price-control" data-type="adult"><span class="cut-down-btn" id="adult-down"></span><i class="cut-up-cont adult-people-number" data-type="adultNum" id="adult-people-number">'+e.RoomInfo[g].adult+'</i><span class="plus-btn"></span></div></div><div class="numbList"><span class="n_tit">儿童</span><span class="child-age">(2-12)岁</span><div class="per-price-control" data-type="extraChild"><span class="cut-down-btn"></span><i class="cut-up-cont child-number" data-type="childNum">2</i><span class="plus-btn"></span></div></div><div class="extraChild"><span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value="'+e.RoomInfo[g].childWithBed[0]+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value="'+e.RoomInfo[g].childWithOutBed[0]+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div></div>':e.RoomInfo[g].childWithOutBed&&1==e.ChildNum[g]?'<span class="title">房间'+(g+1)+'</span><div class="numbList"><span class="n_tit">成人</span><div class="per-price-control" data-type="adult"><span class="cut-down-btn" id="adult-down"></span><i class="cut-up-cont adult-people-number" data-type="adultNum" id="adult-people-number">'+e.RoomInfo[g].adult+'</i><span class="plus-btn"></span></div></div><div class="numbList"><span class="n_tit">儿童</span><span class="child-age">(2-12)岁</span><div class="per-price-control" data-type="extraChild"><span class="cut-down-btn"></span><i class="cut-up-cont child-number" data-type="childNum">1</i><span class="plus-btn"></span></div></div><div class="extraChild"><span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value="'+e.RoomInfo[g].childWithOutBed[0]+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon noselect"></b></span></div></div>':e.RoomInfo[g].childWithOutBed&&2==e.ChildNum[g]?'<span class="title">房间'+(g+1)+'</span><div class="numbList"><span class="n_tit">成人</span><div class="per-price-control" data-type="adult"><span class="cut-down-btn" id="adult-down"></span><i class="cut-up-cont adult-people-number" data-type="adultNum" id="adult-people-number">'+e.RoomInfo[g].adult+'</i><span class="plus-btn"></span></div></div><div class="numbList"><span class="n_tit">儿童</span><span class="child-age">(2-12)岁</span><div class="per-price-control" data-type="extraChild"><span class="cut-down-btn"></span><i class="cut-up-cont child-number" data-type="childNum">2</i><span class="plus-btn"></span></div></div><div class="extraChild"><span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value="'+e.RoomInfo[g].childWithBed[0]+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value="'+e.RoomInfo[g].childWithOutBed[0]+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon ico_select"></b></span></div></div>':e.RoomInfo[g].childWithBed&&1==e.RoomInfo[g].adult?'<span class="title">房间'+(g+1)+'</span><div class="numbList"><span class="n_tit">成人</span><div class="per-price-control" data-type="adult"><span class="cut-down-btn" id="adult-down"></span><i class="cut-up-cont adult-people-number" data-type="adultNum" id="adult-people-number">'+e.RoomInfo[g].adult+'</i><span class="plus-btn"></span></div></div><div class="numbList"><span class="n_tit">儿童</span><span class="child-age">(2-12)岁</span><div class="per-price-control" data-type="extraChild"><span class="cut-down-btn"></span><i class="cut-up-cont child-number" data-type="childNum">1</i><span class="plus-btn"></span></div></div><div class="extraChild"><span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value="'+e.RoomInfo[g].childWithBed[0]+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div></div>':e.RoomInfo[g].childWithBed&&1==e.ChildNum[g]?'<span class="title">房间'+(g+1)+'</span><div class="numbList"><span class="n_tit">成人</span><div class="per-price-control" data-type="adult"><span class="cut-down-btn" id="adult-down"></span><i class="cut-up-cont adult-people-number" data-type="adultNum" id="adult-people-number">'+e.RoomInfo[g].adult+'</i><span class="plus-btn"></span></div></div><div class="numbList"><span class="n_tit">儿童</span><span class="child-age">(2-12)岁</span><div class="per-price-control" data-type="extraChild"><span class="cut-down-btn"></span><i class="cut-up-cont child-number" data-type="childNum">1</i><span class="plus-btn"></span></div></div><div class="extraChild"><span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value="'+e.RoomInfo[g].childWithBed[0]+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon noselect ico_select"></b></span></div></div>':'<span class="title">房间'+(g+1)+'</span><div class="numbList"><span class="n_tit">成人</span><div class="per-price-control" data-type="adult"><span class="cut-down-btn" id="adult-down"></span><i class="cut-up-cont adult-people-number" data-type="adultNum" id="adult-people-number">'+e.RoomInfo[g].adult+'</i><span class="plus-btn"></span></div></div><div class="numbList"><span class="n_tit">儿童</span><span class="child-age">(2-12)岁</span><div class="per-price-control" data-type="extraChild"><span class="cut-down-btn"></span><i class="cut-up-cont child-number" data-type="childNum">0</i><span class="plus-btn"></span></div></div><div class="extraChild" style="display: none"><span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="(2-12)" onkeyup="setAge(this);" onblur="checkAge(this)";><i class="child-sui">岁</i></div>',a=document.createElement("section"),a.innerHTML=d,a.className="hotelInfo_numb_people init-hotel-room-detail";var h=$(".init-hotel-room-detail").length,i=document.getElementsByClassName("init-hotel-room-detail");h?b.insertBefore(a,i[h-1].nextSibling):b.insertBefore(a,c.nextSibling)}}else f.innerHTML=1,d='<span class="title">房间1</span><div class="numbList"><span class="n_tit">成人</span><div class="per-price-control" data-type="adult"><span class="cut-down-btn" id="adult-down"></span><i class="cut-up-cont adult-people-number" data-type="adultNum" id="adult-people-number">2</i><span class="plus-btn"></span></div></div><div class="numbList"><span class="n_tit">儿童</span><span class="child-age">(2-12)岁</span><div class="per-price-control" data-type="extraChild"><span class="cut-down-btn"></span><i class="cut-up-cont child-number" data-type="childNum">0</i><span class="plus-btn"></span></div></div><div class="extraChild" style="display: none"><span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="(2-12)" onkeyup="setAge(this);" onblur="checkAge(this);"><i class="child-sui">岁</i></div>',a=document.createElement("section"),a.innerHTML=d,a.className="hotelInfo_numb_people init-hotel-room-detail",b.insertBefore(a,c.nextSibling)},toUp:function(a,b,c){var d=b.parentNode.getAttribute("data-type"),e="",f=0,g="",h=this;b.onclick=function(){if(g=b.parentNode.parentNode.parentNode,"extraChild"==d){if(e=a.innerHTML,e=Number(e),e+=1,f=Number(g.querySelector(".adult-people-number").innerHTML)+e,f>5)return void jAlert("单个房间最多人数不能超过5人!","提示");if(e>2)return void jAlert("单个房间儿童数不能超过2人!","提示");a.innerHTML=e,h.extraChild(b.parentNode.parentNode,e),2==e?b.style.backgroundPosition="-108px -23px":b.style.backgroundPosition="-131px -24px"}else if("extraRoom"==d){if(e=a.innerHTML,e=Number(e),e+=1,e>5)return void jAlert("最多选择5个房间!","提示");a.innerHTML=e,h.extraRoom(b.parentNode.parentNode,e),5==e?b.style.backgroundPosition="-108px -23px":b.style.backgroundPosition="-131px -24px"}else if("adult"==d){var c=b.parentNode.getElementsByClassName("cut-down-btn")[0];if(c.style.backgroundPosition="-161px -24px",e=a.innerHTML,e=Number(e),e+=1,f=Number(g.querySelector(".child-number").innerHTML)+e,f>5)return void jAlert("单个房间最多人数不能超过5人!","提示");if(e>3)return void jAlert("单个房间成人数不能超过3人!","提示");a.innerHTML=e;var i=b.parentNode.parentNode.parentNode,j=parseInt(i.querySelector(".child-number").innerHTML);h.changeChildTemp(i,e,j),3==e?b.style.backgroundPosition="-108px -23px":b.style.backgroundPosition="-131px -24px"}}},changeChildTemp:function(a,b,c){var d,e=a.querySelector(".extraChild"),f=e.getElementsByClassName("inp-cage")[0].value;""!=f?1==b?2==c?(d=e.getElementsByClassName("inp-cage")[1].value,""!=d?e.innerHTML='<span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+f+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+d+'" onkeyup="setAge(this);"><i class="child-sui">岁</i></div>':e.innerHTML='<span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+f+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);"><i class="child-sui">岁</i></div>'):e.innerHTML='<span class="bedList" style="float: left"><i>儿童'+c+'年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+f+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div>':1==c?e.innerHTML='<span class="bedList" style="float: left"><i>儿童'+c+'年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+f+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon noselect"></b></span></div>':2==c&&(d=e.getElementsByClassName("inp-cage")[1].value,""!=d?e.innerHTML='<span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+f+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+d+'" onkeyup="setAge(this);"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon ico_select"></b></span></div>':e.innerHTML='<span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+f+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon ico_select"></b></span></div>'):1==b?2==c?e.innerHTML='<span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div>':e.innerHTML='<span class="bedList" style="float: left"><i>儿童'+c+'年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div>':1==c?e.innerHTML='<span class="bedList" style="float: left"><i>儿童'+c+'年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon noselect"></b></span></div>':2==c&&(e.innerHTML='<span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon ico_select"></b></span></div>'),this.addbed()},toDown:function(a,b){var c=b.parentNode.getAttribute("data-type"),d=this,e=b.parentNode.getElementsByClassName("plus-btn")[0];b.onclick=function(){var f=a.innerHTML;if(f=Number(f),"room_downb"==b.id)1>=f?a.innerHTML=1:(f-=1,a.innerHTML=f),1==f?b.style.backgroundPosition="-185px -24px":b.style.backgroundPosition="-161px -24px",5==f?e.style.backgroundPosition="-108px -23px":e.style.backgroundPosition="-131px -24px";else if("adult-down"==b.id){1>=f?a.innerHTML=1:(f-=1,a.innerHTML=f),1==f?b.style.backgroundPosition="-185px -24px":b.style.backgroundPosition="-161px -24px",3==f?e.style.backgroundPosition="-108px -23px":e.style.backgroundPosition="-131px -24px";var g=b.parentNode.parentNode.parentNode,h=parseInt(g.querySelector(".child-number").innerHTML);d.changeChildTemp(g,f,h)}else 0>=f?a.innerHTML=0:(f-=1,a.innerHTML=f),0==f?b.style.backgroundPosition="-185px -24px":b.style.backgroundPosition="-161px -24px",2==f?e.style.backgroundPosition="-108px -23px":e.style.backgroundPosition="-131px -24px";"extraChild"==c&&d.extraChild(b.parentNode.parentNode,f),"extraRoom"==c&&d.extraRoom(b.parentNode.parentNode,f)}},addbed:function(){for(var a=document.getElementsByClassName("icon noselect"),b=0;b<a.length;b++)!function(c){a[b].onclick=function(){var b=a[c].className;"icon noselect"==b?this.className="icon noselect ico_select":this.className="icon noselect"}}(b)},add_subtract:function(){for(var a=document.getElementsByClassName("cut-up-cont"),b=document.getElementsByClassName("plus-btn"),c=document.getElementsByClassName("cut-down-btn"),d=0;d<a.length;d++){this.toUp(a[d],b[d],c[d]),this.toDown(a[d],c[d]);var e=parseInt(a[d].innerHTML);"adult"==a[d].parentNode.getAttribute("data-type")||"extraRoom"==a[d].parentNode.getAttribute("data-type")?1==e?c[d].style.backgroundPosition="-185px -24px":c[d].style.backgroundPosition="-161px -24px":0==e?c[d].style.backgroundPosition="-185px -24px":c[d].style.backgroundPosition="-161px -24px"}this.addbed()},extraChild:function(a,b){var c=a.parentNode.getElementsByClassName("extraChild"),d="",e=parseInt(a.parentNode.getElementsByClassName("adult-people-number")[0].innerHTML);if(0==b&&1==c.length)c[0].style.display="none";else{var f;c[0].style.display="block",f=this.extraChildTemp(b,e,c[0]),0==c.length?(d='<div class="extraChild">',domAfter(a,d+f+"</div>"),f=this.extraChildTemp(b,e,d)):(c[0].innerHTML=f,f=this.extraChildTemp(b,e,c[0]))}this.add_subtract()},extraRoom:function(a,b){var c=(a.parentNode.childNodes[7],document.getElementsByClassName("hotelInfo_numb_people")),d="";if(b<c.length){var e=$(".hotelInfo_numb_people").size();$(".hotelInfo_numb_people").eq(e-1).remove()}else{if(b==c.length)return;var f=document.createElement("section");f.className="hotelInfo_numb_people";for(var g=1;b>=g;g++){d=this.extraRoomTemp(g);var h=c.length,i=h-1;f.innerHTML=d,$(".sc-content2").append(f,c[i].nextElementSibling)}}this.add_subtract()},extraChildTemp:function(a,b,c){var d=c.getElementsByClassName("inp-cage")[0].value;if(""!=d){if(1==b)return 2==a?'<span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+d+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12"><i class="child-sui">岁</i></div>':'<span class="bedList" style="float: left"><i>儿童'+a+'年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+d+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div>';if(1==a)return'<span class="bedList" style="float: left"><i>儿童'+a+'年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+d+'"" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon noselect"></b></span></div>';if(2==a)return'<span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value = "'+d+'" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon ico_select"></b></span></div>'}else{if(1==b)return 2==a?'<span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div>':'<span class="bedList" style="float: left"><i>儿童'+a+'年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div>';if(1==a)return'<span class="bedList" style="float: left"><i>儿童'+a+'年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon noselect"></b></span></div>';if(2==a)return'<span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><span class="bedList" style="float: left"><i>儿童2年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList spenumbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon ico_select"></b></span></div>'}this.addbed()},extraRoomTemp:function(a){return'<span class="title">房间'+a+'</span><div class="numbList"><span class="n_tit">成人</span><div class="per-price-control" data-type="adult"><span class="cut-down-btn" id="adult-down"></span><i class="cut-up-cont adult-people-number" data-type="adultNum" id="adult-people-number">2</i><span class="plus-btn"></span></div></div><div class="numbList"><span class="n_tit">儿童</span><span class="child-age">(2-12)岁</span><div class="per-price-control" data-type="extraChild"><span class="cut-down-btn"></span><i class="cut-up-cont child-number" data-type="childNum">0</i><span class="plus-btn"></span></div></div><div class="extraChild" style="display: none"><span class="bedList" style="float: left"><i>儿童1年龄</i></span><div class="childAge"><input class="inp-cage" type="tel" value placeholder="2-12" onkeyup="setAge(this);" onblur="checkAge(this)"><i class="child-sui">岁</i></div><div class="numbList"><span class="bedList" data-type="ifaddBed"><i>儿童加1床</i><b class="icon noselect"></b></span></div></div>'},domAfter:function(a,b){var c=a.nextSibling;if(null!=c)for(;void 0==c.tagName;){if(null==c.nextSibling){c=null;break}c=c.nextSibling}null!=c?c.parentNode.insertBefore(el(b),c):a.parentNode.appendChild(el(b))},addHandler:function(a,b,c){document.addEventListener?this.addHandler=function(a,b,c){a.addEventListener(b,c,!1)}:document.attachEvent?this.addHandler=function(a,b,c){a.attachEvent("on"+b,function(){c.call(a)})}:this.addHandler=function(a,b,c){a["on"+b]=c},this.addHandler(a,b,c)},tangleCity:function(){for(var a=document.querySelectorAll(".place"),b=0;b<a.length;b++)a[b].current=0,this.addHandler(a[b],"click",function(a){var b=this.querySelector(".origin ").innerHTML,c=$(".origin").attr("data-citycode"),d=this.querySelector(".destination").innerHTML,e=$(".destination").attr("data-citycode"),a=a||window.event,f=a.target||a.srcElement;if(-1!=f.className.indexOf("span-target")){var g=this.querySelector("span");g.style.transition="0.7s all ease",g.style.webkitTransition="0.7s all ease",this.current=this.current+180,g.style.transform="rotate("+this.current+"deg)",g.style.webkitTransform="rotate("+this.current+"deg)",this.querySelector(".origin ").innerHTML=d,$(".origin").attr("data-citycode",e),this.querySelector(".destination ").innerHTML=b,$(".destination").attr("data-citycode",c)}})},nextPage:function(){for(var a=document.getElementsByClassName("extraChild"),b=0;b<a.length;b++)if("none"!=a[b].style.display)for(var c=a[b].getElementsByClassName("inp-cage"),d=0;d<c.length;d++){if(""==c[d].value)return void jAlert("请输入儿童年龄!");if(c[d].value<2||c[d].value>12)return void jAlert("儿童年龄不符合标准!")}for(var e=$(".origin").html(),f=$(".destination").html(),g=$(".origin").attr("data-citycode"),h=$(".destination").attr("data-citycode"),i=$("#startData").attr("data-startdata")+"T00:00:00",j=$("#returnData").attr("data-returndata")+"T00:00:00",k=$("#mstartday").html(),l=$("#mendday").html(),m=$(".double-week-one").html(),n=$(".double-week-two").html(),o=[],p=[],q=$(".hotelInfo_numb_people"),r=0;r<q.length;r++){var s={},t=[],u=[],v=parseInt(q[r].querySelector("#adult-people-number").innerHTML),w=parseInt(q[r].querySelector(".child-number").innerHTML),x=q[r].querySelector(".extraChild"),y=x.querySelectorAll(".numbList");if(1==v&&1==w)u.push(q[r].querySelector("input").value);else if(1==v&&2==w)u.push(q[r].querySelectorAll("input")[0].value),t.push(q[r].querySelectorAll("input")[1].value);else if(2==v||3==v)for(var z=0;z<y.length;z++){var A=y[z],B=A.querySelector(".icon.noselect");1==w?B.className.indexOf("ico_select")>-1?u.push(A.parentNode.querySelector("input").value):t.push(A.parentNode.querySelector("input").value):2==w&&(u.push(q[r].querySelectorAll("input")[0].value),t.push(q[r].querySelectorAll("input")[1].value))}u.length>0?s.childWithBed=u:void 0,t.length>0?s.childWithOutBed=t:void 0,s.adult=v,p.push(w),o.push(s)}for(var C=0,D=0,E=0,F=0;F<o.length;F++)D+=o[F].adult,o[F].childWithBed&&(E+=o[F].childWithBed.length),o[F].childWithOutBed&&(E+=o[F].childWithOutBed.length);C=D+E;var G={FromCityNameCN:e,ToCityNameCN:f,FromCity:g,ToCity:h,DepartDate:i,ReturnDate:j,PeopleNum:C,AdultNum:D,ChildNum:E,RoomInfo:o},H={FromCityNameCN:e,ToCityNameCN:f,FromCityCode:g,ToCityCode:h,DepartDate:k,ReturnDate:l,StardWeek:m,EndWeek:n,RoomInfo:o,ChildNum:p};localStorage.setItem("searchInfo",JSON.stringify(G)),sessionStorage.setItem("cacheSearch",JSON.stringify(H)),window.location.href="ticket_hotel_choose.html"},init:function(){window.sessionStorage.removeItem("flightHotelAllData"),this.initRoom(),this.add_subtract()}};hf_search.init(),$("#search-button").click(hf_search.nextPage);