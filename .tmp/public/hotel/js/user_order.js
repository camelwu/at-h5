/*! asiatravel FE team at-h5-nodejs-----2016-05-19T16:09:38 */
function url2json(a){if(a){for(var b={},c=a.split("?"),d=c[1].split("&"),e=0;e<d.length;e++){var f=d[e].split("=");b[f[0]]=f[1]}return b}}function styleChange(a,b){var c=document.getElementById(a);c.value==b?c.style.color="#d1d1d1":c.style.color="#484848",c.onfocus=function(){this.value==b&&(this.value="",this.style.color="#484848")},c.onblur=function(){this.value||(this.value=b,this.style.color="#d1d1d1")}}function styleChange2(a,b,c){for(var d=document.getElementById(a),e=lsf_myweb.getbyclass(d,b),f=0;f<e.length;f++)e[f].value==c?e[f].style.color="#d1d1d1":e[f].style.color="#484848",e[f].onfocus=function(){this.value==c&&(this.value="",this.style.color="#484848")},e[f].onblur=function(){this.value||(this.value=c,this.style.color="#d1d1d1")}}function uoHisData(){var a=JSON.parse(window.localStorage.getItem("user_order_storage12345"));return a?(fake_data.GuestContactNo=a.GuestContactNo,fake_data.GuestEmail=a.GuestEmail,void(fake_data.guestName=a.guestName)):void(fake_data.guestName=[])}var lsf_myweb={getbyid:function(a){return document.getElementById(a)},getbytag:function(a,b){return a.getElementsByTagName(b)},getbyclass:function(a,b){if(a.getElementsByClassName)return a.getElementsByClassName(b);for(var c=[],d=a.getElementsByTagName("*"),e=new RegExp("\\b"+b+"\\b","g"),f=0;f<d.length;f++)-1!=d[f].className.search(e)&&c.push(d[f]);return c},bind:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},stopPropagation:function(a){var b=ev||a;b.stopPropagation?b.stopPropagation():b.cancelBubble=!0},addClass:function(a,b){if(a.className){var c=new RegExp("\\b"+b+"\\b","g");-1==a.className.search(c)&&(a.className+=" "+b)}else a.className=b},removeClass:function(a,b){if(a.className){var c=new RegExp("\\b"+b+"\\b","g");-1!=a.className.search(c)&&(a.className=a.className.replace(c,"").replace(/^\s+|\s+$/g,"").replace(/\s+/g," "),a.className||a.removeAttribute("class"))}},payment:function(a){switch(parseInt(a)){case 1:return"预付";case 2:return"到付";default:return"请选择支付方式"}}};$(window).load(function(){var a=document.getElementById("uo_c1_info"),b=null;b=setInterval(function(){""!=a.innerHTML&&($("#status-h").fadeOut(),$("#preloader").delay(400).fadeOut("medium"),clearInterval(b))},30)});var RoomCode,fake_data={},myUrl=window.location.href;for(var name in url2json(myUrl))"roomCode"==name&&(RoomCode=url2json(myUrl)[name]);fake_data.NumOfRoom=JSON.parse(localStorage.getItem("hotelStorage12345")).NumRoom||1;var user_order_storage2=localStorage.getItem("hotelDetailData");fake_data.HotelGenInfo=JSON.parse(user_order_storage2).data.data[0].hotelGenInfo,fake_data.dateInfo=JSON.parse(user_order_storage2).data.data[0].dateInfo;for(var HotelRoomsList=JSON.parse(user_order_storage2).data.data[0].hotelRoomsList,i=0;i<HotelRoomsList.length;i++)for(var j=0;j<HotelRoomsList[i].roomList.length;j++)if(HotelRoomsList[i].roomList[j].roomCode==RoomCode){fake_data.MinAvgPrice=HotelRoomsList[i].minAvgPrice,fake_data.RoomTypeCode=HotelRoomsList[i].roomTypeCode,fake_data.RoomTypeName=HotelRoomsList[i].roomTypeName;for(var name in HotelRoomsList[i].roomList[j])fake_data[name]=HotelRoomsList[i].roomList[j][name]}var hoPos=window.localStorage.getItem("hoPos");if("dom"==hoPos){var uo_con3=document.getElementById("uo_con3");uo_con3.removeChild(uo_con3.children[2])}uoHisData(),function(){function a(){for(var a=lsf_myweb.getbyclass(o,"uo_lastname"),b=lsf_myweb.getbyclass(o,"uo_firstname"),c=0;c<a.length;c++)c<fake_data.guestName.length&&(a[c].value=fake_data.guestName[c].GuestLastName,b[c].value=fake_data.guestName[c].GuestFirstName);var d=document.getElementById("uo_c3_tele"),e=document.getElementById("uo_c3_email");fake_data.GuestContactNo&&""!=fake_data.GuestContactNo&&(d.value=fake_data.GuestContactNo),fake_data.GuestEmail&&""!=fake_data.GuestEmail&&(e.value=fake_data.GuestEmail)}function b(a){var b=new String(a).length,c=new String(a).indexOf(".");return c>-1?b-c-1:0}function c(a,b){var c=Math.pow(10,b);return parseInt(a*c,10)/c}function d(a,d,e,f,g,h,i,j){var k=document.getElementById(a),l=document.getElementById(d),m=document.getElementById(e),n=document.getElementById(f),o=document.getElementById(g),p=b(j.totalPrice),q=parseFloat(j.totalPrice)*parseFloat(j.NumOfRoom),r=parseFloat(j.totalPriceCNY)*parseFloat(j.NumOfRoom);if(k.innerHTML=j.NumOfRoom+"间×"+j.dateInfo.totalNight+"晚",1==parseInt(j.paymentModeID))l.innerHTML="￥"+parseFloat(j.avgPriceCNY)*parseFloat(j.NumOfRoom)*parseInt(j.dateInfo.totalNight),m.innerHTML="￥"+1e3*parseFloat(j.taxChargesCNY)*parseFloat(j.NumOfRoom)*parseInt(j.dateInfo.totalNight)/1e3,n.innerHTML="付款方式："+lsf_myweb.payment(j.paymentModeID),o.innerHTML=parseFloat(j.totalPriceCNY)*parseFloat(j.NumOfRoom);else if(2==parseInt(j.paymentModeID)){var s=document.getElementById(h),t=document.getElementById(i);l.innerHTML="SGD"+parseFloat(j.avgPrice)*parseFloat(j.NumOfRoom)*parseInt(j.dateInfo.totalNight),m.innerHTML="SGD"+1e3*parseFloat(j.taxCharges)*parseFloat(j.NumOfRoom)*parseInt(j.dateInfo.totalNight)/1e3,n.innerHTML="付款方式："+lsf_myweb.payment(j.paymentModeID),s.innerHTML=p>0?c(q,p):q,t.innerHTML="约￥"+(p>0?c(r,p):r)}fake_data.calcuTotalPrice=p>0?c(q,p):q,fake_data.calcuTotalPriceCNY=p>0?c(r,p):r,localStorage.setItem("user_order_storage12345",JSON.stringify(fake_data))}$(window).load(function(){$("#status-h").fadeOut(),$("#preloader").delay(400).fadeOut("medium")});var e=(document.getElementById("all_elements"),document.getElementById("uo_back")),f=document.getElementById("uo_c2_i1"),g=document.getElementById("uo_c2_i2"),h=document.getElementById("uo_c1_info"),i=document.getElementById("uo_c2_num"),j=document.getElementById("uo_or_infor"),k=document.getElementById("uo_con3"),l=document.getElementById("uo_confirm"),m=!0;e.onclick=function(){window.history.go(-1)},1==parseInt(fake_data.paymentModeID)?(lsf_myweb.getbyid("uo_or_sumBox1").style.display="block",lsf_myweb.getbyid("uo_or_sumBox2").style.display="none",lsf_myweb.getbyid("toPayExp").style.display="none"):2==parseInt(fake_data.paymentModeID)&&(lsf_myweb.getbyid("uo_or_sumBox1").style.display="none",lsf_myweb.getbyid("uo_or_sumBox2").style.display="block",lsf_myweb.getbyid("toPayExp").style.display="block");var h=document.getElementById("uo_c1_info");h.innerHTML=fake_data.cancellationDesc;var n=document.getElementById("uo_con2_chil1");n.innerHTML="<h3>"+fake_data.HotelGenInfo.hotelName+'</h3><p class="uo_c2_infor">'+fake_data.dateInfo.CheckInDate.split("-")[0]+"年"+fake_data.dateInfo.CheckInDate.split("-")[1]+"月"+fake_data.dateInfo.CheckInDate.split("-")[2]+"日-"+fake_data.dateInfo.CheckOutDate.split("-")[0]+"年"+fake_data.dateInfo.CheckOutDate.split("-")[1]+"月"+fake_data.dateInfo.CheckOutDate.split("-")[2]+"日 -"+fake_data.dateInfo.totalNight+'晚（目的地时间为准）</p><p class="uo_house">房型：'+fake_data.RoomTypeName+"</p>",i.innerHTML=fake_data.NumOfRoom,parseInt(fake_data.NumOfRoom)>1&&parseInt(fake_data.NumOfRoom)<10&&(f.style.background='url("../images/hotelbtn.png") 0 0px no-repeat',f.style.backgroundSize="23px 150px");for(var o=document.getElementById("uo_c3_peoBox"),p=0;p<parseInt(i.innerHTML);p++)"inter"==hoPos?o.innerHTML+='<div class="uo_c3_peo"><div class="uo_c3_div1">房间'+(p+1)+'入住人</div><div class="uo_c3_infor"><input type="text" value="" placeholder="姓（如：Li）" class="uo_lastname"  /><input type="text" value="" placeholder="名（如：Shimin）" class="uo_firstname"  /></div></div>':"dom"==hoPos&&(o.innerHTML+='<div class="uo_c3_peo"><div class="uo_c3_div1">房间'+(p+1)+'入住人</div><div class="uo_c3_infor"><input type="text"  placeholder="姓（如：李）" class="uo_lastname"  /><input type="text"  placeholder="名（如：世民）" class="uo_firstname"  /></div></div>');a(),styleChange("uo_c3_tele","用于接收短信通知"),"inter"==hoPos?(styleChange("uo_c3_email","用于接收邮件通知"),styleChange2("uo_c3_peoBox","uo_lastname","姓（如：Zhang）"),styleChange2("uo_c3_peoBox","uo_firstname","名（如：San）")):"dom"==hoPos&&(styleChange2("uo_c3_peoBox","uo_lastname","姓（如：张）"),styleChange2("uo_c3_peoBox","uo_firstname","名（如：三）")),d("uo_hid_p2","uo_hid_span2","uo_hid_span3","uo_hid_met","uo_or_sum","uo_or_sum2","uo_or_sum2CNY",fake_data),lsf_myweb.bind(f,"click",function(){var a=document.getElementById("uo_c3_peoBox");i.innerHTML=parseInt(i.innerHTML)-1,parseInt(i.innerHTML)<1?i.innerHTML=1:(a.removeChild(a.children[a.children.length-1]),"inter"==hoPos?(styleChange2("uo_c3_peoBox","uo_lastname","姓（如：Zhang）"),styleChange2("uo_c3_peoBox","uo_firstname","名（如：San）")):"dom"==hoPos&&(styleChange2("uo_c3_peoBox","uo_lastname","姓（如：张）"),styleChange2("uo_c3_peoBox","uo_firstname","名（如：三）"))),parseInt(i.innerHTML)<=1&&(f.style.background='url("../images/hotelbtn.png") 0 -27px no-repeat',f.style.backgroundSize="23px 150px"),parseInt(i.innerHTML)<10&&(g.style.background='url("../images/hotelbtn.png") 0 -55px no-repeat',g.style.backgroundSize="23px 150px"),fake_data.NumOfRoom=parseInt(i.innerHTML),localStorage.setItem("user_order_storage12345",JSON.stringify(fake_data)),d("uo_hid_p2","uo_hid_span2","uo_hid_span3","uo_hid_met","uo_or_sum","uo_or_sum2","uo_or_sum2CNY",fake_data)}),lsf_myweb.bind(g,"click",function(){var a=document.getElementById("uo_c3_peoBox"),b=i.innerHTML;if(i.innerHTML=parseInt(i.innerHTML)+1,parseInt(i.innerHTML)>10)i.innerHTML=10;else{for(var c=parseInt(b);c<parseInt(i.innerHTML);c++){var e=document.createElement("div");e.className="uo_c3_peo","inter"==hoPos?e.innerHTML='<div class="uo_c3_div1">房间'+(c+1)+'入住人</div><div class="uo_c3_infor"><input type="text" value="姓（如：Zhang）" class="uo_lastname"  /><input type="text" value="名（如：San）" class="uo_firstname"  /></div>':"dom"==hoPos&&(e.innerHTML='<div class="uo_c3_div1">房间'+(c+1)+'入住人</div><div class="uo_c3_infor"><input type="text" value="姓（如：张）" class="uo_lastname"  /><input type="text" value="名（如：三）" class="uo_firstname"  /></div>'),a.appendChild(e)}"inter"==hoPos?(styleChange2("uo_c3_peoBox","uo_lastname","姓（如：Zhang）"),styleChange2("uo_c3_peoBox","uo_firstname","名（如：San）")):(hoPos="dom")&&(styleChange2("uo_c3_peoBox","uo_lastname","姓（如：张）"),styleChange2("uo_c3_peoBox","uo_firstname","名（如：三）"))}parseInt(i.innerHTML)>1&&(f.style.background='url("../images/hotelbtn.png") 0 0px no-repeat',f.style.backgroundSize="23px 150px"),parseInt(i.innerHTML)>=10&&(g.style.background='url("../images/hotelbtn.png") 0 -84px no-repeat',g.style.backgroundSize="23px 150px"),fake_data.NumOfRoom=parseInt(i.innerHTML),localStorage.setItem("user_order_storage12345",JSON.stringify(fake_data)),d("uo_hid_p2","uo_hid_span2","uo_hid_span3","uo_hid_met","uo_or_sum","uo_or_sum2","uo_or_sum2CNY",fake_data)}),lsf_myweb.bind(j,"click",function(){var a=this.getElementsByTagName("i")[0];if(m){a.style.background="url(../images/ui/icons1.png) -76px -38px ",a.style.backgroundSize="400px 120px",lsf_myweb.getbyid("uo_hid").style.height="100%",lsf_myweb.getbyid("uo_hid_con").style.marginBottom="38px";var b=document.getElementById("uo_hid_shadow");lsf_myweb.bind(b,"click",function(){a.style.background="url(../images/ui/icons1.png) -51px -38px ",a.style.backgroundSize="400px 120px",lsf_myweb.getbyid("uo_hid").style.height="0",lsf_myweb.getbyid("uo_hid_con").style.marginBottom="-320px",m=!0})}else a.style.background="url(../images/ui/icons1.png) -51px -38px ",a.style.backgroundSize="400px 120px",lsf_myweb.getbyid("uo_hid").style.height="0",lsf_myweb.getbyid("uo_hid_con").style.marginBottom="-320px";m=!m}),lsf_myweb.bind(l,"click",function(){function a(a){for(var b=0;b<a.length;b++)return a[b].charCodeAt(0)>=19968&&a[b].charCodeAt(0)<=40869}var b=(lsf_myweb.getbyclass(k,"uo_c3_infor"),lsf_myweb.getbyclass(k,"uo_lastname")),c=lsf_myweb.getbyclass(k,"uo_firstname"),d=document.getElementById("uo_c3_tele"),e=document.getElementById("uo_c3_email");if(fake_data.guestName=[],"inter"==hoPos)for(var f=0;f<c.length;f++){if("姓（如：Zhang）"==b[f].value)return void jAlert("请输入英文姓或名");if(a(b[f].value))return void jAlert("请输入英文姓或名");if(a(c[f].value))return void jAlert("请输入英文姓或名");if("名（如：San）"==c[f].value)return void jAlert("请输入英文姓或名");fake_data.guestName.push({GuestFirstName:c[f].value,GuestLastName:b[f].value})}else if("dom"==hoPos)for(var f=0;f<c.length;f++){if("姓（如：张）"==b[f].value)return void jAlert("请输入姓");if("名（如：三）"==c[f].value)return void jAlert("请输入名");fake_data.guestName.push({GuestFirstName:c[f].value,GuestLastName:b[f].value})}if("用于接收短信通知"==d.value)return void jAlert("请输入手机号");if(!vlm.Utils.validate.mobileNo(d.value))return void jAlert("手机号格式错误");if(fake_data.GuestContactNo=d.value,e){if("用于接收邮件通知"==e.value)return void jAlert("请输入邮箱");if(!vlm.Utils.validate.email(e.value))return void jAlert("邮箱格式错误");fake_data.GuestEmail=e.value}window.localStorage.setItem("user_order_storage12345",JSON.stringify(fake_data)),location.href="/payment/payment.html?type=Hotle"}),function(a){a(document).ready(function(){window.addEventListener("load",function(){FastClick.attach(document.body)},!1)})}(jQuery)}();