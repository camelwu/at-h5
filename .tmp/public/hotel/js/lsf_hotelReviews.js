/*! asiatravel FE team at-h5-nodejs-----2016-05-19T15:21:43 */
var lsf_myweb={getbyid:function(a){return document.getElementById(a)},getbytag:function(a,b){return a.getElementsByTagName(b)},getbyclass:function(a,b){if(a.getElementsByClassName)return a.getElementsByClassName(b);for(var c=[],d=a.getElementsByTagName("*"),e=new RegExp("\\b"+b+"\\b","g"),f=0;f<d.length;f++)-1!=d[f].className.search(e)&&c.push(d[f]);return c},addClass:function(a,b){if(a.className){var c=new RegExp("\\b"+b+"\\b","g");-1==a.className.search(c)&&(a.className+=" "+b)}else a.className=b},bind:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},url2json:function(a){if(a){for(var b={},c=a.split("?"),d=c[1].split("&"),e=0;e<d.length;e++){var f=d[e].split("=");b[f[0]]=f[1]}return b}}};!function(){function a(a){var c=b(a).n,d=b(a).a,e=c;return e>=110?a.substring(0,d)+"...":a}function b(a){var b={};b.comments=a;for(var c=110,d=0,e=0;e<a.length;e++)d+=a.charCodeAt(e)>=19968&&a.charCodeAt(e)<=40869?3:1,c>=d&&(b.a=e);return b.n=d,b}function c(a){if(a=a||{},a.HotelID){var b={Parameters:'{"HotelID":'+a.HotelID+',"CultureName":"en - US" }',ForeEndType:3,Code:"0011"};return vlm.loadJson("",JSON.stringify(b),d)}}function d(a){a.success?e(a.data):(vlm.loadend(),jAlert(a.message))}function e(c){function d(b,c){var h=b,j=c,k=j-h;if(j<g.length){for(var l=h;j>l;l++){for(var m=parseFloat(g[l].avgReviewerRating),n="",o=0;5>o;o++)n+=m>=o+1?'<li class="fl" style="background:url(../images/ui/icons1.png) -0.3rem -3.8rem;background-size:40rem 12rem;"></li>':m>o&&o+1>m?'<li class="fl" style="background:url(../images/ui/icons1.png) -1.4rem -3.8rem;background-size:40rem 12rem;"></li>':'<li class="fl" style="background:url(../images/ui/icons1.png) -2.6rem -3.8rem;background-size:40rem 12rem;"></li>';i+='<div class="reBox"><div class="clearfix lsf_reTitle"><h2 class="fl">'+g[l].title+'</h2><ol class="clearfix fr lsf_reSta">'+n+'</ol></div><p class="clearfix comments"><span class="com_cont">'+a(g[l].comments)+'</span></p><em class="fr drop_down"><i></i></em><div class="lsf_reUser"><span class="reu_span1"><b class="fl">'+g[l].reviewerName+'</b><i class="fl hr_city">'+g[l].countryName+'</i></span><span class="reu_span2"><em class="fr">'+g[l].createdDate.substring(0,g[l].createdDate.indexOf("T"))+"</em></span></div></div>"}lsf_myweb.getbyid("lsf_reDiscuss").innerHTML+=i,e(),f(),i="";var p=document.createElement("div");p.innerHTML="加载更多",lsf_myweb.addClass(p,"hr_more"),lsf_myweb.getbyid("lsf_reDiscuss").appendChild(p),lsf_myweb.bind(p,"click",function(){this.style.display="none",h=j,j=h+k,d(h,j)})}else{for(var l=h;l<g.length;l++){for(var m=parseFloat(g[l].avgReviewerRating),n="",o=0;5>o;o++)n+=m>=o+1?'<li class="fl" style="background:url(../images/ui/icons1.png) -0.3rem -3.8rem;background-size:40rem 12rem;"></li>':m>o&&o+1>m?'<li class="fl" style="background:url(../images/ui/icons1.png) -1.4rem -3.8rem;background-size:40rem 12rem;"></li>':'<li class="fl" style="background:url(../images/ui/icons1.png) -2.6rem -3.8rem;background-size:40rem 12rem;"></li>';i+='<div class="reBox"><div class="clearfix lsf_reTitle"><h2 class="fl">'+g[l].title+'</h2><ol class="clearfix fr lsf_reSta">'+n+'</ol></div><p class="clearfix comments"><span class="com_cont">'+a(g[l].comments)+'</span></p><em class="fr drop_down"><i></i></em><div class="lsf_reUser"><span class="clearfix reu_span1"><b class="fl">'+g[l].reviewerName+'</b><i class="fl">'+g[l].countryName+'</i></span><span class="clearfix reu_span2"><em class="fr">'+g[l].createdDate.substring(0,g[l].createdDate.indexOf("T"))+"</em></span></div></div>"}lsf_myweb.getbyid("lsf_reDiscuss").innerHTML+=i,e(),f()}}function e(){for(var a=lsf_myweb.getbyclass(lsf_myweb.getbyid("lsf_reDiscuss"),"com_cont"),c=(lsf_myweb.getbyclass(lsf_myweb.getbyid("lsf_reDiscuss"),"comments"),0);c<a.length;c++)b(a[c].innerHTML).n<=110&&(lsf_myweb.getbyclass(lsf_myweb.getbyid("lsf_reDiscuss"),"drop_down")[c].style.display="none")}function f(){for(var a=lsf_myweb.getbyclass(lsf_myweb.getbyid("lsf_reDiscuss"),"reBox"),b=0;b<a.length;b++)!function(b){var c=lsf_myweb.getbyclass(a[b],"comments")[0],d=lsf_myweb.getbyclass(a[b],"drop_down");d.length>0&&(d[0].onclick=function(a){a||event;this.style.display="none";var d=c.firstElementChild||c.firstChild;d.innerHTML=g[b].comments})}(b)}if(c){var g=c[0].reviewCommentsList,h="<section><p>设施<i>"+c[0].reviewRatingsList[0].scoringScaleID+'</i>分</p><p class="lsf_gra_p2">客房<i>'+c[0].reviewRatingsList[1].scoringScaleID+"</i>分</p></section><section><p>地点<i>"+c[0].reviewRatingsList[3].scoringScaleID+'</i>分</p><p class="lsf_gra_p2">服务<i>'+c[0].reviewRatingsList[4].scoringScaleID+'</i>分</p></section><section class="last_sec"><p>清洁度<i>'+c[0].reviewRatingsList[2].scoringScaleID+'</i>分</p><p class="lsf_gra_p2">物有值<i>'+c[0].reviewRatingsList[5].scoringScaleID+"</i>分</p></section",i="";lsf_myweb.getbyid("lsf_reDetail_grade").innerHTML=h,d(0,10)}}var f=document.getElementById("hr_back"),g=window.location.href,h=lsf_myweb.url2json(g).HotelID,i=new Number(lsf_myweb.url2json(g).TAAvgRating);f.onclick=function(){window.history.go(-1)},$(document).ready(function(){window.addEventListener("load",function(){FastClick.attach(document.body)},!1),vlm.loadend()}),lsf_myweb.getbyid("TAAvgRating").innerHTML=i.toFixed(1),lsf_myweb.getbyid("TAReviewCount").innerHTML=lsf_myweb.url2json(g).TAReviewCount+"人点评",c({HotelID:h})}();