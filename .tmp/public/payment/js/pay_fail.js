/*! asiatravel FE team at-h5-nodejs-----2016-05-19T15:21:43 */
!function(){var a,b;(function(){var c={Hotle:{id:1,detailCode:"0013",name:"Hotle"},Flight:{id:2,detailCode:"3006",name:"Flight"},Scenic:{id:3,detailCode:"0095",name:"Scenic"},Tour:{id:4,detailCode:"0095",name:"Tour"},FlightHotle:{id:5,detailCode:"50100007",name:"FlightHotle"},FlightHotelTour:{id:6,name:"机+酒+景",detailCode:"60100013",payMentCode:"60100011"}},d={bindbindPaymentTypeEvent:function(){$("#fl").on("click",function(){window.location.href="../index.html"}),$("#fr").on("click",function(){window.location.href="payment.html?bookingRefNo="+b+"&type="+a.name}),$("#fr2").on("click",function(){window.location.href="../user/user-allorder.html"})}},e=function(b,c,d,e){var f;f=1==a.id?{Parameters:{BookingReferenceNo:c},ForeEndType:d,Code:a.detailCode}:{Parameters:{BookingRefNo:c},ForeEndType:d,Code:a.detailCode},vlm.loadJson("",JSON.stringify(f),function(b){if(b.success){if(1==a.id)b.data[0].bookingRefNo=b.data[0].bookingReferenceNo,b.data[0].productName=b.data[0].hotelName,b.data[0].totalPrice=parseInt(b.data[0].totalRoomRate);else if(2==a.id)b.data.productName=b.data.flightInfo.cityNameFrom+"-"+b.data.flightInfo.cityNameTo,b.data.totalPrice=b.data.totalFlightPrice;else if(3==a.id){b.data.productName=b.data.packageName;for(var c=0,d=0;d<=b.data.chargeDetails.length-1;d++)"PAYMENT"!==b.data.chargeDetails[d].category&&(c+=b.data.chargeDetails[d].totalAmount);b.data.totalPrice=c}else if(4==a.id){b.data.productName=b.data.packageName;for(var e=0,d=0;d<=b.data.chargeDetails.length-1;d++)"PAYMENT"!==b.data.chargeDetails[d].category&&(e+=b.data.chargeDetails[d].totalAmount);b.data.totalPrice=e}else 5==a.id?(b.data.productName=b.data.flightInfo.cityNameFrom+"-"+b.data.flightInfo.cityNameTo,b.data.totalPrice=b.data.totalFlightPrice):6==a.id&&(b.data.productName=b.data.flightInfo.cityNameFrom+"-"+b.data.flightInfo.cityNameTo,b.data.totalPrice=b.data.totalFlightPrice);var f=template("vlm_login",b.data);$("#vlm_login").html(f)}})},f=function(){a=c[vlm.getpara("type")],b=vlm.getpara("bookingRefNo"),d.bindbindPaymentTypeEvent(),e(a,b,3,function(a){if(a.success){a.data.totalPrice=a.data.totalFlightPrice;var b=template("vlm_login",a.data);$("#vlm_login").html(b),vlm.init()}else jAlert("网络请求错误！")})};return{InitPage:f()}})()}();