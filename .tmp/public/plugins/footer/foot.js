/*! asiatravel FE team at-h5-nodejs-----2016-05-19T15:21:43 */
var footer=function(){"use strict";var a,b,c,d={},e=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},f=function(a){var b=new Array(" ","one","two","three","four","five","six","seven","eight","nine");return a=isNaN(parseInt(a))?0:parseInt(a),b[a]},g=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},h=function(){var a,b=void 0==b?"http://"+window.location.host:b,c=window.location.href,d={home:["首页",b],user:["我的",b+"/user/user.html"]};if(c=="http://"+b+"/index.html"||c=="http://"+b+"/")a="home";else{var e=c.substr(b.length+1);""==e||"index.html"==e?a="home":"scenic/index.html"==e?a="find":"user/user.html"==e?a="user":"building.html"==e&&(a="find")}if(d.hasOwnProperty(a)){if(document.getElementById("menu")){var f=document.getElementById("menu");f.className="footer-menu-three-icons footer-menu"}else{var f=document.createElement("div");f.id="menu",f.className="footer-menu-three-icons footer-menu",document.body.appendChild(f)}var g="";for(var h in d){var i=h==a?"foot-"+h+"s":"foot-"+h;g+="<a href='"+d[h][1]+"' class='"+i+"'><i></i>"+d[h][0]+"</a>"}f.innerHTML=g}},i={bindEvent:function(){var d=this;g(b,"click",function(a){a=a||window.event;var c,e,f,g=a.target||a.srcElement;for(c=g.parentNode;c&&c!==b;)g=c,c=c.parentNode;for(e=0,f=g.getAttribute("data-type");g=g.previousSibling;)1==g.nodeType&&e++;d.showItems(e,f)}),g(c,"click",function(a){a=a||window.event;var b,c,e,f=a.target||a.srcElement;if(b=f.parentNode,"cancel"==f.className)d.remove();else if("clears"==f.className){var g=b.parentNode;d.resec(g)}else if("sure"==f.className)d.request();else if("LI"==f.tagName)if("screen_lf"==b.className){for(var e=b.getElementsByClassName("cur"),h=0;h<e.length;h++)if("cur"==e[h].className){e[h].className="";break}for(f.className="cur",c=0;f=f.previousSibling;)1==f.nodeType&&c++;for(var i=b.nextSibling,j=i.getElementsByTagName("ul"),h=0;h<j.length;h++)j[h].style.display="none";j[c].style.display="block"}else{var k=parseInt(b.getAttribute("data-sel")),l=parseInt(b.getAttribute("data-theme"));switch(k){case 1:for(var e=b.getElementsByClassName("cur"),h=0;h<e.length;h++)if("cur"==e[h].className){e[h].className="";break}f.className="cur";break;case 2:var m=b.firstChild.innerHTML;if(m.indexOf("不限")>-1)if(f==b.firstChild){for(var e=b.getElementsByTagName("li"),h=1;h<e.length;h++)e[h].className="";f.className="cur"==f.className?"":"cur"}else"cur"==b.firstChild.className?b.firstChild.className="":null,f.className="cur"==f.className?"":"cur";else f.className="cur"==f.className?"":"cur"}1!=l&&3!=l||d.request()}}),g(document,"click",function(b){b=b||window.event;var e=b.target||b.srcElement,f=e.parentNode;return(e.className.indexOf("header_back")>-1||f.className.indexOf("header_back")>-1)&&"none"==a.style.display&&"1.48rem"==c.firstChild.style.top?(d.showItems(0,3),b&&b.preventDefault?b.preventDefault():window.event.returnValue=!1,!1):void(e!=a&&e!=c||d.remove())})},create:function(){this.createMask(),this.createContainer(),b=document.createElement("footer"),b.className="footer_"+f(e(footer.data)),b.style.position="fixed",b.style.left=0,b.style.bottom=0,b.style.width="100%",b.style.height="0.98rem",b.style.background="#4a4a4a",b.style.zIndex=130,b.style.fontSize="0.24rem";var a=footer.data,c=[];for(var d in a)c.push("<dl class="+a[d].c+" id="+d+" data-type="+a[d].type+"><dt></dt><dd>"+a[d].title+"</dd></dl>"),this.createSec(a[d].s,a[d].c,a[d].type,a[d].key,a[d].listData);return b.innerHTML=c.join(""),document.body.appendChild(b),this.bindEvent(),this},createContainer:function(){return c?c:(c=document.createElement("span"),c.style.position="fixed",c.style.zIndex=110,c.style.width="100%",c.style.left=0,c.style.bottom=0,document.body.appendChild(c),void 0)},createMask:function(){return a?a:(a=document.createElement("div"),a.style.display="none",a.style.position="fixed",a.style.left=0,a.style.top=0,a.style.width="100%",a.style.height="100%",a.style.background="rgba(0,0,0,0.6)",a.style.zIndex=100,document.body.appendChild(a),void 0)},createSec:function(a,b,d,e,f){var g="",h="",i="",j=0,k=f.length,l="",a=a?a:1,m=[],n=['<ul data-sel="'+a+'" data-theme="'+d+'" data-key="'+e+'">',"</ul>"],o=['<ul class="screen_lf">',"</ul>"],p=['<div class="screen_rg">',"</div>"],h="",q=document.createElement("section");switch(b?q.className=b:null,e){case"airways":for(;k>j;j++)l=0==f[j].additionalPrice?' class="cur"':"",i+="<li"+l+' data-val="'+f[j].airwayCacheID+'" airwayCacheID="'+f[j].airwayCacheID+'" airwaySetID="'+f[j].airwaySetID+'"><div><img src="'+f[j].airwayLogo+'"></div><span class="airway_name">'+f[j].chineseName+'</span><div class="aw_price"><span>+￥</span><span>'+f[j].additionalPrice+'</span></div><b class="hft_icon"></b></li>';h=n[0]+i+n[1];break;case"filters":for(;k>j;j++){var r=f[j],s=r.item,t="";l=0==j?' class="cur"':"",m.push("<li"+l+' data-filterType="'+r.filterType+'">'+r.title+"</li>"),a=1==r.allowMultiSelect||"1"==r.allowMultiSelect?2:a,n[0]='<ul data-sel="'+a+'" data-theme="'+d+'" data-key="'+e+'" data-type="'+r.filterType+'">';for(var u=0;u<s.length;u++){var v=s[u];l="不限"==v.filterText?' class="cur"':"",t+="<li"+l+' data-val="'+v.filterValue+'">'+v.filterText+"<i></i></li>"}h+=n[0]+t+n[1]}break;case"locationList":for(;k>j;j++)l="",i+="<li"+l+' data-val="'+f[j]+'">'+f[j]+"<i></i></li>";h=n[0]+i+n[1];break;case"sortTypes":for(;k>j;j++)l=0==j?' class="cur"':"",i+="<li"+l+' data-val="'+f[j].sortValue+'">'+f[j].sortText+"<i></i></li>";h=n[0]+i+n[1];break;case"themes":for(;k>j;j++)l="",i+="<li"+l+' data-val="'+f[j].themeID+'">'+f[j].themeName+"</li>";h=n[0]+i+n[1];break;default:for(;k>j;j++)l=0==j?' class="cur"':"",i+="<li"+l+' data-val="'+j+'">'+f[j]+"</li>";h=n[0]+i+n[1]}switch(d){case 1:g=h;break;case 2:g='<div class="foot_screen_btn"><p class="cancel">取消</p><p class="clears">清空筛选</p><p class="sure">确定</p></div>',m.length>0?(g+='<div class="screen_box">',g+=o[0]+m.join("")+o[1],g+=p[0]+h+p[1],g+="</div>"):g+=h;break;case 3:g=h;break;default:g=""}return q.innerHTML=g,c?c.appendChild(q):(this.createContainer(),c.appendChild(q)),this},current:function(){return b},init:function(){var a=[].slice.call(arguments);a.length>0?b=document.querySelector(a[0]):b||this.create()},remove:function(){"none"!=a.style.display&&(a.style.display="none");var b=c.getElementsByTagName("section");"flight_company"==b[0].className?b[0].style.top="":b[0].style.bottom="";for(var d=1;d<b.length;d++)b[d].style.bottom=""},request:function(){for(var a=c.getElementsByTagName("ul"),d={},e=0;e<a.length;e++)if(a[e].getAttribute("data-key")){for(var f=[],g=a[e].getElementsByClassName("cur"),h=a[e].getAttribute("data-key"),i=0;i<g.length;i++)f.push(g[i].getAttribute("data-val"));"airways"==h?d.airways={airwaySetID:g[0].getAttribute("airwaySetID"),airwayCacheID:g[0].getAttribute("airwayCacheID")}:"filters"==h?d[a[e].getAttribute("data-key")]?d[a[e].getAttribute("data-key")].push({FilterType:a[e].getAttribute("data-type"),FilterValues:f}):(d[a[e].getAttribute("data-key")]=[],d[a[e].getAttribute("data-key")].push({FilterType:a[e].getAttribute("data-type"),FilterValues:f})):d[a[e].getAttribute("data-key")]=f}footer.result=d,this.remove(),"none"==b.style.display&&(b.style.display="block"),footer.callback&&footer.callback(d)},resec:function(a){for(var b=(a.getElementsByClassName("cur"),a.getElementsByTagName("ul")),c=0;c<b.length;c++)if(b[c].getAttribute("data-key")){var d=b[c].getElementsByTagName("li"),e=d[0].innerHTML;e.indexOf("不限")>-1?d[0].className="cur":d[0].className="";for(var f=1;f<d.length;f++)"cur"==d[f].className?d[f].className="":null}},showItems:function(d,e){if(0==e)return void that.request();if(!c)return"没找到section。";if(3==e)"1.48rem"==c.firstChild.style.top?(this.remove(),b.style.display="block"):(this.remove(),c.firstChild.style.top="1.48rem",b.style.display="none");else if("none"==a.style.display)a.style.display="block",c.childNodes[d].style.bottom="0.98rem";else if("0.98rem"==c.childNodes[d].style.bottom)this.remove();else{for(var f=0;f<c.childNodes.length;f++)"0.98rem"==c.childNodes[f].style.bottom&&(c.childNodes[f].style.bottom="");c.childNodes[d].style.bottom="0.98rem"}}};return{menu:h,filters:i,results:d}}();