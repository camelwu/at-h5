<!DOCTYPE html>
<html>
<head lang="en">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui">
  <link rel="stylesheet" href="./reset.css"/>
    <link rel="stylesheet" href="./index.css"/>
    <title>限时专享</title>
</head>
<body>

<div class="all_elements" id="app">

    <!--top start-->
    <div class = "topDiv">
        <a href="javascript:window.history.go(-1);">
            <i class="icon_back"></i>
        </a>
        <h3>限时专享</h3>
    </div>
    <!--banner start-->
    <section class="bannerDiv">
      <div class = "banner_imgDiv">
        <img :src="limitedExclusiveList.topBar.leGeneralMessage.imageUrl" alt=""/>
      </div>
      <div class = "banner_content">
        <p class = "banner_sale"><span class = "banner_sale_lowest">全网最低价</span><span class = "banner_sale_timer">距结束 <span>23</span>: <span>15</span>: <span>08</span></span></p>
        <p class = "banner_information">{{limitedExclusiveList.topBar.leGeneralMessage.title}}</p>
      </div>
      <div class = "banner_price clearfix">
        <div class = "fl">
          <p class = "banner_price_left">
            <span class = "price_num">￥<strong>{{limitedExclusiveList.topBar.leGeneralMessage.price}}</strong>起</span>
            <span class = "price_sum">仅限 <em>{{limitedExclusiveList.topBar.leGeneralMessage.totalNumber}}</em>份</span>
            <span class = "price_buy">已抢购 <em>50%</em></span>
          </p>
          <p class ="progress_bar"><span class = "bar_bg"></span><span class = "bar_show"></span></p>
        </div>
        <div class="fr"><span class = "limit_buy">立即抢购</span></div>
      </div>
    </section>
  <!--banner end-->
  <!--special start-->
    <section class = "specialDiv">
      <div class="special_title"><span></span><h3>限时优惠</h3><span></span></div>
      <ul class="special_link clearfix">
        <li @click="chooseTab(0)">酒店</li>
        <li @click="chooseTab(1)" >出境游</li>
        <li @click="chooseTab(2)" class = "special_link_last">酒+景</li>
      </ul>
      <div class = "special_content">
        <ul>
          <li v-for="item in currentItem" class = "clearfix">
            <div class = "special_imgDiv"><img :src="item.leGeneralMessage.imageUrl" alt=""/></div>
            <div class = "special_right">
              <p class = "special_right_content">{{item.leGeneralMessage.title}}</p>
              <p class = "special_right_price clearfix">
                <span class = "special_price_num">￥<strong>{{item.leGeneralMessage.price}}</strong>起/人</span>
                <span class = "fr progress_price">
                  <span class = "price_bg"></span>
                  <span class = "price_show"></span>
                </span>
              </p>
              <p class = "special_timer">
                <span class = "special_timer_sale">仅限<em>{{item.leGeneralMessage.totalNumber}}</em>份</span>
                <span class="fr special_timer_buy">已抢购50%</span>
              </p>
            </div>
          </li>
        </ul>
      </div>
    </section>
</div>
<script src="../js/jquery/jquery.min.js"></script>
<script src="../js/vlm.js"></script>
<script src="../js/vue/vue@2.0.8.js"></script>
<script>
  (function() {
    // 控制底部 footer 展示。
    vlm.init();
    var app = new Vue({
      el: '#app',
      data: {
        limitedExclusiveList:{},
        titleList:[],
        currentItem:{},

        selectedIndex:0
      },
      methods:{
        chooseTab:function(index){
        this.selectedIndex = index;
        this.currentItem=this.limitedExclusiveList.bottomBarList[this.selectedIndex].bottomBar;
       }
    },
      mounted: function () {
        var _this = this;
        function hotTopic(){
          var json = {
            "Parameters": {
            },
            "ForeEndType": 3,
            "Code": "10100041"
          };
          vlm.loadJson("", JSON.stringify(json), function(json) {
            console.log(json);
            if (json.success) {
              var data = json.data;
              _this.limitedExclusiveList = data.appLimitedExclusive;
              var array=[]
              for(var i=0;i<=data.appLimitedExclusive.bottomBarList.length-1;i++){
                array.push(data.appLimitedExclusive.bottomBarList[i].bottomBarCategory)
              }
              debugger;
              _this.titleList=array;
              _this.currentItem=data.appLimitedExclusive.bottomBarList[_this.selectedIndex].bottomBar;


            } else {
              console.log(json);
              jAlert("数据格式错误", "提示");
            }
          });
        }
        hotTopic();
      },

    });
  })();


</script>
</body>
</html>