<!DOCTYPE html>
<html>
	<head lang="cn">
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui"/>
		<meta name="apple-mobile-web-app-capable" content="yes"/>
		<meta name="apple-mobile-web-app-status-bar-style" content="green">
		<meta name="Keywords" content="亚洲旅行网">
		<meta name="Description" content="境外专业旅行服务提供机构">
		<title>检查android软键盘隐藏显示</title>
		<link href="styles/framework.css" 		 rel="stylesheet" type="text/css">
		<link href="styles/style.css"     		 rel="stylesheet" type="text/css">
		<link href="css/user.css"     		 rel="stylesheet" type="text/css">
	</head>
	<body>
		<div class="all-elements">
			<div class="header">
				<div id="add_quit" class="header-quit">
					取消
				</div>
				<h3>新增常用旅客</h3>
				<div id="add_finish" class="header-finish">
					完成
				</div>
			</div>
			<!-- Page Content-->
			<div class="user-content" id="ccs">
				<div class="addtra-title">
					旅客姓名<b id="aname_state" class="icon user-must"></b>
				</div>
				<form id="addForm" action="user-oftenInfo.html" method="get">
					<ul class="addtra-info">
						<li>
							<div>
								中文姓名
							</div>
							<input type="text" placeholder="确保与证件保持一致">
						</li>
						<li style="border: none;padding-bottom: 0;">
							<div>
								英文姓
							</div>
							<input type="text" placeholder="Surname,如Li(中文姓拼音)">
							<br>
						</li>
						<li>
							<div>
								英文名
							</div>
							<input type="text" placeholder="Given name,如Shimin(中文名拼音)">
						</li>
					</ul>
					<div class="addtra-title">
						证件
					</div>
					<ul class="addtra-info">
						<li>
							<b class="icons open-pho"></b>
							<div>
								证件类型
							</div>
							<div id="postCard" class="postCard">
								护照
							</div>
						</li>
						<li>
							<div>
								证件号
							</div>
							<input type="text" placeholder="确保与证件保持一致">
						</li>
						<li>
							<b class="icons open-pho"></b>
							<div class="birth-date">
								证件有效期
							</div>
							<input type="text" class="birth-cont" value="1990年1月9号" readonly="">
						</li>
						<li>
							<b class="icons open-pho"></b>
							<div>
								发证国家
							</div>
							<div class="country-btn">
								中国
							</div>
						</li>
					</ul>
					<div class="addtra-title">
						其他信息
					</div>
					<ul class="addtra-info">
						<li>
							<b class="icons open-pho"></b>
							<div>
								国籍
							</div>
							<div class="country-btn">
								中国
							</div>
						</li>
						<li>
							<div>
								性别
							</div>
							<div class="sex-cho-wrap">
								<span style="margin-right:15%"><b class="icon-h traveler-sex1" id="man"></b>男士</span>
								<span><b class="icon-h traveler-sex2" id="woman"></b>女士</span>
							</div>
						</li>
						<li>
							<b class="icons open-pho"></b>
							<div class="birth-date">
								出生日期
							</div>
							<input type="text" class="birth-cont" value="1990年1月9号" readonly="">
						</li>
					</ul>
					<div class="addtra-title">
						联系方式<div id="dv"></div>
					</div>
					<ul class="traveler-contect">
						<li>
							<div class="con-phone">
								手机号
								<div style="float:right;margin-right:10px;">
									+86
								</div>
							</div>

							<input type="text" placeholder="请确保手机号无误" id="mobile-cell-add">
						</li>
						<li>
							<div class="">
								邮箱
							</div>
							<input type="text" placeholder="常用邮箱" id="email-cell-add">
						</li>
					</ul>
				</form>
				<div class="con-text">
					为了您能顺利出行，请确保旅行结束日期至少比证件有效期早6个月
				</div>
			</div>
		</div>
	</body>
	<script src="js/lib/jquery.js"></script>
	<script>
		var timer, windowInnerHeight;
		function resize_page() {
			screen_width = $(window).width();
			screen_height = $(window).height();
//alert("rize="+screen_width+","+screen_height);
			
		};
		$(window).resize(resize_page);
		function eventCheck(e) {
			if (e) {//click,focus事件触发的
				
				var pos = $(e.target).position();alert($("#ccs").scrollTop()+","+pos.top+","+$("#ccs").css("top"));
				$("#ccs").scrollTop(pos.top);

				if (e.type == 'click') {//如果是点击事件启动计时器监控是否点击了键盘上的隐藏键盘按钮，没有点击这个按钮的事件可用，keydown中也获取不到keyCode值
					setTimeout(function() {//由于键盘弹出是有动画效果的，要获取完全弹出的窗口高度，使用了计时器
						windowInnerHeight = window.innerHeight;
						//获取弹出android软键盘后的窗口高度
						timer = setInterval(function() {
							eventCheck()
						}, 100);
						//100ms检查下窗口高度是否改变
					}, 500);

				} else {
					clearInterval(timer);
				}
			} else {//计时器执行的，需要判断窗口可视高度，如果改变说明android键盘隐藏了
				if (window.innerHeight > windowInnerHeight) {//这里逻辑可以更改下，有可能其他js事件会导致高度变化，这里就只做个简单判断了
					clearInterval(timer);
					
				}
			}
		}


		$('#mobile-cell-add').click(eventCheck).blur(eventCheck);
		//keydown/keyup获取按键值为0，keypress不执行
		$('#mobile-cell-add').keydown(function(e) {
			$('#dv').append('<br>keydown:' + e.keyCode);
		}).keyup(function(e) {
			$('#dv').append('<br>keyup:' + e.keyCode);
		}).keypress(function(e) {
			$('#dv').append('<br>press:' + e.keyCode);
		});
	</script>
</html>