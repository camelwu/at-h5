<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="user-scalable=no,initial-scale=1.0,maximum-scale=1.0 minimal-ui"/>
		<meta name="apple-mobile-web-app-capable" content="yes"/>
		<meta name="apple-mobile-web-app-status-bar-style" content="green">
		<meta name="Keywords" content="亚洲旅行网">
		<meta name="Description" content="境外专业旅行服务提供机构">
		<title>酒店详情 - 亚洲旅行网</title>
		<link href="styles/framework.css"	rel="stylesheet" type="text/css">
		<link href="styles/style.css"		rel="stylesheet" type="text/css">
		<style>
.open-arg {
	position: absolute;
    width: 10px;
    height: 20px;
    right: 0;
	background-position: 65% 3%;
}
.d-icon {
    background-image: url(../images/ui/icons.png);
    background-repeat: no-repeat;
    background-size: 243px 160px;
    display: inline-block;
}

.d-icons {
    width: 12px;
    height: 22px;
    position: absolute;
    left: 15px;
    top: 10px;
    background-image: url(../images/ui/icons.png);
    background-repeat: no-repeat;
    background-size: 243px 160px;
    display: inline-block;
}

.d1 {
    position: absolute;
    width: 21px;
    height: 22px;
    right: 15px;
    top: 10px;
    background-position: 59% 77%;
}

.d-p1 {
    font-size: 14px;
    font-weight: bold;
    margin: 0 auto;
    color: #ffffff;
    line-height: 22px;
    text-align: center;
}

.d-div1 {
    width: 100%;
}

.hotelPic {
    width: 100%;
    height: 62.5%;
}

.hotelPic2 {
    width: 100%;
    height: 160px;
}

.d-div2 {
    width: 100%;
    height: 50px;
    position: absolute;
    margin-top: -52px;
    background: rgba(0, 0, 0, 0.5);
}

.d-p4 {
    float: right;
    margin-right: 3%;
    margin-top: 12px;
    color: white;
    font-size: 2rem;
}

.d-ul2 {
    background-color: #fff;
    border-bottom: 1px solid #dfdfdd;
}
.d-ul2 li{
	list-style: none;
    font-size: 1.4rem;
    padding:15px 12px;
    border-bottom: 1px #dfdfdd solid;
    margin-bottom: 0;
    position: relative;
}
.d-ul2 li .open-arg{
	right:12px;
}
.d-ul2 li:first-child{
	padding-right:24px;
}
.d-ul1 li:last-child,.d-ul2 li:last-child{
	border-bottom: 0;
}
.d-ul1 li em,.d-ul2 li em{
	font-style: normal;
    float: right;
    font-size: 1.2rem;
    color: #ffb413;
}

.d-ul1 {
    background-color: #fff;
    border-bottom: 1px solid #dfdfdd;
}
.d-ul1 li{
	list-style: none;
    font-size: 1.4rem;
    padding:15px 12px 15px 0;
    margin:0 1.2rem;
    border-bottom: 1px #dfdfdd solid;
    margin-bottom: 0;
    position: relative;
}
.d-ul1 li:last-child{
	border-bottom: 0;
}
.d-ul1 li em{
	font-style: normal;
    float: right;
    font-size: 1.2rem;
    color: #ffb413;
}
.d-li1 {
    min-height: 50px;
    border-bottom: 1px solid #dfdfdd;
    position: relative;
}

.d-score {
    width: 75%;
    /*float: left;
    margin-top: 20px;*/
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    color: #484848;
    font-size: 0.8rem;
}

.d-score2 {
    float: left;
    margin-top: 20px;
    color: #484848;
    font-size: 0.8em;
}

.d-icon1 {
    position: absolute;
    right: 0;
    margin-top: 20px;
    display: block;
    width: 8px;
    height: 14px;
    background-image: url(../images/ui/icons.png);
    background-position: 65% 3%;
    background-size: 243px 160px;
}

.d-icon2 {
    display: inline-block;
    width: 15px;
    height: 10px;
    float: left;
    margin-left: 10px;
    margin-top: 20px;
    background-image: url(../images/ui/icon-h.png);
    background-size: 402px 174px;
    background-position: 20% 9%;
}

.d-p2 {
    float: right;
    margin-right: 15px;
    color: #ffbf4b;
    font-size: 1.2rem;
}

.d-p3 {
    float: left;
    margin-top: 20px;
    color: #484848;
    font-size: 1.3rem;
}

.d-div3 {
    float: left;
    margin-top: 10px;
    width: 60%;
    white-space: nowrap;
    text-overflow: ellipsis;
    overflow: hidden;
}

.d-p5 {
    display: inline-block;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    max-width: 75%;
    min-width: 5%;
    color: #484848;
    font-size: 1.3rem;
}

.d-icon3 {
    display: inline-block;
    width: 15px;
    height: 15px;
    margin-left: 5px;
    background-image: url(../images/ui/icons1.png);
    background-position: 27% 33.5%;
    background-size: 400px 120px;
}

.d-p6 {
    margin-top: 4px;
    max-width: 90%;
    color: #a1a1a1;
    font-size: 1.0rem;
}

.d-icon4 {
    display: block;
    float: right;
    width: 18px;
    height: 18px;
    margin-top: 20px;
    background-image: url(../images/ui/icons1.png);
    background-position: 12.6% 33%;
    background-size: 400px 120px;
    transition: none!important;
}

.price {
    float: right;
    margin-right: 25px;
    margin-top: 15px;
}

.price2 {
    float: right;
    margin-right: 10px;
    margin-top: 15px;
    position: absolute;
    right: 73px;
    top: -2px
}

.roomUl {
    width: 106%;
    list-style-type: none;
    position: relative;
    clear: both;
    display: none;
    margin-left: -3%;
    top: 7px;
    padding-left: 3%;
    background: rgb(223, 223, 221);
    overflow: hidden;
}

.d-p7 {
    margin-top: 4px;
    max-width: 80%;
    color: #484848;
    font-size: 1.0rem;
}

.d-but {
    width: 79px;
    height: 33px;
    float: right;
    border-radius: 5px;
    margin-top: 8px;
    text-align: center;
    line-height: 35px;
    background-color: #ffb412;
    color: white;
    font-size: 1.5rem;
}

.d-icon5 {
    display: block;
    position: absolute;
    right: 0;
    width: 18px;
    height: 18px;
    margin-top: 20px;
    background-image: url(../images/ui/icons1.png);
    background-position: 19% 33%;
    background-size: 400px 120px;
    transition:none!important;
}

.roomAll {
    position: absolute;
    overflow-x: hidden !important;
    overflow-y: scroll;
    width: 90%;
    height: 92%;
    min-height: 92%;
    max-height: 92%;
    top: 10%;
    left:5%;
    display: none;
    z-index: 11;
    border-radius: 4px;
}

.r-div {
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    position: fixed;
    background: rgba(0, 0, 0, 0.5);
    display: none;
    z-index: 7;
}

.room {
    width: 100%;
    height: 100%;
    overflow-x: hidden !important;
    overflow-y: scroll;
    background-color: white;
    position: absolute;
    left: 0;
    right: 0;
    color: #484848;
    display: block;
}

.r-top {
    width: 100%;
    height: 40px;
    padding: 1px;
    background-color: #ffb412;
}

.r-p1 {
    float: left;
    margin-top: 12px;
    margin-left: 15px;
    color: white;
    font-size: 1.4rem;
}

.r-icon1 {
    width: 22px;
    height: 22px;
    float: right;
    margin-right: 12px;
    margin-top: 10px;
    background-image: url(../images/ui/icon.png);
    background-position: 22% 33%;
    background-size: 397px 118px;
}

.r-div1 {
    width: 100%;
}

.r-ar {
    margin-top: 10px;
    margin-left: 15px;
    margin-right: 20px;
    margin-bottom: 10px;
    font-size: 1.1rem;
}

.r-p2 {
    margin-left: 15px;
    font-size: 1.4rem;
    color: #484848;
    margin-top: 10px
}

.r-ul {
    width: 94%;
    height: 110px;

    margin-top: 10px;
    margin-left: 20px;
}

.r-li {
    display: -moz-box;
    display: -ms-flexbox;
    display: -webkit-box;
    display: -webkit-flex;
    display: flex;
    float: left;
    list-style-type: none;
    width: 50%;
    margin-bottom: 10px;
}

.r-icon2 {
    width: 14px;
    height: 14px;
    display: block;
    background-image: url(../images/ui/icon-h.png);
    background-size: 402px 174px;
    background-position: 84% 10%;
}

.r-p3 {
    margin-left: 8px;
    font-size: 10px;
    color: #484848;
}

.roomMore {
    width: 106%;
    height: 100px;
    background: #dfdfdd;
    position: absolute;
    bottom: -200%;
    opacity: 0;
    display: none;
    margin: 0px -3%;
}

.roomMore .first, .roomMore .second {
    width: 100%;
    height: 50%;
}

.roomMore .first .left, .roomMore .second .left {
    display: inline-block;
    float: left;
    margin-top: 8px;

}

.roomMore .first .left .title, .roomMore .second .left .title {
    display: inline-block;
    color: #484848;
    font-size: 1.3rem;
}

.roomMore .first .left .more span, .roomMore .second .left .more span {
    margin-top: 4px;
    color: #484848;
    font-size: 0.8rem;
}

.roomMore .first .left .more span.lastRoom, .roomMore .second .left .more span.lastRoom {
    color: #fe4716;
}

.roomMore .first .middle {
    position: absolute;
    right: 86px;
    top: 15%;
}

.roomMore .second .middle {
    position: absolute;
    right: 86px;
    bottom: 8%;
}

.roomMore .first .middle .num, .roomMore .second .middle .num {
    font-size: 2.0rem;
    font-weight: 600;
    color: #fe4716;
}

.roomMore .first .right, .roomMore .second .right {
    width: 79px;
    height: 33px;
    float: right;
    border-radius: 5px;
    margin-top: 8px;
    text-align: center;
    line-height: 33px;
    background-color: #ffb412;
    color: white;
    font-size: 1.5rem;
}

.roomMore .first, .roomMore .second {
    width: 100%;
    height: 50%;
}

.d-div1 .image {
    width: 100%;
    height: 62.5%;
    max-height: 50px;
}

#imageContainer{
    width:100%;
    height:100%;
    background: #000000;
    overflow: hidden;
    display: none;
    position: fixed;
    z-index: 109;
    top:0;
    left:0
}

#imageContainer .indexShow{
    height:40px;
    line-height: 40px;
    text-align: center;
    font-size: 1.2rem;
    color: #ffffff;
    position: absolute;
    top:21%;
    background: #000000;
    width: 100%;
    text-align: center;
}

#imageContainer .showZone{
    height:38.5%;
    width: 100%;
    overflow: hidden;
    position: fixed;
    top:28%;
    background: #000000;
}
#imageContainer .showZone .imgUl{
    height:100%;
    width: 100%;
    overflow: hidden;
    position: absolute;
    display: block;
    background: #000000;
    list-style: none;
}

#imageContainer .showZone .imgUl li{
    display: inline-block;
    height:100%;
    width: 100%;
    float: left;
    overflow: hidden;
    list-style: none;
}

#imageContainer .showZone .imgUl li.noImage{
     height:100%;
     width: 100%;
    line-height: 100%;
    text-align: center;
    font-size: 1.2rem;
}
#imageContainer .showZone .imgUl li img{
    height:100%;
    width: 100%;
}
		</style>
	</head>

	<body>
		<div id="preloader">
		    <div id="status">
		        <p class="center-text">
		            Loading ...
		            <em>Loading depends on your connection speed!</em>
		        </p>
		    </div>
		</div>
		<div class="all-elements">
			<!-- head Content-->
			<div class="header" id="vlm-h-1">
			<a href="javascript:window.history.go(-1);" class="icons header-back"> </a>
			<h3><span class="d-p1"> </span></h3>
			</div>
			<div id="content" class="snap-content" style="padding-top: 45px;">
				<div class="d-div1">
					<img class="hotelPic">
					<div class="d-div2 totalNum">
						<div class="d-p4">7张</div>
					</div>
				</div>
				
			</div>
			
		</div>
<script src="js/lib/jquery.js"></script>
<script src="js/lib/vcm.js"></script>
<script src="js/lib/d_calendar1.0.2.js"></script>
		<script>
		var c = new vcm();
		c.init;
;(function(window,document){
    var hotelDetail ={
        CultureName:"zh-CN",
        tempCurLeft:0,
        tempStart:0,
        isAnimation:false,
        $Id:function(id){
            return document.getElementById(id);
        },

        $CN:function(className){
            return document.getElementsByClassName(className)
        },

        storageUtil:{
            set:function(key,v){
                var curTime = new Date().getTime();
                var localStorage = window.localStorage;
                localStorage.setItem(key,JSON.stringify({data:v,time:curTime}))
            },
            get:function(key,exp){
                var data = localStorage.getItem(key);
                var dataObj = JSON.parse(data);
                if(new Date().getTime()-dataObj.time>exp){
                    return "";//expired
                }else{
                    return "data="+dataObj.data;
                }
            }
        },

        CookieUtil : {
            get : function(name) {
                var cookieName = encodeURIComponent(name) + "=", cookieStart = document.cookie.indexOf(cookieName), cookieValue = null;
                if (cookieStart > -1) {
                    var cookieEnd = document.cookie.indexOf(";", cookieStart);
                    if (cookieEnd == -1) {
                        cookieEnd = document.cookie.length;
                    }
                    cookieValue = decodeURIComponent(document.cookie.substring(cookieStart + cookieName.length, cookieEnd));
                }
                return cookieValue;
            },
            set : function(name, value, expires, path, domain, secure) {
                var cookieText = encodeURIComponent(name) + "=" + encodeURIComponent(value);
                if ( expires instanceof Date) {
                    cookieText += "; expires=" + expires.toGMTString();
                }
                if (path) {
                    cookieText += "; path=" + path;
                }
                if (domain) {
                    cookieText += "; domain=" + domain;
                }
                if (secure) {
                    cookieText += "; secure=" + secure;
                }
                document.cookie = cookieText;
            },
            clear : function(name, path, domain, secure) {
                this.set(name, "", new Date(0), path, domain, secure);
            }
        },

        parseUrlPara:function (url,isEncode){
            var isEncode=isEncode||false;
            var reg=/([^=&?]+)=([^=&?]+)/g,obj={};
            url.replace(reg,function(){
                var arg=arguments;
                obj[arg[1]]=isEncode?decodeURIComponent(arg[2]):arg[2];
            });
            return obj;
        },


        jAjax:function(questUrl, data,Code,ForeEndType,Callback){
            var dataObj =
            {
                Parameters: JSON.stringify(data),
                Code: Code,
                ForeEndType: ForeEndType
            };
            var c = new vcm();
            c.loadJson(questUrl, JSON.stringify(dataObj), Callback);
        },

        sTools:{
            hotelName:function(arg) {
                return arg.indexOf('(') != -1 ? '<p class="d-p1">' + arg.slice(0, arg.indexOf(' (')) + '<br/>' + arg.slice(arg.indexOf(' (') + 1)+'</p>' : '<p class="d-p1" style="line-height: 44px">' + arg + '</p>';
            },
            frontImage:function(arg){
                for(var temp in arg){
                    if(arg[temp]["ReferenceType"] =='Front Image'){
                        return arg[temp]["ImageFileName"]
                    };
                }
            },
            imageNum:function(arg){
                return (arg&&arg.length)?arg.length:0;
            },
            getImages:function(arg) {
                if (arg == "") {
                    return '<li class="noImage">暂无图片</li>';
                }
                var str = "";
                for (var i = 0; i < arg.length; i++) {
                    str += '<li class="imageLi"><img class="freeImage" src="images/cars.png" real-src="'+arg[i].ImageFileName+'"/></li>'
                }

                return str;

            },
            StarRatingName: function(starStr) {
                switch (starStr.charCodeAt(0)) {
                    case 49:
                        return '一';
                        break;
                    case 50:
                        return '二';
                        break;
                    case 51:
                        return '三';
                        break;
                    case 52:
                        return '四';
                        break;
                    case 53:
                        return '五';
                        break;
                    case 54:
                        return '六';
                        break;
                    case 55:
                        return '七';
                        break;
                    default:
                        return '无';
                        break;

                }
            },
            getHotelTip:function(arg){
                var str='', argument=arg.Data[0].HotelGenInfo;
                for(var temp in argument){
                    str+=(temp=='IsCashRebate'&&argument[temp]==0)? '<b class="CashRebate"></b>':'';
                    str+=(temp=='IsCrazyRate'&&argument[temp]==0)? '<b class="CrazyRate"></b>':'';
                }
                return str;
            },
            getRoomTip:function(arg){
                var str='';
                for(var temp in arg){
                    str+=(temp=='IsFreeWifi'&&arg[temp]==true)? '<li><p>Wifi</p><div>有</div></li>':'';
                    str+=(temp=='IsFreeTransfer'&&arg[temp]==true)? '<li><p>免费接送机</p><div>有</div></li>':'';
                    str+=(temp=='IsFreeWifi'&&arg[temp]==true)? '<li><p>免费城市观光</p><div>有</div></li>':'';
                }
                return str;
            },
            getDates:function(arg) {
                return /^\d{4}\-(\d{1,2})\-(\d{1,2})/g.exec(arg)[1]+'-'+/^\d{4}\-(\d{1,2})\-(\d{1,2})/g.exec(arg)[2]
            },
            getTotalNights:function(end,start){
                return (Date.parse(end) - Date.parse(start))/1000/60/60/24;
            },
            Discount:function(arg){
                return arg.disCount!=null?'<div class="info-text"> <div class="privilege">现金奖励</div>该酒店正在参会现金奖励活动，最高返还房费5%</div>':'<div class="info-text">暂无</div>'
            },
            cancelTip:function(arg){
                return arg.disCount!=null?'<div class="info-text">订单提交后可随时取消，Asiatravel.com不收取任何费用。</div>':'<div class="info-text">暂无</div>'
            }

        },

        showUpper:function(result){
            $(".header h3").html(result.Data[0].HotelGenInfo.HotelName);
            //console.log(result)
            // var nameDiv = document.createElement('div');
            // nameDiv.className="top name";
            // nameDiv.id="vlm-login";
            //nameDiv.innerHTML='<a href="hotel_list.html" class="d-icons"></a>'+this.sTools.hotelName(result.Data[0].HotelGenInfo.HotelName);
            //this.$CN('all-elements')[0].appendChild(nameDiv);

            var numDiv = document.createElement('div');
            numDiv.className="d-div1";
            numDiv.innerHTML='<img class="hotelPic" src="'+this.sTools.frontImage(result.Data[0].HotelImagesList)+'"><div class="d-div2 totalNum"><div class="d-p4">'+this.sTools.imageNum(result.Data[0].HotelImagesList)+'张</div></div>';
            this.$Id('content').appendChild(numDiv);//this.$CN('all-elements')[0].appendChild(numDiv);

        },

        showImages:function(result){
            var picOuter = document.createElement('div');
            picOuter.id="imageContainer";
            picOuter.innerHTML='<h5 class="indexShow">123</h5><div class="showZone"><ul class="imgUl" style="left:0px;width:100%">'+this.sTools.getImages(result.Data[0].HotelImagesList)+'</ul></div>';
            this.$Id('content').insertBefore(picOuter,this.$CN('top')[0]);//this.$CN('all-elements')[0].insertBefore(picOuter,this.$CN('top')[0]);
        },

        showTitleList:function(result){
            var titleList = document.createElement('ul');
            titleList.className="d-ul1";
            titleList.innerHTML='<li><span style="color:#8ed1cc;font-size:15px;font-weight:600;">'+result.Data[0].HotelGenInfo.TAAvgRating+'</span>分/'+result.Data[0].HotelGenInfo.TAReviewCount+'人点评<b class="icons open-arg"></b></li>' +
            '<li>'+result.Data[0].HotelGenInfo.HotelAddress+'<em>地图</em><b class="icons open-arg"></b></li><li>'+this.sTools.StarRatingName(result.Data[0].HotelGenInfo.StarRatingName)+'星级'+this.sTools.getHotelTip(result)+'<b class="icons open-arg"></b></li>';
            this.$Id('content').appendChild(titleList);
            //酒店信息完毕，开始抵离时间与房间信息
            var roomList = document.createElement('ul');
            var dateInitObj= {};
            dateInitObj[this.gdataInfo.CheckInDate]='入住';
            dateInitObj[this.gdataInfo.CheckOutDate]='离店';
            roomList.className="d-ul2";
            roomList.innerHTML='<li id="chooseDate"> <span class="enterDate">'+this.gdataInfo.CheckInDate+'</span>入住<span class="enterDate" style="margin-left: 5px;">'+this.gdataInfo.CheckOutDate+'</span>离店 <em>共<span id="nightNum">'+ this.sTools.getTotalNights(this.gdataInfo.CheckOutDate,this.gdataInfo.CheckInDate)+ '</span>晚</em><b class="icons open-arg"></b></li>';
            this.$Id('content').appendChild(roomList);
            var myDate2=new Calender({id:'chooseDate',num:13,time:dateInitObj,sClass1:'enterDate',id2:'nightNum'});
        },

        mask:function(){
            var mask = document.createElement('div');
            mask.className="r-div";
            mask.id="r-mb";
            this.$Id('content').appendChild(mask);//this.$CN('all-elements')[0].appendChild(mask);

        },

        showRoomList:function(result){
            var oFragment = document.createDocumentFragment();
            var tempArray=result.Data[0].HotelRoomsList;
            for(var i= 0; i<tempArray.length;i++){
                var oli = document.createElement('li');
                oli.className="d-li1 super";
                oli.innerHTML='<div class="d-div3 roomEvent" style="max-width: 60%" onclick="hotelDetail.toggleRoomModals.call(this)"  room-type-code='+tempArray[i].RoomTypeCode+'><div class="d-p5">'+tempArray[i].RoomTypeName+'</div><b class="d-icon3"></b><div class="d-p6">32-38㎡ 大/双床</div></div><a href="#" class="at d-icon4" onclick="hotelDetail.toggleStatus.call(this)"></a> <div class="price"><span style="font-size:0.8em;color:#fe4716;">￥</span><spanstyle="font-size:2em;font-weight: 600;color:#fe4716;"="">'+tempArray[i].MinPrice+'<spanstyle="font-size:0.8em;color:#999999;">起</spanstyle="font-size:0.8em;color:#999999;"></spanstyle="font-size:2em;font-weight:></div>'+this.subRoomList(tempArray[i].RoomList);
                oFragment.appendChild(oli);
            }
            this.$CN('d-ul2')[0].appendChild(oFragment);
        },

        subRoomList:function(arg){
            var str='<ul class="roomUl">';
            for(var i=0;i<arg.length;i++){
                str+='<li class="d-li1" style="width:94%;background: #dfdfdd">' +
                '<div class="d-div3 subRoomEvent" room-code='+arg[i].RoomCode+' style="max-width: 60%" onclick="hotelDetail.toggleSubModals.call(this)"><div class="d-p5">'+arg[i].RoomName+'</div><div class="d-p7"><span>无早 大床 不可取消</span></div></div>' +
                '<div class="d-but">预订</div><div class="price2"><spanstyle="font-size:0.8em;color:#fe4716;">￥<spanstyle="font-size:2em;font-weight: 600;color:#fe4716;"="">'+arg[i].AvgPrice+'</spanstyle="font-size:2em;font-weight:></spanstyle="font-size:0.8em;color:#fe4716;"></div></li>';
            }
            return str;
        },


        subRoomModal:function(arg){
            var that=this;
            var subRoomModal = document.createElement('div');
            subRoomModal.className="roomAll";
            subRoomModal.id="infoAll";
            subRoomModal.innerHTML='<div class="room" id="info"><header class="r-top"><p class="r-p1">'+arg.RoomName+'</p>' +
            '<b class="r-icon1"></b></header> <div class="info-div"><ul class="ro-info">' +this.sTools.getRoomTip(arg)+''+
            '</div><div class="info-div"><p class="r-p2" style="font-weight: bold">优惠政策</p>' +this.sTools.Discount(arg)+''+

            '<div class="info-div" style="border:none"> <p class="r-p2" style="font-weight: bold">取消说明</p>'+this.sTools.cancelTip(arg)+'</div></div>'
            hotelDetail.$Id('content').appendChild(subRoomModal);//hotelDetail.$CN('all-elements')[0].appendChild(subRoomModal);
            hotelDetail.$Id('info').onclick=function(event){
                var target=event.target||event.srcElement;
                if(hotelDetail.$Id('infoAll')){
                    hotelDetail.$Id('infoAll').style.display = 'none';
                    hotelDetail.$Id('r-mb').style.display = 'none';
                }
            }
        },

        roomDetailInfo:function(){
            var roomDetailInfo = document.createElement('div');
            roomDetailInfo.className="roomAll";
            roomDetailInfo.id="roomAll";
            roomDetailInfo.innerHTML='<div class="room" id="room"><header class="r-top"><p class="r-p1">高级客房</p><b class="r-icon1" onclick="closeRoom()"></b></header><div class="r-div1"><img class="hotelPic2" src="images/03-3_03.jpg"></div><article class="r-ar">最多 2成人<br>儿童10岁或以上按照成人算。&nbsp;&nbsp;10岁以下的儿童按照酒店的具体规定一般免费（但不提供早餐和加床）。婴儿（1岁以下）如果使用现有的床铺可免费入住。请注意，如果您需要一个婴儿床可能有额外收费 ' +
            '</article><hr size="1px" width="100%" color="#ececec"><p class="r-p2" style="">房间描述</p><article class="r-ar">Newly refurbished Deluxe Rooms are a unique expression of stylish comfort.Featuring</article>' +
            '<hr size="1px" width="100%" color="#ececec"><p class="r-p2" style="">房间设施</p><ul class="r-ul"><li class="r-li"><b class="r-icon2"></b><p class="r-p3">无线上网服务(免费)</p></li><li class="r-li"><b class="r-icon2"></b><p class="r-p3">双人床/两张单人床</p></li>' +
            '<li class="r-li"><b class="r-icon2"></b><p class="r-p3">个人温度调节器</p></li><li class="r-li"><b class="r-icon2"></b><p class="r-p3">有线/卫星电视</p></li><li class="r-li"><b class="r-icon2"></b><p class="r-p3">热水喝冷水淋浴</p></li><li class="r-li"><b class="r-icon2"></b><p class="r-p3">AM/FM收音机</p></li> <li class="r-li"><b class="r-icon2"></b><p class="r-p3">24小时商务中心</p></li><li class="r-li"><b class="r-icon2"></b><p class="r-p3">SPA浴盆</p></li></ul></div>';
            this.$Id('content').appendChild(roomDetailInfo);// this.$CN('all-elements')[0].appendChild(roomDetailInfo);
        } ,

        showContent:function(result){
            result=JSON.parse(result);
            hotelDetail.sourceData=result;
            hotelDetail.showUpper(result);
            hotelDetail.showImages(result);
            hotelDetail.indexEvent(result,1);
            hotelDetail.imagesEvent(result);

            hotelDetail.showTitleList(result);
            hotelDetail.mask();
            hotelDetail.showRoomList(result);


            hotelDetail.subRoomModal(result);
            hotelDetail.roomDetailInfo(result);

        },

        indexEvent:function(result,item){
            if(!result.Data[0].HotelImagesList.length>0){
                document.querySelectorAll('.indexShow')[0].innerHTML=""
            }else{
                document.querySelectorAll('.indexShow')[0].innerHTML=item+"/"+result.Data[0].HotelImagesList.length;
            }

        },
        widthCorrecting:function(result){
            var innerWidth = window.innerWidth, innerHeight = window.innerHeight;
            document.querySelectorAll('.imgUl')[0].style.width = result.Data[0].HotelImagesList.length != 0 ? (100 * result.Data[0].HotelImagesList.length) + "%" : "100%";
            if (document.querySelectorAll('.imageLi').length) {
                for (var m = 0, Lis = document.querySelectorAll('.imageLi'); m < Lis.length; m++) {
                    Lis[m].style.width = innerWidth + "px";
                }
            }
        },

        imagesEvent:function(result){
            this.widthCorrecting(result);
            this.imageTouchEvent();
            this.eventHandle();

        },


        imageTouchEvent:function(){
            var outerDiv=document.getElementById('imageContainer');
            var innerDiv=document.getElementsByClassName('showZone')[0];
            var totalNum=document.getElementsByClassName('totalNum')[0];

            outerDiv.onclick=function(event){
                var e =event ||window.event;
                var tar =event.target ||event.srcElement;
                if(tar.id=='imageContainer'){
                    tar.style.display = 'none'
                }
            };
            totalNum.onclick=function(event){
                document.getElementById('imageContainer').style.display='block';
            };
            innerDiv.addEventListener('touchstart', this.startHandler,false)
            innerDiv.addEventListener('touchmove', this.moveHandler,false)
            innerDiv.addEventListener('touchend', this.endHandler,false)
        },

        startHandler:function(e){
            e.preventDefault();
            if(!hotelDetail.isAnimation){
                hotelDetail.tempStart = e.targetTouches[0].pageX;
            }else{
                hotelDetail.isAnimation=true;
            };


        },
        moveHandler:function(e){
            e.preventDefault();
            var imgUl=document.getElementsByClassName('imgUl')[0];
            imgUl.style.left=parseFloat(imgUl.style.left)+e.targetTouches[0].pageX-hotelDetail.tempStart+'px';
            hotelDetail.tempStart=e.targetTouches[0].pageX;

        },
        endHandler:function(e){
            e.preventDefault();
            var minLeftValue = (document.querySelectorAll('.imageLi').length-1)*window.innerWidth;
            var endLeftValue = parseFloat(document.getElementsByClassName('imgUl')[0].style.left);
            var distance = endLeftValue-hotelDetail.tempCurLeft,time=1000,targetLeft,indexNUm;
            if(distance<0&&Math.abs(distance)>=window.innerWidth/3){
                targetLeft=hotelDetail.tempCurLeft-window.innerWidth;
            }else if(distance>0&&Math.abs(distance)>=window.innerWidth/3){
                targetLeft = hotelDetail.tempCurLeft+window.innerWidth;
            }else{
                targetLeft = hotelDetail.tempCurLeft;
            }

            if(targetLeft >= 0){//过界处理
                targetLeft = 0;
            }else if (targetLeft <= -minLeftValue){
                targetLeft =-minLeftValue;
            }
            indexNUm = Math.abs(targetLeft/window.innerWidth)+1;
            time = Math.abs((targetLeft-parseFloat(document.getElementsByClassName('imgUl')[0].style.left))/window.innerWidth)*time;
            hotelDetail.tempCurLeft=targetLeft;
            $('.imgUl').animate({'left': targetLeft},time);
            hotelDetail.indexEvent(hotelDetail.sourceData,indexNUm);
            hotelDetail.delayLoadImage(indexNUm);
            hotelDetail.isAnimation=false;
        },

        toHotelInfoPage:function(){

        },

        delayLoadImage:function(item){
            var images= document.getElementsByClassName('freeImage');
            var re_url=images[item-1].getAttribute('real-src');
            loadImage(re_url,function(){
                images[item-1].setAttribute('src',re_url)
            })
            function loadImage(url, callback) {
                var img = new Image();
                img.src = url;
                img.onload = function(){
                    img.onload = null;
                    callback();
                }

            }
        },

        updateSubRoomModal:function(arg){
            //var arg = JSON.parse(arg)
            var str='';
            str+='<header class="r-top"><p class="r-p1">'+arg.RoomName+'</p><b class="r-icon1"></b></header>';
            str+='<div class="info-div"><ul class="ro-info">' +this.sTools.getRoomTip(arg)+'</div>';
            str+='<div class="info-div"><p class="r-p2" style="font-weight: bold">优惠政策</p>'+this.sTools.Discount(arg);
            str+='<div class="info-div" style="border:none"> <p class="r-p2" style="font-weight: bold">取消说明</p>'+this.sTools.cancelTip(arg)+'</div></div>';
            hotelDetail.$Id('info').innerHTML=str;
        },

        updateRoomModal:function(arg){
            var arg = JSON.parse(arg)
            var str='';
            str+='<header class="r-top"><p class="r-p1">高级客房</p><b class="r-icon1"></b></header>';
            str+='<div class="r-div1"><img class="hotelPic2" src="images/03-3_03.jpg"></div>';
            str+='<article class="r-ar">最多 2成人<br>费 </article>'
            str+='<hr size="1px" width="100%" color="#ececec"><p class="r-p2" style="">房间描述</p>'
            str+='<article class="r-ar">Newly refurbished Deluxe Rooms are a unique expression of stylish comfort.Featuring</article>'
            str+='<hr size="1px" width="100%" color="#ececec"><p class="r-p2" style="">房间设施</p>'
            str+='<ul class="r-ul">'
            str+='<li class="r-li"><b class="r-icon2"></b><p class="r-p3">无线上网服务(免费)</p></li>'
            str+='<li class="r-li"><b class="r-icon2"></b><p class="r-p3">双人床/两张单人床</p></li>'
            str+='<li class="r-li"><b class="r-icon2"></b><p class="r-p3">个人温度调节器</p></li>'
            str+='<li class="r-li"><b class="r-icon2"></b><p class="r-p3">有线/卫星电视</p></li>'
            str+='<li class="r-li"><b class="r-icon2"></b><p class="r-p3">热水喝冷水淋浴</p></li>'
            str+='<li class="r-li"><b class="r-icon2"></b><p class="r-p3">AM/FM收音机</p></li>'
            str+='<li class="r-li"><b class="r-icon2"></b><p class="r-p3">24小时商务中心</p></li>'
            str+='<li class="r-li"><b class="r-icon2"></b><p class="r-p3">SPA浴盆</p></li>'
            str+='</ul>'
            str+='</div>';
            hotelDetail.$Id('room').innerHTML=str;
            hotelDetail.$Id('room').onclick=function(event){
                var target=event.target||event.srcElement;
                if(target.className=="r-icon1"){
                    hotelDetail.$Id('roomAll').style.display = 'none';
                    hotelDetail.$Id('r-mb').style.display = 'none';
                }
            }


        },

        updateBigModal:function(result){
            var result =result;
            hotelDetail.updateRoomModal(result);
            hotelDetail.$Id('roomAll').style.display = 'block';
            hotelDetail.$Id('r-mb').style.display = 'block';



        },

        toggleStatus:function() {
            $(this.parentNode.parentNode).find('ul.roomUl').hide();
            $(this.parentNode.parentNode).find('a.at').each(function(){
                $(this).attr('class', 'at d-icon5');
            })
            if (this.isOpen) {
                $(this.parentNode).find('ul.roomUl').slideUp("400");
                $(this).attr('class', 'at d-icon5');
                this.isOpen = false;
            } else {
                $(this.parentNode).find('ul.roomUl').slideDown("400");
                this.isOpen = true;
                $(this).attr('class', 'at d-icon4');
            }
        },

        toggleSubModals:function(){
            var  info = this.getAttribute('room-code'),tempInfo;
            var compareData =  hotelDetail.sourceData.Data[0].HotelRoomsList;
            for(var i = 0; i< compareData.length;i++){
                for(var j = 0,teList=compareData[i].RoomList;j<teList.length;j++){
                    console.log(teList[j])
                    if(teList[j].RoomCode==info){
                        tempInfo=teList[j];
                        break;
                    }
                }
            }

            hotelDetail.updateSubRoomModal(tempInfo);
            hotelDetail.$Id('infoAll').style.display = 'block';
            hotelDetail.$Id('r-mb').style.display = 'block';

        },

        toggleModals:function(reslut){
            console.log(reslut);
            hotelDetail.updateBigModal(reslut)
        },

        toggleRoomModals:function(){
            var  roomTypeCode = this.getAttribute('room-type-code');
            var roomInfo={HotelID:hotelDetail.gdataInfo.HotelID,CultureName:hotelDetail.CultureName,RoomTypeCode:roomTypeCode};
            hotelDetail.jAjax("http://10.2.22.239:8888/api/GetServiceApiResult",roomInfo,"0010",3,hotelDetail.toggleModals);
        },
        eventHandle:function(){
            var frontImage = this.$CN('hotelPic')[0];
            var totalNum = this.$CN('totalNum')[0];
            var imageContainer = this.$Id('imageContainer');
            var aLink = this.$CN('at');
            var subRooms = this.$CN('subRoomEvent');
            var Rooms = this.$CN('roomEvent');

            frontImage.onclick=function() {
                document.location.href = 'jyy_hotelSummary.html'
            };

            totalNum.onclick=function(){
                hotelDetail.$Id('imageContainer').style.display = 'block';
            };
            imageContainer.onclick=function(event){
                var event=event||window.event;
                var target =event.target||event.srcElement;
                if(target.id=='imageContainer'){
                    target.style.display = 'none'}
            };


            for(var j=0;j<subRooms.length;j++){
                (function(j,fun){
                    subRooms[j].addEventListener('click',fun,false);
                })(j,toggleSubModals)
            }

        },


        init:function(){
            document.body.removeChild(this.$Id('preloader'));
            var dataObj = this.parseUrlPara(document.location.search,true);
            this.gdataInfo = dataObj;
            this.jAjax("http://10.2.22.239:8888/api/GetServiceApiResult",dataObj,"0008",3,this.showContent);
            window.hotelDetail=hotelDetail;
        }
    };

    hotelDetail.init();
})(window,document);
		</script>
	</body>
</html>
