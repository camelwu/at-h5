<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>热门目的地</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link href="../styles/framework.css" rel="stylesheet"/>
    <link href="../styles/style.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/hotcity.css">
    <link href="../styles/tips.css"	rel="stylesheet">
</head>
<body>
<div class="all-elements">
    <!--   顶部   -->
    <header class="top">
        <a href="javascript:;" class="icons header-back"></a>
        <span class="title">酒+景</span>
        <span class="location"><i>北京</i></span>
    </header>
    <!--   内容   -->
    <div id="content ddd" class="snap-content" style="padding-top: 45px;padding-bottom:50px;">
        <section class="hot_tagBox">
            <span class="current">国内游</span>
            <span><a href="#">出境游</a></span>
        </section>
        <section class="conBox">
            <h3 class="title">热门目的地</h3>
            <div class="cityListBox">
                <ul class="cityListUl">
                    <!--<li><span>新加坡</span></li>-->
                    <!--<li><a href="#">悉尼</a></li>-->
                    <!--<li><a href="#">香港</a></li>-->
                    <!--<li><a href="#">巴厘岛</a></li>-->
                    <!--<li><a href="#">首尔</a></li>-->
                    <!--<li><a href="#">迪拜</a></li>-->
                </ul>
            </div>
            <div class="tourListBox">
                <ul  class="tourListBoxUl">
                    <!--<li>-->
                    <!--<a href="#">-->
                    <!--<span class="img">-->
                    <!--<img src="../images/03-3_03.jpg" alt="">-->
                    <!--</span>-->
                    <!--<span class="title">两天一夜酒店+半天新加坡城市游览</span>-->
                    <!--<span class="info">-->
                    <!--<i data-text="起">479</i>-->
                    <!--<b>新加坡</b>-->
                    <!--</span>-->
                    <!--</a>-->
                    <!--</li>-->
                    <!--<li>-->
                    <!--<a href="#">-->
                    <!--<span class="img">-->
                    <!--<img src="../images/03-3_03.jpg" alt="">-->
                    <!--</span>-->
                    <!--<span class="title">两天一夜酒店+半天新加坡城市游览</span>-->
                    <!--<span class="info">-->
                    <!--<i data-text="起">479</i>-->
                    <!--<b>新加坡</b>-->
                    <!--</span>-->
                    <!--</a>-->
                    <!--</li>-->
                    <!--<li>-->
                    <!--<a href="#">-->
                    <!--<span class="img">-->
                    <!--<img src="../images/03-3_03.jpg" alt="">-->
                    <!--</span>-->
                    <!--<span class="title">两天一夜酒店+半天新加坡城市游览</span>-->
                    <!--<span class="info">-->
                    <!--<i data-text="起">479</i>-->
                    <!--<b>新加坡</b>-->
                    <!--</span>-->
                    <!--</a>-->
                    <!--</li>-->
                    <!--<li>-->
                    <!--<a href="#">-->
                    <!--<span class="img">-->
                    <!--<img src="../images/03-3_03.jpg" alt="">-->
                    <!--</span>-->
                    <!--<span class="title">两天一夜酒店+半天新加坡城市游览</span>-->
                    <!--<span class="info">-->
                    <!--<i data-text="起">479</i>-->
                    <!--<b>新加坡</b>-->
                    <!--</span>-->
                    <!--</a>-->
                    <!--</li>-->
                </ul>
            </div>
        </section>
    </div>
    <!--   底部   -->
    <footer class="hl-bottom">
        <div class="fo-div" id="fo_ra">
            <b class="hl-icon3"></b>
            价格排序
        </div>
        <div class="fo-div" id="fo_sc">
            <b class="hl-icon3" style="background-position:47% 8%;"></b>
            过滤
        </div>
    </footer>
</div>
<!--   背景块   -->
<div class="mask" id="r-mb"></div>
<!--   筛选块   -->
<div class="screen" id="screen">
    <ul class="tagBox" id="screen_tagBox">
        <li class="current">景点主题</li>
        <li>景点活动</li>
    </ul>
    <ul class="tagList" id="tagList_1">
        <li class="current">不限</li>


        <!--<li><a href="#">博物馆</a></li>-->
        <!--<li><a href="#">场馆</a></li>-->
        <!--<li><a href="#">古迹遗迹</a></li>-->
        <!--<li><a href="#">山水景观</a></li>-->
        <!--<li><a href="#">温泉</a></li>-->
        <!--<li><a href="#">宾馆/招待所</a></li>-->
    </ul>
    <ul class="tagList" id="tagList_2" style="display:none;">
        <li>不限</li>
        <li><a href="#">全部景点</a></li>
        <li><a href="#">全部景点</a></li>
        <li><a href="#">全部景点</a></li>
        <li><a href="#">山水景观</a></li>
        <li><a href="#">温泉</a></li>
        <li><a href="#">宾馆/招待所</a></li>
    </ul>
</div>
<!-- 排序块 -->
<div class="sortBox" id="rank">
    <ul class="rank">
        <li class="current">推荐排序</li>
        <li><a href="#">价格升序</a></li>
        <li><a href="#">价格降序</a></li>
        <li><a href="#">好评优先</a></li>
    </ul>
</div>
<script src="../js/head_back.js"></script>
<script src="../js/scenic.js"></script>
</body>

<script src="../js/lib/jquery.js"></script>
<script src="../js/lib/plugins.js"></script>
<script src="../js/lib/jquery.alert.js"></script>
<script src="../js/lib/vlm.js"></script>
<script src="../js/lib/template.js"></script>
<script src="../js/lib/custom.js"></script>

<!--获取目的地城市模板-->
<!--<script id="tpl_GetFilterByTheme" type="text/template">-->
<!--{% for(var i=0,len=8;i<len;i++){ %}-->
<!--<li><a href="#">博物馆</a></li>-->
<!--{% } %}-->
<!--</script>-->
<

<script>
    //机+酒首页‘
    (function(){
        var core=function(){
            var apiurl="http://10.2.22.239:8888/api/GetServiceApiResult";
            var tpl_city_o = '<li><a href="#" data-code="{%=cityCode%}">{%=cityName%}</a></li>';
            var tpl_tour_o = '<li><span class="img"><img src="{%=pictureURL%}" alt=""> </span><span class="title">{%=packageName%}</span> <span class="info"> <i data-text="起">{%=leadinPrice%}</i> <b>新加坡</b> </span> </a> </li>';
            var tpl_filter_o='<li><a href="#" data-code="{%=themeID%}">{%=themeName%}</a></li>'

            vlm.init();
            //加载国外目的地城市
            var CGetExHotCity = function(){
                var GetExHotCity=
                {
                    "Parameters": {},
                    "ForeEndType": 3,
                    "Code": "0201"
                }
                vlm.loadJson(apiurl,JSON.stringify(GetExHotCity),GetExHotCityCallback);
                function GetExHotCityCallback(data){
                    var json=JSON.parse(data);
                    console.log(json);
                    if(json.success){
                        var data = json.data.destCities,strHtml="";
                        console.log(data);
                        if(data.length>9){

                            strHtml = template(tpl_city_o,data);
                        }else{
                            strHtml = template(tpl_city_o,data);
                        }

                        //console.log(json.data.destCities);
                        $(".cityListUl").html(strHtml);
                        BindSelectDesCityEvent();
                    }else {
                        console.log(json);
                        jAlert("数据格式错误","提示");
                    }
                }
            }
            var CGetTourCityId = function(cityId){
                var GetTourCityId=
                {
                    "Parameters": {"DestCityCode": cityId},
                    "ForeEndType": 3,
                    "Code": "0087"
                }
                vlm.loadJson(apiurl,JSON.stringify(GetTourCityId),GetTourCityCallBack);
                function GetTourCityCallBack(data){

                    var json=JSON.parse(data);
                    console.log(json);
                    if(json.success){

                        var data=json.data.lists,strHtml="";

                        if(data.length>0) {
                            strHtml = template(tpl_tour_o, data);
                            var data=json.data.themes;
                            strFilterHtml='<li class="current" data-code="all">不限</li>'+template(tpl_filter_o, data);
                        }
                        $(".tourListBoxUl").html(strHtml);
                        console.log(strFilterHtml);
                        $(".tagList").html(strFilterHtml);
                    }
                    else{


                    }

                }

            }
            var BindSelectDesCityEvent=function(){
                $(".cityListUl a").on("click",function(){
                    $(".cityListUl  a").removeClass("active");
                    $(this).addClass("active");
                    CGetTourCityId($(this).attr("data-code"))
                })

            }
            return {
                CGetExHotCity:CGetExHotCity,
                BindSelectDesCityEvent:BindSelectDesCityEvent
            }

        }

        obj=new core();
        obj.CGetExHotCity();//加载境外热门城市
        obj.BindSelectDesCityEvent();
    })(jQuery,window,document)

</script>
</html>
