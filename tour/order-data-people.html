<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="green">
    <meta name="Keywords" content="亚洲旅行网">
    <meta name="Description" content="境外专业旅行服务提供机构">
    <meta name="screen-orientation" content="portrait">
    <meta name="x5-orientation" content="portrait">
    <meta name="full-screen" content="yes">
    <meta name="x5-fullscreen" content="true">

    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="images/splash/splash-icon.png">
    <link rel="apple-touch-icon-precomposed" sizes="180x180" href="images/splash/splash-icon-big.png">
    <link rel="apple-touch-startup-image" href="images/splash/splash-screen.png" 	media="screen and (max-device-width: 320px)" />
    <link rel="apple-touch-startup-image" href="images/splash/splash-screen@2x.png" media="(max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2)" />
    <link rel="apple-touch-startup-image" href="images/splash/splash-screen-six.png" media="(device-width: 375px)">
    <link rel="apple-touch-startup-image" href="images/splash/splash-screen-six-plus.png" media="(device-width: 414px)">
    <link rel="apple-touch-startup-image" sizes="640x1096" href="images/splash/splash-screen@3x.png" />
    <link rel="apple-touch-startup-image" sizes="1024x748" href="images/splash/splash-screen-ipad-landscape" media="screen and (min-device-width : 481px) and (max-device-width : 1024px) and (orientation : landscape)" />
    <link rel="apple-touch-startup-image" sizes="768x1004" href="images/splash/splash-screen-ipad-portrait.png" media="screen and (min-device-width : 481px) and (max-device-width : 1024px) and (orientation : portrait)" />
    <link rel="apple-touch-startup-image" sizes="1536x2008" href="images/splash/splash-screen-ipad-portrait-retina.png"   media="(device-width: 768px)	and (orientation: portrait)	and (-webkit-device-pixel-ratio: 2)"/>
    <link rel="apple-touch-startup-image" sizes="1496x2048" href="images/splash/splash-screen-ipad-landscape-retina.png"   media="(device-width: 768px)	and (orientation: landscape)	and (-webkit-device-pixel-ratio: 2)"/>

    <title>输入资料页 - 亚洲旅行网</title>
    <link href="../styles/framework.css" type="text/css" rel="stylesheet">
    <link href="../styles/style.css" type="text/css" rel="stylesheet">
    <link href="../styles/dzh.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/tour.css">
</head>
<body>
    <div id="preloader">
        <div id="status">
            <p class="center-text">
                <br>
                <em>加载中……</em>
            </p>
        </div>
    </div>
    <div class="all-elements">
        <!--   顶部   -->
        <div class="header">
            <a href="javascript:history.go(-1);" class="icons header-back"></a>
            <h3 class="head-h3">资料输入</h3>
        </div>
        <!--   内容   -->
        <div id="content ddd" class="snap-content" style="padding-top: 45px;padding-bottom: 51px;">
            <section class="all_title">
                <h3 class="hotel">酒店</h3>
            </section>
            <section class="select_date">
                <div class="content2" id="content2">
                    <div class="nav2-left">
                        <span class="nav2-lefttop">日期</span>
                        <span class="nav2-leftbottom">共 <span id="total_day">3</span> 晚</span>
                    </div>
                    <div class="nav2-center">
                        <div class="nav2-centertop">
                            <p><input name="CheckInDate" id="CheckInDate" value="2016-03-11" class="CheckInDateI"><span id="week_span1">周四 入住</span></p>

                        </div>
                        <div class="nav2-centerbottom">
                            <p><input name="CheckOutDate" id="CheckOutDate" value="2016-03-12" class="CheckInDateI"><span id="week_span2">周一 离店</span></p>
                        </div>
                    </div>
                    <div class="nav2-centerright">
                        <i></i>
                    </div>
                </div>
            </section>
            <section class="hotelInfo_numb_room">
                <span class="title">房间</span>
                <div class="per-price-control" data-type="extraRoom"><span id="room_downb" class="cut-down-btn"></span><i class="cut-up-cont">1</i><span class="plus-btn"></span></div>
            </section>            
            <section class="hotelInfo_numb_people">
                <span class="title">房间1</span>
                <div class="numbList">
                    <span class="n_tit">成人</span>
                    <div class="per-price-control"><span class="cut-down-btn"></span><i class="cut-up-cont">1</i><span class="plus-btn"></span></div>
                </div>
                <div class="numbList">
                    <span class="n_tit">儿童</span>
                    <span class="child-age">（2-14岁）</span>
                    <div class="per-price-control" data-type="extraChild"><span class="cut-down-btn"></span><i class="cut-up-cont">1</i><span class="plus-btn"></span></div>
                </div>
                <div class="extraChild">
                    <span class="bedList" style="float: left"><i>儿童年龄1</i></span>
                    <div class="childAge">
                        <input class="inp-cage" type="text" value placeholder="2-14"><i class="child-sui">岁</i>
                    </div>
                </div>
                <div class="numbList">
                    <span class="bedList"><i>加床</i><b class="icon noselect"></b></span>
                </div>
            </section>
            <section class="all_title">
                <h3>景点</h3>
            </section>
            <section class="tourTime">
                <div class="content2" id="content3">
                    <div class="nav2-center">
                        <div class="nav2-centertop">
                            <span>景点1</span>
                            <p><input name="CheckInDate" id="content3_CheckInDate" value="2016-03-11"><span id="content3_week_span1">周四</span></p>
                        </div>
                    </div>
                    <div class="nav2-centerright">
                        <i></i>
                    </div>
                </div>
                <div class="content2">
                    <div class="nav2-center">
                        <div class="nav2-centertop">
                            <span>景点2</span>
                            <p><input name="CheckInDate" value="2016-03-11"><span>周四</span></p>
                        </div>
                    </div>
                    <div class="nav2-centerright">
                        <i></i>
                    </div>
                </div>
            </section>
            <section class="orderBtn"><a href="hotel_list.html">预订</a></section>
        </div>       
    </div>

    <script src="../js/lib/d_calendar1.0.2.js"></script>
    <script src="../js/lib/jquery.js"></script>
    <script src="../js/lib/plugins.js"></script>
    <script src="../js/lib/jquery.alert.js"></script>
    <script src="../js/lib/vlm.js"></script>
    <script src="../js/lib/template.js"></script>
    <script src="../js/lib/custom.js"></script>
    <script src="js/dateFix.js"></script>
    <script>
        $(window).load(function () {
            $("#status").fadeOut();
            $("#preloader").delay(400).fadeOut("medium");
        });
        var lsf_myweb={
            "getbyid":function(id){
                return document.getElementById(id);
            },
            "getbytag":function(obj,tag){
                return obj.getElementsByTagName(tag);
            },
            "getbyclass":function(obj,sClass){
                if(obj.getElementsByClassName){
                    return obj.getElementsByClassName(sClass);
                }else{
                    var aResult=[];
                    var aEle=obj.getElementsByTagName('*');
                    var reg=new RegExp('\\b'+sClass+'\\b','g');
                    for(var i=0;i<aEle.length;i++){
                        if(aEle[i].className.search(reg)!=-1){
                            aResult.push(aEle[i]);
                        }
                    }
                    return aResult;
                }
            },
            bind:function(obj,sEv,fn){
                obj.addEventListener?obj.addEventListener(sEv,fn,false):obj.attachEvent('on'+sEv,fn);
            }
        };
        (function(){
            var n2c=['日','一','二','三','四','五','六'];
            function toDou(num){
                return num<10?'0'+num:''+num;
            }
            var checkIn=lsf_myweb.getbyid('CheckInDate');
            var checkOut=lsf_myweb.getbyid('CheckOutDate');
            var content2=lsf_myweb.getbyid('content2');
            var oDate=new Date();
            var y=oDate.getFullYear();
            var m=oDate.getMonth()+1;
            var d=oDate.getDate();
            var oDate1=new Date(oDate.getFullYear(),oDate.getMonth(),oDate.getDate()+2);
            var oDate2=new Date(oDate.getFullYear(),oDate.getMonth(),oDate.getDate()+5);
            var beginDate=oDate1.getFullYear()+'-'+toDou(oDate1.getMonth()+1)+'-'+toDou(oDate1.getDate());
            var leaveDate=oDate2.getFullYear()+'-'+toDou(oDate2.getMonth()+1)+'-'+toDou(oDate2.getDate());
            checkIn.value=beginDate;
            checkOut.value=leaveDate;
            var obj={};
            obj[beginDate]="入住";
            obj[leaveDate]="离店";
            function Calender2(){Calender.apply(this,arguments);}
            Calender2.prototype=new Calender();
            Calender2.prototype.linkOver=function(){
                var sels = $('#'+ this.id +'-date .live_circle'),i,l=sels.length,that=this,arr=[];
                var out = _CalF.$('input',that.input);
                var tal = _CalF.$('#total_day',that.input);
                for(i = 0;i<2;i++){
                    arr.push(sels[i].parentNode.getAttribute("data-day"));
                    out[i].value = sels[i].parentNode.getAttribute("data-day");
                }
                tal.innerHTML = (Math.round((new Date(arr[1])-new Date(arr[0]))/(1000*60*60*24)));
                that.removeDate();
                that.header.parentNode.removeChild(that.header);
                var oDate1=new Date(arr[0].split('-')[0],(arr[0].split('-')[1]-1),arr[0].split('-')[2]);
                var oday1=oDate1.getDay();
                var oDate2=new Date(arr[1].split('-')[0],(arr[1].split('-')[1]-1),arr[1].split('-')[2]);
                var oday2=oDate2.getDay();
                lsf_myweb.getbyid('week_span1').innerHTML='周'+n2c[oday1]+' 入住';
                lsf_myweb.getbyid('week_span2').innerHTML='周'+n2c[oday2]+' 离店';
                
            }
            Calender2.prototype.outClick,Calender3.prototype.outClick=function(){
                var that = this;
                _CalF.bind(document, 'click',function(event){
                    event = event || window.event;
                    var target = event.target || event.srcElement;
                    if(target.className.indexOf("header-back")>-1){
                        that.removeDate();
                        that.header.parentNode.removeChild(that.header);
                    }
                });
            }
            var myDate1 = new Calender2({id: 'content2', num: 13, time: obj});

            function Calender3(){Calender.apply(this,arguments);}
            Calender3.prototype=new Calender();
            Calender3.prototype.linkOn = function(){
                var links = _CalF.$('.live',this.dd),i,l=links.length,that=this;
                for(i = 0;i<l;i++){
                    links[i].index = i;
                    links[i].onclick = function(){
                        if(that.input.tagName === 'input'){
                            $(this).css("border","1px solid #ff6a2f").css("z-index","9999999");
                            $(this).siblings().css("border","").css("z-index","");
                        }else{
                            if(!(this.className.indexOf("disabled")>-1)){
                                    $(this).html('<span class="live_circle">'+(this.innerHTML)+'</span><span class="live_txt">'+that._word.h[that.op]+'</span>');that.op>=1?that.op=0:null;
                                    that.linkOver();
                            }
                        }
                   };
                }
            }
            var _obj_3={};
            var _CheckInDate3 = document.getElementById("content3_CheckInDate");
            _CheckInDate3.value=beginDate;_obj_3[beginDate]="入住";
            Calender3.prototype.linkOver=function(){
                var sels = $('#'+ this.id +'-date .live_circle'),i,l=sels.length,that=this,arr=[];
                arr.push(sels[1].parentNode.getAttribute("data-day"));
                that.removeDate();
                that.header.parentNode.removeChild(that.header);
                var oDate1=new Date(arr[0].split('-')[0],(arr[0].split('-')[1]-1),arr[0].split('-')[2]);
                var oday1=oDate1.getDay();
                lsf_myweb.getbyid('content3_week_span1').innerHTML='周'+n2c[oday1];
                document.getElementById("content3_CheckInDate").value=arr[0];
            }
            var myDate1 = new Calender3({id:'content3',num: 13,time:_obj_3});            
        })();

        var dateInitObj = {};

        //单程事例
        var myDate= new TicketDate({
            id: 'chooseDate-single',  //触发日期弹出框的标签的id
            num: 13,                  //弹出日期的最多出现的月份数
            time: dateInitObj,        //特征日期，传入之前先把值处理为比如  dateInitObj['2016-02-30'] = '去程';形式
            sClass1: 'enterDate',     //选择日期后赋值给该元素
            type:'Oneway'             //日历类型：Return ：包含返程，Oneway，不会提示两次以上的点击
        });


        //双程事例
        dateInitObj['2016-04-08'] = '去程';
        dateInitObj['2016-04-12'] = '返程';
        var myDate= new TicketDate({
            id: 'ori-des-Date',
            num: 13,
            time: dateInitObj,
            sClass1: 'double-date',
            type:'Return'
        });
        (function(){
            function toUp(m,n,n_1){
                var _type = n.parentNode.getAttribute("data-type");
                n.onclick=function(){
                    var str=m.innerHTML;
                    str=Number(str);
                    str=str+1;
                    m.innerHTML=str;
                    str==0?n_1.style.backgroundPosition = '-26px 2px':n_1.style.backgroundPosition = '-51px 2px';
                    _type=="extraChild"&&extraChild(n.parentNode.parentNode,str);
                    _type=="extraRoom"&&extraRoom(n.parentNode.parentNode,str);
                };
            }
            function toDown(m,n){
                var _type = n.parentNode.getAttribute("data-type");
                n.onclick=function(){
                    var str=m.innerHTML;
                    str=Number(str);
                    if(n.id == 'room_downb'){
                        if(str<=1){m.innerHTML=1;}else{str=str-1;m.innerHTML=str;}
                        str==1?n.style.backgroundPosition = '-26px 2px':n.style.backgroundPosition = '-51px 2px';
                    }else {
                        if (str <= 0) {
                            m.innerHTML = 0;
                        } else {
                            str = str - 1;
                            m.innerHTML = str;
                        }
                        str == 0 ? n.style.backgroundPosition = '-26px 2px' : n.style.backgroundPosition = '-51px 2px';
                    }
                    _type=="extraChild"&&extraChild(n.parentNode.parentNode,str);
                    _type=="extraRoom"&&extraRoom(n.parentNode.parentNode,str);
                };
            }
            //  实现加减
            function add_subtract() {
                var oNum = document.getElementsByClassName('cut-up-cont'),
                    _plus_btn = document.getElementsByClassName('plus-btn'),
                    _cut_down_btn = document.getElementsByClassName('cut-down-btn');
                for (var i = 0; i < oNum.length; i++) {
                    toUp(oNum[i], _plus_btn[i], _cut_down_btn[i]);
                    toDown(oNum[i], _cut_down_btn[i]);
                    var str = parseInt(oNum[i].innerHTML);
                    if (i == 0) {
                        str == 1 ? _cut_down_btn[i].style.backgroundPosition = '-26px 2px' : _cut_down_btn[i].style.backgroundPosition = '-51px 2px';
                    } else {
                        str == 0 ? _cut_down_btn[i].style.backgroundPosition = '-26px 2px' : _cut_down_btn[i].style.backgroundPosition = '-51px 2px';
                    }
                }
                (function() {
                    var addBed = document.getElementsByClassName('icon noselect');
                    for (var j = 0; j < addBed.length; j++) {
                        {
                            (function(index) {
                                addBed[j].onclick = function () {
                                    var c_name = addBed[index].className;
                                    if (c_name == 'icon noselect') {
                                        this.className = 'icon noselect ico_select';
                                    } else {
                                        this.className = 'icon noselect';
                                    }
                                }
                            }(j))
                        }
                    }
                })()
            }
            add_subtract();
            //   加减儿童
            function extraChild(dom,numb){
                var _bedBox = dom.parentNode.getElementsByClassName('extraChild') , _html='';
                if(numb==0&&_bedBox.length==1){_bedBox[0].style.display = 'none';}else{
                    _bedBox[0].style.display = 'block';
                    var _listHtml = '';
                    for(var i=1;i<=numb;i++){_listHtml+=extraChildTemp(i);}
                    if(_bedBox.length==0){
                        _html='<div class="extraChild">';
                        domAfter(dom,_html+_listHtml+'</div>');
                    }else{
                        _bedBox[0].innerHTML = _listHtml;
                    }
                }
            }
            //    加减房间
            function extraRoom(dom,numb){
                var roomBox_first = dom.parentNode.childNodes[7];
                var roomBox = document.getElementsByClassName('hotelInfo_numb_people');
                var _html = '';
                if(numb<roomBox.length){
                    console.log(roomBox[roomBox.length-1]);
                    roomBox_first.parentNode.removeChild(roomBox[roomBox.length-1]);
                }else if(numb==roomBox.length){
                    return;
                }
                else{
                    var section = document.createElement("section");
                    section.className = "hotelInfo_numb_people";
                    for(var i=1;i<=numb;i++){
                        _html = extraRoomTemp(i);
                        var rb_l = roomBox.length;
                        var lastIndex = rb_l-1;
                        section.innerHTML = _html;
                        roomBox_first.parentNode.insertBefore(section,roomBox[lastIndex].nextElementSibling);
                    }
                }
                add_subtract();
            }
            function extraChildTemp(i){
                return '<span class="bedList" style="float: left"><i>儿童年龄'+i+'</i></span>'
                        +'<div class="childAge">'
                        +'<input class="inp-cage" type="text" value placeholder="2-14"><i class="child-sui">岁</i>'
                        +'</div>';
            }
            function extraRoomTemp(i){
                return '<span class="title">房间'+i+'</span>'
                        +'<div class="numbList">'
                        +'<span class="n_tit">成人</span>'
                        +'<div class="per-price-control"><span class="cut-down-btn"></span><i class="cut-up-cont">1</i><span class="plus-btn"></span></div>'
                +'</div>'
                +'<div class="numbList">'
                        +'<span class="n_tit">儿童</span>'
                        +'<span class="child-age">（2-14岁）</span>'
                +'<div class="per-price-control" data-type="extraChild"><span class="cut-down-btn"></span><i class="cut-up-cont">1</i><span class="plus-btn"></span></div>'
                +'</div>'
                        +'<div class="extraChild">'
                        +'<span class="bedList" style="float: left"><i>儿童年龄1</i></span>'
                +'<div class="childAge">'
                        +'<input class="inp-cage" type="text" value placeholder="2-14"><i class="child-sui">岁</i>'
                        +'</div>'
                        +'</div>'
                        +'<div class="numbList">'
                        +'<span class="bedList"><i>加床</i><b class="icon noselect"></b></span>'
                +'</div>';
            }
            function domAfter(dom,html){
                var next = dom.nextSibling;
                if(next!=null){
                    while(next.tagName==undefined){
                        if(next.nextSibling!=null){
                            next = next.nextSibling;
                        }else{
                            next = null;break;
                        }
                    }
                }
                next!=null?next.parentNode.insertBefore(el(html),next):dom.parentNode.appendChild(el(html));
            }
        })()







    </script>

<script>

    function double(){
        var paraObj = {
            start:'2016-04-12',
            end:'2016-04-18'};
        var dateInitObj = {},paramStr;
        dateInitObj[paraObj.start] = '入住';
        dateInitObj[paraObj.end] = '离店';
        var myDate= new TicketDate({
            id: 'content2',
            num: 13,
            time: dateInitObj,
            sClass1: 'double-date',
            type:'Return',
            _word:{tip:['入住','离店']}
        });
    };
    double();
   /* function single (){
        var paraObj = {
            start:this.reDate(document.querySelector('.single-date').innerHTML)};
        var dateInitObj = {},paramStr;
        dateInitObj[paraObj.start] = '已选';
        var myDate2= new TicketDate({
            id: 'chooseDate-single',
            num: 13,
            time: dateInitObj,
            sClass1: 'enterDate',
            type:'Oneway',
            _word:{tip:['去程']}
        });
    },
    */


</script>

</body>
</html>
